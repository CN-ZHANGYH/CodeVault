(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{440:function(t,s,a){"use strict";a.r(s);var e=a(7),v=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"service-mesh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-mesh"}},[t._v("#")]),t._v(" Service Mesh")]),t._v(" "),s("h2",{attrs:{id:"æ¦‚å¿µç¯‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚å¿µç¯‡"}},[t._v("#")]),t._v(" æ¦‚å¿µç¯‡")]),t._v(" "),s("ul",[s("li",[t._v("Service Meshäº§ç”Ÿçš„åŸå› ")]),t._v(" "),s("li",[t._v("Service Meshçš„æ¼”è®²è¿‡ç¨‹")]),t._v(" "),s("li",[t._v("Service Meshçš„æ ¸å¿ƒåŠŸèƒ½")])]),t._v(" "),s("h2",{attrs:{id:"service-meshçš„èµ·æº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-meshçš„èµ·æº"}},[t._v("#")]),t._v(" Service Meshçš„èµ·æº")]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆä¼šå‡ºç°service-meshæŠ€æœ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä¼šå‡ºç°service-meshæŠ€æœ¯"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä¼šå‡ºç°Service MeshæŠ€æœ¯ï¼Ÿ")]),t._v(" "),s("p",[t._v("å› ä¸ºç°æœ‰çš„å¾®æœåŠ¡å­˜åœ¨ç€ä¸€äº›é—®é¢˜ï¼Œå…·ä½“æœ‰å“ªäº›é—®é¢˜ï¼ŒæœŸä¸­æœ‰ä¸¤ä¸ªç‰¹æ€§éå¸¸é‡è¦ï¼š")]),t._v(" "),s("p",[s("code",[t._v("å¾®æœåŠ¡æ¶æ„çš„ç‰¹æ€§")])]),t._v(" "),s("ul",[s("li",[t._v("ç‰¹ç‚¹1ï¼š å›´ç»•ä¸šåŠ¡æ„å»ºå›¢é˜Ÿ")]),t._v(" "),s("li",[t._v("ç‰¹ç‚¹2ï¼š å»ä¸­å¿ƒåŒ–çš„æ•°æ®ç®¡ç†")])]),t._v(" "),s("p",[s("code",[t._v("å¾®æœåŠ¡æ¶æ„çš„ä¼˜åŠ¿")])]),t._v(" "),s("ul",[s("li",[t._v("å›¢é˜Ÿå±‚é¢ï¼š å†…èšï¼Œç‹¬ç«‹å¼€å‘ä¸šåŠ¡ï¼Œæ²¡æœ‰ä¾èµ–")]),t._v(" "),s("li",[t._v("äº§å“å±‚é¢ï¼š æœåŠ¡æ‰¹æ¬¡ç‹¬ç«‹ï¼Œç‹¬ç«‹éƒ¨ç½²ï¼Œæ²¡æœ‰ä¾èµ–")])]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆç½‘ç»œé€šä¿¡æ˜¯å¾®æœåŠ¡æ¶æ„ç—›ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆç½‘ç»œé€šä¿¡æ˜¯å¾®æœåŠ¡æ¶æ„ç—›ç‚¹"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆç½‘ç»œé€šä¿¡æ˜¯å¾®æœåŠ¡æ¶æ„ç—›ç‚¹ï¼Ÿ")]),t._v(" "),s("p",[t._v("åˆ†å¸ƒå¼è®¡ç®—çš„8ä¸ªè°¬è®ºï¼ˆFallacies of Distributed Computing Explainedï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("ç½‘ç»œæ˜¯å¯é çš„ ç½‘ç»œå»¶è¿Ÿæ˜¯0")]),t._v(" "),s("li",[t._v("å®½å¸¦æ˜¯æ— é™çš„ ç½‘ç»œæ˜¯å®‰å…¨çš„")]),t._v(" "),s("li",[t._v("ç½‘ç»œæ‹“æ‰‘ä»ä¸æ”¹å˜ åªæœ‰ä¸€ä¸ªç®¡ç†å‘˜")]),t._v(" "),s("li",[t._v("ä¼ è¾“æˆæœ¬æ˜¯0 ç½‘ç»œæ˜¯åŒæ„çš„")])]),t._v(" "),s("h3",{attrs:{id:"å¦‚ä½•ç®¡ç†å’Œæ§åˆ¶æœåŠ¡é—´é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ç®¡ç†å’Œæ§åˆ¶æœåŠ¡é—´é€šä¿¡"}},[t._v("#")]),t._v(" å¦‚ä½•ç®¡ç†å’Œæ§åˆ¶æœåŠ¡é—´é€šä¿¡ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("æœåŠ¡æ³¨å†Œ/å‘ç°")]),t._v(" "),s("li",[t._v("è·¯ç”±,æµé‡è½¬ç§»")]),t._v(" "),s("li",[t._v("å¼¹æ€§èƒ½åŠ›ï¼ˆç†”æ–­ï¼Œè¶…æ—¶ï¼Œé‡è¯•ï¼‰")]),t._v(" "),s("li",[t._v("å®‰å…¨")]),t._v(" "),s("li",[t._v("å¯è§‚å¯Ÿæ€§")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ä»¥ä¸Šçš„åŠŸèƒ½æ‰€æœ‰ç»„åœ¨ä¸€èµ·ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„service mesh")])])]),t._v(" "),s("h2",{attrs:{id:"service-meshçš„å‘å±•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-meshçš„å‘å±•"}},[t._v("#")]),t._v(" Service Meshçš„å‘å±•")]),t._v(" "),s("p",[t._v("ç¬¬ä¸€é˜¶æ®µï¼šæ§åˆ¶é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘è€¦åˆ")]),t._v(" "),s("p",[t._v("ç¬¬äºŒé˜¶æ®µï¼šå…¬å…±åº“")]),t._v(" "),s("p",[t._v("ç¬¬ä¸‰é˜¶æ®µï¼šä»£ç†")]),t._v(" "),s("p",[t._v("ç¬¬å››é˜¶æ®µï¼šè¾¹è½¦æ¨¡å¼ï¼ˆSidecarï¼‰")]),t._v(" "),s("p",[t._v("ç¬¬äº”é˜¶æ®µ: Service Meshçš„å‡ºç°")]),t._v(" "),s("p",[t._v("Service Meshæ¼”è¿›æ€»ç»“ï¼š")]),t._v(" "),s("p",[s("code",[t._v("é€»è¾‘è€¦åˆ")]),t._v(" > "),s("code",[t._v("å…¬å…±åº“")]),t._v(" > "),s("code",[t._v("ä»£ç†")]),t._v(" > "),s("code",[t._v("Sidecar")]),t._v(" > "),s("code",[t._v("Service Mesh")]),t._v(" > "),s("code",[t._v("Service MeshV2")])]),t._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯service-mesh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯service-mesh"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯Service Meshï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ä¸€è¨€ä»¥è”½ä¹‹ï¼šService Mesh æ˜¯å¾®æœåŠ¡æ—¶ä»£çš„ TCP/IP åè®®ã€‚")])])]),t._v(" "),s("ul",[s("li",[t._v("å¾®æœåŠ¡ (Microservices) æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒæ˜¯ä»¥ä¸“æ³¨äºå•ä¸€è´£ä»»ä¸åŠŸèƒ½çš„å°å‹åŠŸèƒ½åŒºå— (Small Building Blocks) ä¸ºåŸºç¡€ï¼Œåˆ©ç”¨æ¨¡å—åŒ–çš„æ–¹å¼ç»„åˆå‡ºå¤æ‚çš„å¤§å‹"),s("a",{attrs:{href:"https://www.zhihu.com/search?q=%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A61901608%7D",target:"_blank",rel:"noopener noreferrer"}},[t._v("åº”ç”¨ç¨‹åº"),s("OutboundLink")],1),t._v("ï¼Œå„åŠŸèƒ½åŒºå—ä½¿ç”¨ä¸"),s("strong",[t._v("è¯­è¨€æ— å…³")]),t._v(" (Language-Independent/Language agnostic) çš„ API é›†ç›¸äº’é€šä¿¡ã€‚")]),t._v(" "),s("li",[t._v("ç›®å‰ä¸šç•Œè·Ÿå¾®æœåŠ¡ç›¸å…³çš„å¼€å‘å¹³å°å’Œæ¡†æ¶æ›´æ˜¯ä¸èƒœæšä¸¾ï¼šSpring Cloudï¼Œ Service Fabricï¼ŒLinkerdï¼ŒEnvoyï¼ŒIstio ...")])]),t._v(" "),s("h3",{attrs:{id:"service-meshçš„ä¸»è¦åŠŸèƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-meshçš„ä¸»è¦åŠŸèƒ½"}},[t._v("#")]),t._v(" Service Meshçš„ä¸»è¦åŠŸèƒ½")]),t._v(" "),s("h4",{attrs:{id:"_1-æµé‡æ§åˆ¶ğŸš€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æµé‡æ§åˆ¶ğŸš€"}},[t._v("#")]),t._v(" "),s("code",[t._v("1.æµé‡æ§åˆ¶ğŸš€")])]),t._v(" "),s("ul",[s("li",[t._v("è·¯ç”±ï¼Œæµé‡è½¬ç§»")]),t._v(" "),s("li",[t._v("è¶…æ—¶é‡è¯•ï¼Œç†”æ–­")]),t._v(" "),s("li",[t._v("æ•…éšœæ³¨å…¥ï¼Œæµé‡é•œåƒ")])]),t._v(" "),s("h4",{attrs:{id:"_2-ç­–ç•¥ğŸš€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç­–ç•¥ğŸš€"}},[t._v("#")]),t._v(" "),s("code",[t._v("2.ç­–ç•¥ğŸš€")])]),t._v(" "),s("ul",[s("li",[t._v("æµé‡é™åˆ¶")]),t._v(" "),s("li",[t._v("é»‘ç™½åå•")])]),t._v(" "),s("h4",{attrs:{id:"_3-ç½‘ç»œå®‰å…¨ğŸš€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç½‘ç»œå®‰å…¨ğŸš€"}},[t._v("#")]),t._v(" "),s("code",[t._v("3.ç½‘ç»œå®‰å…¨ğŸš€")])]),t._v(" "),s("ul",[s("li",[t._v("æˆæƒä»¥åŠèº«ä»½è®¤è¯")])]),t._v(" "),s("h4",{attrs:{id:"_4-å¯è§‚å¯Ÿæ€§ğŸš€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¯è§‚å¯Ÿæ€§ğŸš€"}},[t._v("#")]),t._v(" "),s("code",[t._v("4.å¯è§‚å¯Ÿæ€§ğŸš€")])]),t._v(" "),s("ul",[s("li",[t._v("æŒ‡æ ‡æ”¶é›†å’Œå±•ç¤º")]),t._v(" "),s("li",[t._v("æ—¥å¿—æ”¶é›†")]),t._v(" "),s("li",[t._v("åˆ†å¸ƒå¼è¿½è¸ª")])]),t._v(" "),s("h3",{attrs:{id:"ä¸kubernetesçš„å…³ç³»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸kubernetesçš„å…³ç³»"}},[t._v("#")]),t._v(" ä¸Kubernetesçš„å…³ç³»")]),t._v(" "),s("p",[s("strong",[t._v("KubernetesğŸŒŠ")])]),t._v(" "),s("ul",[s("li",[t._v("è§£å†³å®¹å™¨ç¼–æ’ä¸è°ƒåº¦çš„é—®é¢˜")]),t._v(" "),s("li",[t._v("æœ¬è´¨ä¸Šæ˜¯ç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸï¼ˆè°ƒåº¦å™¨ï¼‰")]),t._v(" "),s("li",[t._v("ç»™äºˆService Mesh æ”¯æŒå’Œå¸®åŠ©")])]),t._v(" "),s("p",[s("strong",[t._v("Service MeshğŸŒŠ")])]),t._v(" "),s("ul",[s("li",[t._v("è§£å†³æœåŠ¡é—´ç½‘ç»œé€šä¿¡é—®é¢˜")]),t._v(" "),s("li",[t._v("æœ¬è´¨ä¸Šæ˜¯ç®¡ç†æœåŠ¡é€šä¿¡ï¼ˆä»£ç†ï¼‰")]),t._v(" "),s("li",[t._v("æ˜¯å¯¹Kubernetesç½‘ç»œåŠŸèƒ½æ–¹é¢çš„æ‰©å±•å’Œå»¶ä¼¸ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ä¸apiç½‘å…³çš„å¼‚åŒç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸apiç½‘å…³çš„å¼‚åŒç‚¹"}},[t._v("#")]),t._v(" ä¸APIç½‘å…³çš„å¼‚åŒç‚¹")]),t._v(" "),s("p",[t._v("APIç½‘å…³")]),t._v(" "),s("ul",[s("li",[t._v("è´Ÿè½½å‡è¡¡")]),t._v(" "),s("li",[t._v("æœåŠ¡å‘ç°")]),t._v(" "),s("li",[t._v("æµé‡æ§åˆ¶")])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec02e92ab3f51d9129d424.png"}}),t._v(" "),s("p",[t._v("åŠŸèƒ½æœ‰é‡å ï¼Œä½†è§’è‰²ä¸åŒã€‚")]),t._v(" "),s("p",[s("code",[t._v("Service Meshåœ¨åº”ç”¨å†…éƒ¨ï¼Œè€ŒAPIç½‘å…³åœ¨åº”ç”¨ä¹‹ä¸Šï¼ˆè¾¹ç•Œï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"æœ‰å“ªäº›ä¸»æµçš„service-meshäº§å“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰å“ªäº›ä¸»æµçš„service-meshäº§å“"}},[t._v("#")]),t._v(" æœ‰å“ªäº›ä¸»æµçš„Service Meshäº§å“ï¼Ÿ")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("æ—¶é—´")]),t._v(" "),s("th",[t._v("ç›¸å…³çš„Service Meshçš„äº§å“")]),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("2016")])]),t._v(" "),s("td",[t._v("Linkerdã€Envoy")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("2017")])]),t._v(" "),s("td",[t._v("Linkerd1.0ã€Envoyã€Istio0.1å‘å¸ƒã€Conduitå‘å¸ƒ")]),t._v(" "),s("td",[t._v("Linkerd1.0ã€EnvoyåŠ å…¥CNCF")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("2018")])]),t._v(" "),s("td",[t._v("Istio1.0å‘å¸ƒã€Envoyç¨³å®šå‘å¸ƒã€Conduitå¹¶å…¥Linkerd2.0")]),t._v(" "),s("td",[t._v("Conduitæ˜¯å›½å†…å¤§å‚ç ”å‘")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("2019")])]),t._v(" "),s("td",[t._v("Istio1.1å‘å¸ƒã€AWS APP Mesh GAã€Google Traffic Director betaå‘å¸ƒã€Kongå‘å¸ƒKumaã€Mosnã€")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("2020")])]),t._v(" "),s("td",[t._v("Isitio1.5å‘å¸ƒ")]),t._v(" "),s("td",[t._v("3æœˆä»½ä¸€ç›´åˆ°åé¢åœ¨è¿­ä»£æ›´æ–°")])])])]),t._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯istio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯istio"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯Istioï¼Ÿ")]),t._v(" "),s("h3",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("ç°åœ¨æœ€ç«çš„åç«¯æ¶æ„æ— ç–‘æ˜¯**"),s("code",[t._v("å¾®æœåŠ¡")]),s("strong",[t._v("äº†ï¼Œå¾®æœåŠ¡å°†ä¹‹å‰çš„å•ä½“åº”ç”¨æ‹†åˆ†æˆäº†è®¸å¤šç‹¬ç«‹çš„æœåŠ¡ï¼Œå¥½å¤„è‡ªç„¶å¾ˆå¤šï¼Œä½†æ˜¯éšç€åº”ç”¨çš„è¶Šæ¥è¶Šå¤§ï¼Œå¾®æœåŠ¡æš´éœ²å‡ºæ¥çš„é—®é¢˜ä¹Ÿå°±éšä¹‹è€Œæ¥äº†ï¼Œå¾®æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œç®¡ç†è¶Šæ¥è¶Šéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯è¦ä½ éƒ¨ç½²ä¸€å¥—æ–°ç¯å¢ƒçš„æ—¶å€™ï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°è¿™ç§ç—›è‹¦äº†ï¼Œéšä¹‹è€Œæ¥çš„")]),s("code",[t._v("æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€Traceè·Ÿè¸ªã€æµé‡ç®¡ç†ã€å®‰å…¨è®¤è¯ç­‰ç­‰")]),t._v("**é—®é¢˜ã€‚å¦‚æœä»å¤´åˆ°å°¾å®Œæˆè¿‡ä¸€å¥—å¾®æœåŠ¡æ¡†æ¶çš„è¯ï¼Œä½ å°±ä¼šçŸ¥é“è¿™é‡Œé¢æ¶‰åŠåˆ°çš„ä¸œè¥¿çœŸçš„éå¸¸å¤šã€‚å¯¹äº Java é¢†åŸŸæ¥è¯´è¿˜æœ‰ Spring Cloud è¿™ç§å®Œæ•´çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œä½†æ˜¯ä¹Ÿä»…ä»…å±€é™äº Java è¯­è¨€ã€‚å½“ç„¶éšç€å¾®æœåŠ¡çš„ä¸æ–­å‘å±•ï¼Œå¾®æœåŠ¡çš„ç”Ÿæ€ä¹Ÿä¸æ–­å®Œå–„ï¼Œæœ€è¿‘å°±å‘ç°æ–°ä¸€ä»£çš„å¾®æœåŠ¡å¼€å‘å°±æ‚„ç„¶å…´èµ·äº†ï¼Œé‚£å°±æ˜¯ "),s("code",[t._v("Service Meshï¼ˆæœåŠ¡ç½‘æ ¼ï¼‰")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"istioçš„ä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioçš„ä»‹ç»"}},[t._v("#")]),t._v(" Istioçš„ä»‹ç»")]),t._v(" "),s("p",[t._v("å®˜æ–¹å®šä¹‰ï¼š å®ƒæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„"),s("code",[t._v("æœåŠ¡ç½‘æ ¼")]),t._v("ï¼Œä½œä¸º"),s("code",[t._v("é€æ˜")]),t._v("çš„ä¸€å±‚æ¥å…¥åˆ°ç°æœ‰çš„åˆ†å¸ƒå¼åº”ç”¨ä¸­ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå¯ä»¥ä¸ä»»ä½•æ—¥å¿—ã€é¥æµ‹å’Œç­–ç•¥ç³»ç»Ÿè¿›è¡Œé›†æˆã€‚Istioå¤šæ ·åŒ–çš„ç‰¹æ€§è®©ä½ èƒ½å¤ŸæˆåŠŸè€Œä¸”é«˜æ•ˆåœ°è¿è¡Œå¾®"),s("code",[t._v("æœåŠ¡æ¡†æ¶")]),t._v("ï¼Œå¹¶"),s("code",[t._v("æä¾›ä¿æŠ¤")]),t._v("ï¼Œ"),s("code",[t._v("è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡")]),t._v("çš„ç»Ÿä¸€æ–¹æ³•ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("ä¼˜åŠ¿ï¼š")])]),t._v(" "),s("ul",[s("li",[t._v("è½»æ¾æ„å»ºæœåŠ¡ç½‘æ ¼")]),t._v(" "),s("li",[t._v("åº”ç”¨ä»£ç æ— éœ€æ›´æ”¹")]),t._v(" "),s("li",[t._v("åŠŸèƒ½åŠŸå¼ºå¤§")])]),t._v(" "),s("p",[s("strong",[t._v("Istioæ ¸å¿ƒåŠŸèƒ½ï¼š")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("æµé‡æ§åˆ¶")]),t._v("ï¼š è·¯ç”±ã€æµé‡è½¬ç§»ã€å¼¹æ€§ã€æµ‹è¯•ã€")]),t._v(" "),s("li",[s("code",[t._v("å®‰å…¨")]),t._v("ï¼š è®¤è¯ã€æˆæƒ")]),t._v(" "),s("li",[s("code",[t._v("å¯è§‚å¯Ÿæ€§")]),t._v("ï¼š æŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ª")]),t._v(" "),s("li",[s("code",[t._v("ç­–ç•¥")]),t._v("ï¼š é™æµã€é»‘ç™½åå•")])]),t._v(" "),s("h3",{attrs:{id:"istioçš„ä½¿å‘½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioçš„ä½¿å‘½"}},[t._v("#")]),t._v(" Istioçš„ä½¿å‘½")]),t._v(" "),s("p",[t._v("Istioçš„æ„ä¹‰")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("å®é™…ä¸Šæ˜¯è®©ä½ é‡æ–°å®šä¹‰äº†å¾®æœåŠ¡çš„å¼€å‘æ–¹å¼ï¼Œè®©ä½ å¯ä»¥è½»æ¾çš„åœ¨ä½ çš„å¾®æœåŠ¡æ¶æ„ä¸­æ¤å…¥Service MeshæŠ€æœ¯ã€‚")])]),t._v(" "),s("li",[t._v("å¤§å¹…åº¦é™ä½å¾®æœåŠ¡çš„åº”ç”¨çš„å¼€å‘é—¨æ§›ï¼Œè®©ä½ åªå…³æ³¨ä¸šåŠ¡çš„æœ¬èº«ï¼Œä¸ç”¨å»è€ƒè™‘å¦‚ä½•æ·»åŠ å¾ˆå¤šç½‘ç»œæ§åˆ¶ç›¸å…³çš„åŠŸèƒ½ï¼Œæˆ–è€…æ˜¯ç±»åº“ã€‚")]),t._v(" "),s("li",[t._v("å®ƒä½¿ç”¨äº†ç»Ÿä¸€çš„è¿ç»´å’Œå¼€å‘æ–¹å¼ï¼Œæ¥ç®€åŒ–å¾®æœåŠ¡çš„å¼€å‘æµç¨‹ã€‚")])]),t._v(" "),s("p",[t._v("Istioçš„æˆ˜ç•¥ä½¿å‘½")]),t._v(" "),s("ul",[s("li",[t._v("istio æ˜¯ç”±"),s("code",[t._v("Googleã€IBMã€Lyft")]),t._v("ç­‰å…±åŒå¼€æºçš„ Service Meshï¼ˆæœåŠ¡ç½‘æ ¼ï¼‰æ¡†æ¶ï¼Œäº2017å¹´åˆå¼€å§‹è¿›å…¥å¤§ä¼—è§†é‡ã€‚æ‰€ä»¥å®ƒæœ‰è¿™ä¸‰å®¶å…¬å¸æ”¯æ’‘ç€ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"istioçš„æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioçš„æ¶æ„"}},[t._v("#")]),t._v(" Istioçš„æ¶æ„")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Istio1.0çš„æ¶æ„")])])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec02f62ab3f51d9129e23a.png"}}),t._v(" "),s("p",[s("strong",[s("code",[t._v("Istio1.1æ¶æ„")])])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03032ab3f51d9129f0e6.png"}}),t._v(" "),s("p",[s("strong",[s("code",[t._v("Istioçš„æ¶æ„ä¹‹ä¼¤")])])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec030e2ab3f51d9129fcd2.png"}}),t._v(" "),s("p",[s("strong",[t._v("å¤æ‚æ˜¯ä¸‡æ¶ä¹‹æºï¼Œå­¦ä¼šåœæ­¢ç„¦è™‘ï¼Œçˆ±ä¸Šå•ä½“â€”â€”â€”â€”Istioå›¢é˜Ÿ")])]),t._v(" "),s("p",[t._v("åŸæœ‰çš„æ¶æ„å¤æ‚æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç»´æŠ¤æ€§")]),t._v(" "),s("li",[t._v("å¤šç»„ä»¶åˆ†ç¦»çš„å¿…è¦æ€§")]),t._v(" "),s("li",[t._v("ä¼¸ç¼©æ€§")]),t._v(" "),s("li",[t._v("å®‰å…¨æ€§")])]),t._v(" "),s("p",[s("strong",[s("code",[t._v("æ¶æ„1.5ç‰ˆæœ¬")])])]),t._v(" "),s("ul",[s("li",[t._v("é‡å»ºæ§åˆ¶å¹³é¢")]),t._v(" "),s("li",[t._v("æ•´åˆistod")]),t._v(" "),s("li",[t._v("åºŸå¼ƒMixer")]),t._v(" "),s("li",[t._v("æ·»åŠ æ–°ç‰¹æ€§")]),t._v(" "),s("li",[t._v("æ€§èƒ½æå‡")]),t._v(" "),s("li",[t._v("Bugä¿®å¤")])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec031b2ab3f51d912a0b17.png"}}),t._v(" "),s("h3",{attrs:{id:"istioæ ¸å¿ƒåŠŸèƒ½æµé‡æ§åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioæ ¸å¿ƒåŠŸèƒ½æµé‡æ§åˆ¶"}},[t._v("#")]),t._v(" Istioæ ¸å¿ƒåŠŸèƒ½æµé‡æ§åˆ¶")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Istioæµé‡æ§åˆ¶èƒ½åŠ›")])])]),t._v(" "),s("p",[s("strong",[t._v("ä¸»è¦åŠŸèƒ½ï¼š")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("è·¯ç”±ã€æµé‡è½¬ç§»")])]),t._v(" "),s("li",[s("code",[t._v("æµé‡è¿›å‡º")])]),t._v(" "),s("li",[s("code",[t._v("ç½‘ç»œå¼¹æ€§èƒ½åŠ›")])]),t._v(" "),s("li",[s("code",[t._v("æµ‹è¯•ç›¸å…³")])])]),t._v(" "),s("p",[s("strong",[t._v("æ ¸å¿ƒèµ„æºï¼š")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("è™šæ‹ŸæœåŠ¡ï¼ˆVirtual Serviceï¼‰")])]),t._v(" "),s("li",[s("code",[t._v("ç›®æ ‡è§„åˆ™ï¼ˆDestination Ruleï¼‰")])]),t._v(" "),s("li",[s("code",[t._v("ç½‘å…³ï¼ˆGatewayï¼‰")])]),t._v(" "),s("li",[s("code",[t._v("æœåŠ¡å…¥å£ï¼ˆService Entryï¼‰")])]),t._v(" "),s("li",[s("code",[t._v("Sidecar")])])]),t._v(" "),s("ol",[s("li",[s("h4",{attrs:{id:"è™šæ‹ŸæœåŠ¡-virtual-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šæ‹ŸæœåŠ¡-virtual-service"}},[t._v("#")]),t._v(" è™šæ‹ŸæœåŠ¡ï¼ˆVirtual Serviceï¼‰")])])]),t._v(" "),s("ul",[s("li",[t._v("å°†æµé‡è·¯ç”±åˆ°ç»™å®šçš„ç›®æ ‡åœ°å€")]),t._v(" "),s("li",[t._v("è¯·æ±‚åœ°å€ä¸çœŸå®çš„å·¥ä½œè´Ÿè½½è§£è€¦")]),t._v(" "),s("li",[t._v("åŒ…å«ä¸€ç»„è·¯ç”±è§„åˆ™")]),t._v(" "),s("li",[t._v("é€šå¸¸å’Œç›®æ ‡è§„åˆ™ï¼ˆDestination Ruleï¼‰æˆå¯¹å‡ºç°")]),t._v(" "),s("li",[t._v("ä¸°å¯Œçš„è·¯ç”±åŒ¹é…è§„åˆ™")])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03262ab3f51d912a1540.png"}}),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("h4",{attrs:{id:"ç›®æ ‡è§„åˆ™-destination-rule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›®æ ‡è§„åˆ™-destination-rule"}},[t._v("#")]),t._v(" ç›®æ ‡è§„åˆ™ï¼ˆDestination Ruleï¼‰")])])]),t._v(" "),s("p",[s("code",[t._v("å®šä¹‰è™šæ‹ŸæœåŠ¡è·¯ç”±ç›®æ ‡åœ°å€çš„çœŸå®åœ°å€ï¼Œå³å­é›†ï¼ˆsubnetï¼‰")])]),t._v(" "),s("p",[t._v("è®¾ç½®è´Ÿè½½å‡è¡¡çš„æ–¹å¼")]),t._v(" "),s("ul",[s("li",[t._v("éšæœº")]),t._v(" "),s("li",[t._v("æƒé‡")]),t._v(" "),s("li",[t._v("æœ€å°‘è¯·æ±‚æ•°")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("h4",{attrs:{id:"ç½‘å…³-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘å…³-gateway"}},[t._v("#")]),t._v(" ç½‘å…³ï¼ˆGatewayï¼‰")])])]),t._v(" "),s("p",[t._v("ç®¡ç†è¿›å‡ºçš„ç½‘æ ¼æµé‡")]),t._v(" "),s("p",[t._v("å¤„åœ¨ç½‘æ ¼çš„è¾¹ç•Œ")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03332ab3f51d912a214e.png"}}),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("h4",{attrs:{id:"sidecar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sidecar"}},[t._v("#")]),t._v(" Sidecar")])])]),t._v(" "),s("p",[t._v("è°ƒæ•´Envoyä»£ç†æ¥ç®¡çš„ç«¯å£å’Œåè®®")]),t._v(" "),s("p",[t._v("é™åˆ¶Envoyä»£ç†å¯è®¿é—®çš„æœåŠ¡")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03332ab3f51d912a2151.png"}}),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[s("h4",{attrs:{id:"ç½‘ç»œå¼¹æ€§å’Œæµ‹è¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œå¼¹æ€§å’Œæµ‹è¯•"}},[t._v("#")]),t._v(" ç½‘ç»œå¼¹æ€§å’Œæµ‹è¯•")])])]),t._v(" "),s("p",[t._v("å¼¹æ€§èƒ½åŠ›ï¼š è¶…æ—¶ é‡è¯• ç†”æ–­")]),t._v(" "),s("p",[t._v("æµ‹è¯•èƒ½åŠ›ï¼š æ•…éšœæ³¨å…¥ æµé‡é•œåƒ")]),t._v(" "),s("h3",{attrs:{id:"istioæœåŠ¡çš„å¯è§‚å¯Ÿæ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioæœåŠ¡çš„å¯è§‚å¯Ÿæ€§"}},[t._v("#")]),t._v(" IstioæœåŠ¡çš„å¯è§‚å¯Ÿæ€§")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ä»€ä¹ˆæ˜¯å¯è§‚å¯Ÿæ€§ï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[t._v("å¯è§‚å¯Ÿæ€§!=ç›‘æ§")]),t._v(" "),s("li",[t._v("ä»å¼€å‘è€…çš„è§’åº¦æ¢ç©¶ç³»ç»Ÿçš„çŠ¶æ€")]),t._v(" "),s("li",[t._v("ç»„æˆï¼š æŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ª")])])]),t._v(" "),s("ol",[s("li",[s("h4",{attrs:{id:"æŒ‡æ ‡-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‡æ ‡-metrics"}},[t._v("#")]),t._v(" æŒ‡æ ‡ï¼ˆMetricsï¼‰")])])]),t._v(" "),s("p",[t._v("ä»¥èšåˆçš„æ–¹å¼ç›‘æ§å’Œç†è§£ç³»ç»Ÿè¡Œä¸º")]),t._v(" "),s("p",[s("strong",[t._v("Istioä¸­çš„æŒ‡æ ‡åˆ†ç±»ï¼š")])]),t._v(" "),s("ul",[s("li",[t._v("ä»£ç†çº§åˆ«çš„æŒ‡æ ‡"),s("code",[t._v("ï¼ˆProxy-levelï¼‰")])]),t._v(" "),s("li",[t._v("æœåŠ¡çº§åˆ«çš„æŒ‡æ ‡"),s("code",[t._v("ï¼ˆService-levelï¼‰")])]),t._v(" "),s("li",[t._v("æ§åˆ¶å¹³é¢æŒ‡æ ‡"),s("code",[t._v("ï¼ˆControl planeï¼‰")])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("h4",{attrs:{id:"ä»£ç†çº§åˆ«çš„æŒ‡æ ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç†çº§åˆ«çš„æŒ‡æ ‡"}},[t._v("#")]),t._v(" ä»£ç†çº§åˆ«çš„æŒ‡æ ‡")])])]),t._v(" "),s("ul",[s("li",[t._v("æ”¶é›†ç›®æ ‡ï¼š sidecarä»£ç†")]),t._v(" "),s("li",[t._v("èµ„æºç²’åº¦ä¸Šçš„ç½‘æ ¼ç›‘æ§")]),t._v(" "),s("li",[t._v("å®¹è®¸æŒ‡å®šæ”¶é›†çš„ä»£ç†ï¼ˆé’ˆå¯¹æ€§çš„è°ƒè¯•ï¼‰")])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03462ab3f51d912a33bb.png"}}),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("h4",{attrs:{id:"æœåŠ¡çº§åˆ«çš„æŒ‡æ ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡çº§åˆ«çš„æŒ‡æ ‡"}},[t._v("#")]),t._v(" æœåŠ¡çº§åˆ«çš„æŒ‡æ ‡")])])]),t._v(" "),s("ul",[s("li",[t._v("ç”¨äºç›‘æ§æœåŠ¡çš„é€šä¿¡")]),t._v(" "),s("li",[t._v("å››ä¸ªåŸºæœ¬æœåŠ¡ç›‘æ§çš„éœ€æ±‚ï¼š å»¶è¿Ÿã€æµé‡ã€é”™è¯¯ã€é¥±å’Œ")]),t._v(" "),s("li",[t._v("é»˜è®¤æŒ‡æ ‡å¯¼å‡ºåˆ°Prometheusï¼ˆå¯è‡ªå®šä¹‰å’Œæ›´æ”¹ï¼‰")]),t._v(" "),s("li",[t._v("å¯æ ¹æ®éœ€æ±‚å¼€å¯å’Œå…³é—­")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("h4",{attrs:{id:"è®¿é—®æ—¥å¿—-access-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®¿é—®æ—¥å¿—-access-logs"}},[t._v("#")]),t._v(" è®¿é—®æ—¥å¿—ï¼ˆAccess logsï¼‰")])])]),t._v(" "),s("ul",[s("li",[t._v("é€šè¿‡åº”ç”¨äº§ç”Ÿçš„äº‹ä»¶æ¥äº†è§£ç³»ç»Ÿ")]),t._v(" "),s("li",[t._v("åŒ…æ‹¬äº†å®Œæ•´çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆç›®æ ‡ã€æºï¼‰")]),t._v(" "),s("li",[t._v("ç”Ÿæˆä½ç½®å¯é€‰ï¼ˆæœ¬åœ°ã€è¿œç«¯ã€å¦‚filebeatï¼‰")]),t._v(" "),s("li",[t._v("æ—¥å¿—å†…å®¹ï¼š\n"),s("ul",[s("li",[s("code",[t._v("åº”ç”¨æ—¥å¿—")])]),t._v(" "),s("li",[s("code",[t._v("Envoyæ—¥å¿— kubectl logs -l app=demo -c istio-proxy")])])])])]),t._v(" "),s("h3",{attrs:{id:"istioçš„å®‰å…¨æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#istioçš„å®‰å…¨æ¶æ„"}},[t._v("#")]),t._v(" Istioçš„å®‰å…¨æ¶æ„")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec03522ab3f51d912a3f70.png"}}),t._v(" "),s("h4",{attrs:{id:"è®¤è¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®¤è¯"}},[t._v("#")]),t._v(" è®¤è¯")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è®¤è¯æ–¹å¼")])]),t._v(" "),s("li",[s("strong",[t._v("ç­–ç•¥å­˜å‚¨")])]),t._v(" "),s("li",[s("strong",[t._v("æ”¯æŒå…¼å®¹æ¨¡å¼")])])]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://pic.imgdb.cn/item/61ec035d2ab3f51d912a4a7d.png"}}),t._v(" "),s("h4",{attrs:{id:"è®¤è¯æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®¤è¯æ–¹å¼"}},[t._v("#")]),t._v(" è®¤è¯æ–¹å¼")]),t._v(" "),s("p",[s("code",[t._v("å¯¹ç­‰è®¤è¯ï¼ˆPeer authenticationï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("ç”¨äºæœåŠ¡é—´èº«ä»½è®¤è¯")]),t._v(" "),s("li",[t._v("Mutual TLSï¼ˆmTLSï¼‰")])]),t._v(" "),s("p",[s("code",[t._v("è¯·æ±‚è®¤è¯ï¼ˆRequest authenticationï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("ç”¨äºç»ˆç«¯ç”¨æˆ·èº«ä»½è®¤çœŸ")]),t._v(" "),s("li",[t._v("JSON Web Tokenï¼ˆJWTï¼‰")])]),t._v(" "),s("h4",{attrs:{id:"è®¤è¯ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®¤è¯ç­–ç•¥"}},[t._v("#")]),t._v(" è®¤è¯ç­–ç•¥")]),t._v(" "),s("ul",[s("li",[t._v("é…ç½®æ–¹å¼")]),t._v(" "),s("li",[t._v("é…ç½®ç”Ÿæ•ˆèŒƒå›´ï¼š [ç½‘æ ¼ã€å‘½åç©ºé—´ã€å·¥ä½œè´Ÿè½½ï¼ˆæœåŠ¡ï¼‰]")]),t._v(" "),s("li",[t._v("ç­–ç•¥çš„æ›´æ–°")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" security.istio.io/v1beta1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PeerAuthentication\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("peer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("only\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" foo\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matchLabels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" reviews\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mtls")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" STRICT\n")])])]),s("h4",{attrs:{id:"æˆæƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒ"}},[t._v("#")]),t._v(" æˆæƒ")]),t._v(" "),s("ul",[s("li",[t._v("æˆæƒçº§åˆ«")]),t._v(" "),s("li",[t._v("ç­–ç•¥åˆ†å‘")]),t._v(" "),s("li",[t._v("æˆæƒå¼•æ“")]),t._v(" "),s("li",[t._v("æ— éœ€æ˜¾å¼å¯ç”¨")])]),t._v(" "),s("h4",{attrs:{id:"æˆæƒç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒç­–ç•¥"}},[t._v("#")]),t._v(" æˆæƒç­–ç•¥")]),t._v(" "),s("p",[t._v("é€šè¿‡åˆ›å»ºAuthorizationPolicyå®ç°")]),t._v(" "),s("p",[t._v("ç»„æˆéƒ¨åˆ†")]),t._v(" "),s("ul",[s("li",[t._v("é€‰æ‹©å™¨ï¼ˆSelectorï¼‰")]),t._v(" "),s("li",[t._v("è¡Œä¸ºï¼ˆActionï¼‰")]),t._v(" "),s("li",[t._v("è§„åˆ™åˆ—è¡¨ï¼ˆRulesï¼‰\n"),s("ul",[s("li",[t._v("æ¥æºï¼ˆfromï¼‰")]),t._v(" "),s("li",[t._v("æ“ä½œï¼ˆtoï¼‰")]),t._v(" "),s("li",[t._v("åŒ¹é…æ¡ä»¶ï¼ˆwhenï¼‰")])])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" security.istio.io/v1beta1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" AuthorizationPolicy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" httpbin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("policy\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" foo\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matchLabels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" httpbin\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ALLOW\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("principals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cluster.local/ns/default/sa/sleep"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("operation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("methods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/info*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request.auth.claims"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("iss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://foo.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h4",{attrs:{id:"æˆæƒç­–ç•¥çš„è®¾ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒç­–ç•¥çš„è®¾ç½®"}},[t._v("#")]),t._v(" æˆæƒç­–ç•¥çš„è®¾ç½®")]),t._v(" "),s("p",[t._v("èŒƒå›´ï¼ˆç›®æ ‡ï¼‰è®¾ç½®ï¼šmetadata/namespace/selector")]),t._v(" "),s("p",[t._v("åŒ¹é…å€¼ï¼š ç²¾ç¡®ã€æ¨¡ç³Šã€å‰ç¼€ã€åç¼€")]),t._v(" "),s("p",[t._v("å…¨éƒ¨å®¹è®¸å’Œæ‹’ç»")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰æ¡ä»¶")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" security.istio.io/v1beta1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" AuthorizationPolicy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tester\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿™é‡Œæ˜¯åŒ¹é…èŒƒå›´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matchLabels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" products     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åŒ…æ‹¬ä½¿ç”¨selectoré€‰æ‹©èŒƒå›´")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ALLOW\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("operation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/test/*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*/info"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" security.istio.io/v1beta1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" AuthorizationPolicy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" allow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("all\n "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿™é‡Œæ˜¯åŒ¹é…èŒƒå›´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rules")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿™é‡Œè¡¨ç¤ºå…¨éƒ¨")]),t._v("\n")])])]),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" request.headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=v.exports}}]);