(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{434:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nginx动静分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx动静分离"}},[t._v("#")]),t._v(" Nginx动静分离")]),t._v(" "),s("h2",{attrs:{id:"什么是动静分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是动静分离"}},[t._v("#")]),t._v(" 什么是动静分离？")]),t._v(" "),s("h3",{attrs:{id:"_1-1-动态页面与静态页面区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-动态页面与静态页面区别"}},[t._v("#")]),t._v(" 1.1 动态页面与静态页面区别")]),t._v(" "),s("ul",[s("li",[t._v("静态资源： 当用户多次访问这个资源，资源的源代码永远不会改变的资源。")]),t._v(" "),s("li",[t._v("动态资源：当用户多次访问这个资源，资源的源代码可能会发送改变。")])]),t._v(" "),s("h3",{attrs:{id:"_1-2-什么是动静分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-什么是动静分离"}},[t._v("#")]),t._v(" 1.2 什么是动静分离")]),t._v(" "),s("ul",[s("li",[t._v("动静分离是让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好了拆分以后，我们就可以根据静态资源的特点将其做缓存操作，这就是网站静态化处理的核心思路")]),t._v(" "),s("li",[t._v("动静分离简单的概括是：动态文件与静态文件的分离。")]),t._v(" "),s("li",[t._v("伪静态：网站如果想被搜索引擎搜素到，动态页面静态技术freemarker等模版引擎技术")])]),t._v(" "),s("h3",{attrs:{id:"_1-3-为什么要用动静分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-为什么要用动静分离"}},[t._v("#")]),t._v(" 1.3 为什么要用动静分离")]),t._v(" "),s("ul",[s("li",[t._v("在我们的软件开发中，有些请求是需要后台处理的（如：.jsp,.do等等），有些请求是不需要经过后台处理的（如：css、html、jpg、js等等文件），这些不需要经过后台处理的文件称为静态文件，否则动态文件。因此我们后台处理忽略静态文件。这会有人又说那我后台忽略静态文件不就完了吗。当然这是可以的，但是这样后台的请求次数就明显增多了。在我们对资源的响应速度有要求的时候，我们应该使用这种动静分离的策略去解决。")]),t._v(" "),s("li",[t._v("动静分离将网站静态资源（HTML，JavaScript，CSS，img等文件）与后台应用分开部署，提高用户访问静态代码的速度，降低对后台应用访问。这里我们将静态资源放到nginx中，动态资源转发到tomcat服务器中。")]),t._v(" "),s("li",[t._v("因此，动态资源转发到tomcat服务器我们就使用到了前面讲到的反向代理了。")])]),t._v(" "),s("h2",{attrs:{id:"nginx实例动静分离"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx实例动静分离"}},[t._v("#")]),t._v(" Nginx实例动静分离")]),t._v(" "),s("h3",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),s("p",[t._v("在linux系统中准备静态资源，用于访问。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@nginx ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir /data/images ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@nginx ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir /data/www")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@nginx ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo "test html" > /data/www/a.html ')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@nginx ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch  /data/images/a.jpg")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1、配置nginx配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、配置nginx配置文件"}},[t._v("#")]),t._v(" 1、配置Nginx配置文件")]),t._v(" "),s("p",[t._v("修改nginx的配置文件，添加一个location和添加两个访问目录。")]),t._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[t._v("[root@nginx ~]# "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("vim")]),t._v(" /usr/local/nginx/conf/nginx.conf\nserver")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  192.168.0.135")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改为本机的地址")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#charset koi8-r;")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#access_log  logs/host.access.log  main;")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /www/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   /data/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v("  index.html index.htm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /images/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   /data/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("autoindex")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启index列表访问")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"_2、重启服务测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、重启服务测试"}},[t._v("#")]),t._v(" 2、重启服务测试")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@nginx ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/nginx/sbin/nginx -s reload")]),t._v("\n")])])]),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://i.bmp.ovh/imgs/2022/02/0f7733e19af884e8.png"}}),t._v(" "),s("img",{attrs:{src:"https://i.bmp.ovh/imgs/2022/02/472bf07ed65ce11f.png"}})])}),[],!1,null,null,null);s.default=e.exports}}]);