(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{339:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"容器化部署快速开发框架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器化部署快速开发框架"}},[s._v("#")]),s._v(" 容器化部署快速开发框架")]),s._v(" "),t("h4",{attrs:{id:"_1-容器化部署mariadb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-容器化部署mariadb"}},[s._v("#")]),s._v(" 1. 容器化部署MariaDB")]),s._v(" "),t("h5",{attrs:{id:"_1-编写dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写dockerfile"}},[s._v("#")]),s._v(" （1）编写Dockerfile")]),s._v(" "),t("p",[s._v("编写init.sh脚本：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd Pig/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat mysql_init.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\nmysql_install_db "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\nmysqld_safe "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nmysqladmin "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" root password "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("\nmysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-proot")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"grant all on *.* to 'root'@'%' identified by 'root'; flush privileges;\"")]),s._v("\nmysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-proot")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source /opt/pig.sql;source /opt/pig_codegen.sql;source /opt/pig_config.sql; source /opt/pig_job.sql;"')]),s._v("\n")])])]),t("p",[s._v("编写yum源：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat local.repo")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pig\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///root/yum\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("p",[s._v("编写Dockerfile文件：")]),s._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("[root@k8s-worker-node1 Pig]# cat Dockerfile-mariadb\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos:centos7.9.2009")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Chinaskills")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" rm -rf /etc/yum.repos.d/*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" local.repo /etc/yum.repos.d/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" yum /root/yum")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" LC_ALL en_US.UTF-8")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum -y install mariadb-server")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" mysql /opt/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" mysql_init.sh /opt/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" bash /opt/mysql_init.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysqld_safe"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--user=root"')]),s._v("]")]),s._v("\n")])])]),t("h5",{attrs:{id:"_2-构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-构建镜像"}},[s._v("#")]),s._v(" （2）构建镜像")]),s._v(" "),t("p",[s._v("构建镜像：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -t pig-mysql:v1.0 -f Dockerfile-mariadb .")]),s._v("\nSending build context to Docker daemon  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("890")]),s._v(".9MB\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos:centos7.9.2009\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" eeb6ee3f44bd\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAINTAINER Chinaskills\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 815a4a5f2242\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/yum.repos.d/*\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 6afa0315cb5b\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY local.repo /etc/yum.repos.d/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 4f07e082cc00\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY yum /root/yum\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 7042f9e7f455\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ENV "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_ALL")]),s._v(" en_US.UTF-8\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" df0aa8985d61\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mariadb-server\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 9ad09d62d373\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY mysql /opt/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 75adb0e3bbb0\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY mysql_init.sh /opt/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 3cc10e8ca0cc\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" /opt/mysql_init.sh\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f7fe9f822cc3\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 70f2274acbeb\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("/12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysqld_safe"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--user=root"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f088fb18dedf\nSuccessfully built f088fb18dedf\nSuccessfully tagged pig-mysql:v1.0\n")])])]),t("h4",{attrs:{id:"_2-容器化部署redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-容器化部署redis"}},[s._v("#")]),s._v(" 2. 容器化部署Redis")]),s._v(" "),t("h5",{attrs:{id:"_1-编写dockerfile-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写dockerfile-2"}},[s._v("#")]),s._v(" （1）编写Dockerfile")]),s._v(" "),t("p",[s._v("编写Dockerfile文件：")]),s._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("[root@k8s-worker-node1 Pig]# cat Dockerfile-redis\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos:centos7.9.2009")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Chinaskills")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" rm -rf /etc/yum.repos.d/*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" local.repo /etc/yum.repos.d/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" yum /root/yum")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum -y install redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/127.0.0.1/0.0.0.0/g'")]),s._v(" /etc/redis.conf && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n   sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/protected-mode yes/protected-mode no/g'")]),s._v(" /etc/redis.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/redis-server"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/redis.conf"')]),s._v("]")]),s._v("\n")])])]),t("h5",{attrs:{id:"_2-构建镜像-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-构建镜像-2"}},[s._v("#")]),s._v(" （2）构建镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -t pig-redis:v1.0 -f Dockerfile-redis .")]),s._v("\nSending build context to Docker daemon  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("890")]),s._v(".9MB\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos:centos7.9.2009\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" eeb6ee3f44bd\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAINTAINER Chinaskills\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 815a4a5f2242\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/yum.repos.d/*\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 6afa0315cb5b\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY local.repo /etc/yum.repos.d/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 4f07e082cc00\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY yum /root/yum\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 7042f9e7f455\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 2d0b65ca48f0\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/127.0.0.1/0.0.0.0/g'")]),s._v(" /etc/redis.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/protected-mode yes/protected-mode no/g'")]),s._v(" /etc/redis.conf\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fcb84f12d0cf\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 37ac24f680d6\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("/9 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/redis-server"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/redis.conf"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ee5f16785493\nSuccessfully built ee5f16785493\nSuccessfully tagged pig-redis:v1.0\n")])])]),t("h4",{attrs:{id:"_3-容器化部署pig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-容器化部署pig"}},[s._v("#")]),s._v(" 3. 容器化部署Pig")]),s._v(" "),t("h5",{attrs:{id:"_1-编写dockerfile-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写dockerfile-3"}},[s._v("#")]),s._v(" （1）编写Dockerfile")]),s._v(" "),t("p",[s._v("编写启动脚本：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat pig-start.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" /root/pig-register.jar  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_OPTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" /root/pig-gateway.jar  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_OPTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" /root/pig-auth.jar  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_OPTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" /root/pig-upms-biz.jar  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_OPTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" 1h\n")])])]),t("p",[s._v("编写Dockerfile文件：")]),s._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("[root@k8s-worker-node1 Pig]# cat Dockerfile-pig\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos:centos7.9.2009")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Chinaskills")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" service /root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" yum /root/yum")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" rm -rfv /etc/yum.repos.d/*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" local.repo /etc/yum.repos.d/local.repo")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" pig-start.sh /root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" chmod +x /root/pig-start.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8848 9999 3000 4000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/pig-start.sh"')]),s._v("]")]),s._v("\n")])])]),t("h5",{attrs:{id:"_2-构建镜像-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-构建镜像-3"}},[s._v("#")]),s._v(" （2）构建镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -t pig-service:v1.0 -f Dockerfile-pig .")]),s._v("\nSending build context to Docker daemon  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("890")]),s._v(".9MB\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos:centos7.9.2009\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" eeb6ee3f44bd\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAINTAINER Chinaskills\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 815a4a5f2242\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" /root\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f0afce9f674f\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ADD yum /root/yum\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e7af4c1e3ee4\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rfv")]),s._v(" /etc/yum.repos.d/*\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 204b3a407438\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY local.repo /etc/yum.repos.d/local.repo\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 601071e881c5\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" java-1.8.0-openjdk java-1.8.0-openjdk-devel\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" d80f53c29912\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY pig-start.sh /root\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" cf9abaa6c27b\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /root/pig-start.sh\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 7d8c3c7a3eaf\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 172a68bf40ed\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/pig-start.sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" c890d15338b2\nSuccessfully built c890d15338b2\nSuccessfully tagged pig-service:v1.0\n")])])]),t("h4",{attrs:{id:"_4-容器化部署前端服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-容器化部署前端服务"}},[s._v("#")]),s._v(" 4. 容器化部署前端服务")]),s._v(" "),t("h5",{attrs:{id:"_1-编写dockerfile-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写dockerfile-4"}},[s._v("#")]),s._v(" （1）编写Dockerfile")]),s._v(" "),t("p",[s._v("编写Dockerfile：")]),s._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("[root@k8s-worker-node1 Pig]# cat Dockerfile-nginx\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos:centos7.9.2009")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Chinaskills")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" rm -rf /etc/yum.repos.d/*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" local.repo /etc/yum.repos.d/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" yum /root/yum")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum -y install nginx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" nginx/dist /data")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" nginx/pig-ui.conf /etc/nginx/conf.d/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /bin/bash -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo init ok'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),s._v("]")]),s._v("\n")])])]),t("h5",{attrs:{id:"_2-构建镜像-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-构建镜像-4"}},[s._v("#")]),s._v(" （2）构建镜像")]),s._v(" "),t("p",[s._v("构建镜像：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -t pig-ui:v1.0 -f Dockerfile-nginx .")]),s._v("\nSending build context to Docker daemon  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("890")]),s._v(".9MB\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos:centos7.9.2009\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" eeb6ee3f44bd\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAINTAINER Chinaskills\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 815a4a5f2242\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/yum.repos.d/*\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 6afa0315cb5b\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY local.repo /etc/yum.repos.d/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 4f07e082cc00\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY yum /root/yum\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 7042f9e7f455\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" b6ee699b51ed\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" COPY nginx/dist /data\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 04b6d05ba642\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ADD nginx/pig-ui.conf /etc/nginx/conf.d/\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 661b56e2cff6\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN /bin/bash "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo init ok'")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 0d98b6d8a81c\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" b1f5ecafc494\nStep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("/11 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using cache\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" c20fc29b9daa\nSuccessfully built c20fc29b9daa\nSuccessfully tagged pig-ui:v1.0\n")])])]),t("h4",{attrs:{id:"_5-编排部署pig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-编排部署pig"}},[s._v("#")]),s._v(" 5. 编排部署pig")]),s._v(" "),t("h5",{attrs:{id:"_1-编写docker-compose-yaml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写docker-compose-yaml"}},[s._v("#")]),s._v(" （1）编写docker-compose.yaml")]),s._v(" "),t("p",[s._v("编写docker-compose.yaml编排文件：")]),s._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pig-mysql")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.0\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 3306"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("register\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pig-redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.0\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 6379"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("redis\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("redis\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("register\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pig-service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 8848"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 9999"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.0\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("extra_hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("register"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("127.0.0.1\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("upms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("127.0.0.1\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gateway"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("127.0.0.1\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("127.0.0.1\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hou"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("127.0.0.1\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stdin_open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("privileged")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pig-ui")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ui\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ui"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.0\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 8888"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("links")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gateway\n")])])]),t("h5",{attrs:{id:"_2-部署服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署服务"}},[s._v("#")]),s._v(" （2）部署服务")]),s._v(" "),t("p",[s._v("部署服务：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose up -d")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Running "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("/5\n⠿ Network pig_default Created                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".1s\n⠿ Container pig-service Started                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".7s\n⠿ Container pig-mysql   Started                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".5s\n⠿ Container pig-redis   Started                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".7s\n⠿ Container pig-ui     Started                                       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8s\n")])])]),t("p",[s._v("查看服务：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-worker-node1 Pig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose ps")]),s._v("\nNAME               COMMAND                 SERVICE             STATUS             PORTS\npig-mysql           "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysqld_safe --user=…"')]),s._v("   pig-mysql           running             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3306-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, :::3306-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp\npig-redis           "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/redis-serv…"')]),s._v("   pig-redis           running             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:6379-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp, :::6379-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp\npig-service         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash /root/pig…"')]),s._v("   pig-service         running             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8848-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:9999-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("/tcp, :::8848-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("/tcp, :::9999-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("/tcp\npig-ui              "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx -g \'daemon of…"')]),s._v("   pig-ui             running             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8888-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp, :::8888-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp\n")])])]),t("p",[s._v("等待3分钟左右，在浏览器上通过"),t("a",{attrs:{href:"http://ip:8888/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://IP:8888"),t("OutboundLink")],1),s._v("访问Pig，如图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/cn-zhangyh/image/main/img/202205080948901.png",alt:"image-20220508094807742"}})]),s._v(" "),t("p",[s._v("图1")]),s._v(" "),t("p",[s._v("账号和密码默认，输入验证码，点击登录。如图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/cn-zhangyh/image/main/img/202205080948635.png",alt:"image-20220508094823232"}})]),s._v(" "),t("p",[s._v("图2")])])}),[],!1,null,null,null);t.default=e.exports}}]);