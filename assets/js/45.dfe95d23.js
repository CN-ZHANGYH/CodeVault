(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{358:function(t,a,s){"use strict";s.r(a);var n=s(7),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ansible-企业zabbix实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ansible-企业zabbix实战"}},[t._v("#")]),t._v(" Ansible 企业zabbix实战")]),t._v(" "),a("h4",{attrs:{id:"掌握要点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#掌握要点"}},[t._v("#")]),t._v(" 掌握要点")]),t._v(" "),a("blockquote",[a("p",[t._v("（1）熟悉ansible的playbook的用法以及role的用法。")]),t._v(" "),a("p",[t._v("（2）熟悉如何使用ansible部署zabbix监控系统。")])]),t._v(" "),a("h4",{attrs:{id:"_1-节点规划"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-节点规划"}},[t._v("#")]),t._v(" 1.节点规划")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("IP地址")]),t._v(" "),a("th",[t._v("主机名称")]),t._v(" "),a("th",[t._v("节点名称")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("192.168.1.4")]),t._v(" "),a("td",[t._v("ansible")]),t._v(" "),a("td",[t._v("Ansible")])]),t._v(" "),a("tr",[a("td",[t._v("192.168.1.11")]),t._v(" "),a("td",[t._v("zabbix")]),t._v(" "),a("td",[t._v("Zabbix")])])])]),t._v(" "),a("h4",{attrs:{id:"_2-查看当前的目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看当前的目录"}},[t._v("#")]),t._v(" 2.查看当前的目录")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\ngroup_vars  install_gpmall_cluster.yaml  roles\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tree roles/zabbix/")]),t._v("\nroles/zabbix/\n├── files\n│   ├── yum.repo\n│   └── zabbix.tar.gz\n├── handlers\n├── meta\n├── tasks\n│   └── main.yaml\n├── templates\n│   └── zabbix_server.conf.j2\n└── vars\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" directories, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" files\n")])])]),a("h4",{attrs:{id:"_3-编写zabbix角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-编写zabbix角色"}},[t._v("#")]),t._v(" 3.编写zabbix角色")]),t._v(" "),a("p",[t._v("⚫该角色的作用是在 Zabbix 节点上安装 "),a("strong",[t._v("Zabbix")]),t._v(" 监控服务。首先要配置基础环 境，安装 "),a("strong",[t._v("LAMP")]),t._v(" 环境，最后部署 Zabbix 监控系统。")]),t._v(" "),a("p",[t._v("⚫在 "),a("strong",[t._v("roles/zabbix/tasks")]),t._v(" 目录下，创建 "),a("strong",[t._v("main.yaml")]),t._v(" 文件。")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat roles/zabbix/tasks/main.yaml  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selinux config \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('i "s/^SELINUX=.'),a("span",{pre:!0,attrs:{class:"token important"}},[t._v('*/SELINUX=disabled/g"')]),t._v(" /etc/selinux/config \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" systemctl stop firewalld  \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" config yum\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mv /etc/yum.repos.d/* /media\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" copy repo \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yum.repo \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /etc/yum.repos.d/yum.repo \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tar gz \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("unarchive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zabbix.tar.gz \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /opt\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" install packages \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" httpd \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mariadb  \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" present \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" servce start \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("systemd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" restarted \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" httpd \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mariadb \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" config mariadb user \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysqladmin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("uroot  password "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DB_PASS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ignore_errors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb create zabbix \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ignore_errors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("uroot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DB_PASS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('e "create database zabbix character set utf8 collate utf8_bin;" \n    '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("uroot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DB_PASS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("e \"grant all privileges on zabbix.* to zabbix@'%' identified by 'zabbix';\"\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("uroot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DB_PASS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("e \"grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';\"\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" install zabbix \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mysql \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mysql \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("agent \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" trousers \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" present \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sql config mariadb \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chdir=/usr/share/doc/zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("3.4.15/ zcat create.sql.gz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("uroot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DB_PASS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" zabbix \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ignore_errors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" php time\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('i "s/^;date.timezone.'),a("span",{pre:!0,attrs:{class:"token important"}},[t._v('*/;date.timezone=RPC/g"')]),t._v(" /etc/php.ini \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('i "s/'),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#\\ php_value/php_value/g" /etc/httpd/conf.d/zabbix.conf ')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('i "s/date.timezone.'),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("*/date.timezone")]),t._v(' Asia\\/Shanghai/g" /etc/httpd/conf.d/zabbix.conf \n\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" config zabbix \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zabbix_server.conf.j2 \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /etc/zabbix/zabbix_server.conf \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" restart httpd and zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("systemd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{item}}"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" restarted \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with_items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" httpd \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server \n")])])]),a("h4",{attrs:{id:"_4-添加变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加变量"}},[t._v("#")]),t._v(" 4.添加变量")]),t._v(" "),a("p",[t._v("⚫在roles的相同目录下面创建一个目录叫做**group_vars,**创建文件all，将所有变量写入。")]),t._v(" "),a("p",[t._v("⚫添加变量在all中。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat group_vars/all ")]),t._v("\n···\nDB_PASS: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v(" \nDB_HOST: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1\n")])])]),a("h4",{attrs:{id:"_5-编写role角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-编写role角色"}},[t._v("#")]),t._v(" 5.编写role角色")]),t._v(" "),a("p",[t._v("⚫通过执行zabbix角色来快速部署zabbix。")]),t._v(" "),a("p",[t._v("⚫编写"),a("strong",[t._v("zabbix的role")]),t._v("角色作为整个控制"),a("strong",[t._v("playbook")]),t._v("的主要领导。")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat install_gpmall_cluster.yaml  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zabbix \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("remote_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root \n \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" zabbix \n")])])]),a("h4",{attrs:{id:"_6-执行palybook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-执行palybook"}},[t._v("#")]),t._v(" 6.执行palybook")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ansible gpmall_ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ansible-playbook install_gpmall_cluster.yaml  ")]),t._v("\n\nPLAY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ****************************************************************************************************************************************************************************************************\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Gathering Facts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *******************************************************************************************************************************************************************************************\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" config yum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ***************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" copy repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ****************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" gz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *******************************************************************************************************************************************************************************************\n  anged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n▽\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *********************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" servce start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("httpd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" config mariadb user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ******************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mariadb create zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-uroot")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p123456")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"create database zabbix character set utf8 collate utf8_bin;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-uroot")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p123456")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"grant all privileges on zabbix.* to zabbix@'%' identified by 'zabbix';\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-uroot")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p123456")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("install zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ********************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" sql config mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *******************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zabbix "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" php time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *****************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sed "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s/^;date.timezone.*/;date.timezone=RPC/g"')]),t._v(" /etc/php.ini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sed "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s/#\\php_value/php_value/g"')]),t._v(" /etc/httpd/conf.d/zabbix.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sed "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s/date.timezone.*/date.timezone Asia\\/Shanghai/g"')]),t._v(" /etc/httpd/conf.d/zabbix.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("WARNING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Consider using the replace, lineinfile or template module rather than running "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sed'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("  If you need to use "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" because replace, lineinfile or template is insufficient you can "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn: false'")]),t._v(" to\nthis "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" task or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'command_warnings=False'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ansible.cfg to get rid of this message.\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("config zabbix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" *********************************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("restart httpd and zabbix-server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ***************************************************************************************************************************************************************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("httpd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zabbix-server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nPLAY RECAP *******************************************************************************************************************************************************************************************************\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.11               "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("changed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("unreachable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("failed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("skipped")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rescued")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ignored")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("   \n\n")])])]),a("p",[t._v("最后访问http://IP/zabbix")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/cn-zhangyh/image/main/img/202204111158561.png",alt:"image-20220221210759712"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);