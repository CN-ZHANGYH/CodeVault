(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{346:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"kubevirtéƒ¨ç½²å’Œä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubevirtéƒ¨ç½²å’Œä½¿ç”¨"}},[t._v("#")]),t._v(" KubeVirtéƒ¨ç½²å’Œä½¿ç”¨")]),t._v(" "),s("h3",{attrs:{id:"å®‰è£…-kubevirt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-kubevirt"}},[t._v("#")]),t._v(" å®‰è£… Kubevirt")]),t._v(" "),s("h4",{attrs:{id:"ğŸ”å‡†å¤‡k8sé›†ç¾¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”å‡†å¤‡k8sé›†ç¾¤"}},[t._v("#")]),t._v(" ğŸ”å‡†å¤‡K8Sé›†ç¾¤")]),t._v(" "),s("p",[t._v("æŸ¥çœ‹å½“å‰çš„K8Sé›†ç¾¤ç¯å¢ƒï¼Œç¡®ä¿ä¸¤ä¸ªèŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„æ€§èƒ½æ”¯æ’‘ã€‚å½“å‰è¿™é‡Œä½¿ç”¨çš„æ˜¯1.21.1ç‰ˆæœ¬çš„é›†ç¾¤ã€‚")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl cluster-info ")]),t._v("\nKubernetes control plane is running at https://apiserver.cluster.local:6443\nCoreDNS is running at https://apiserver.cluster.local:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl cluster-info dump'")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl get node ")]),t._v("\nNAME               STATUS   ROLES                         AGE    VERSION\nk8s-master-node1   Ready    control-plane,master,worker   2d1h   v1.21.1\nk8s-worker-node1   Ready    worker                        2d1h   v1.21.1\n")])])]),s("h4",{attrs:{id:"ğŸ”å¼€å¯è™šæ‹ŸåŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”å¼€å¯è™šæ‹ŸåŒ–"}},[t._v("#")]),t._v(" ğŸ”å¼€å¯è™šæ‹ŸåŒ–")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨å®‰è£… Kubevirt ä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œã€‚å…ˆå®‰è£… libvrt å’Œ qemu è½¯ä»¶åŒ…")]),t._v(" "),s("li",[t._v("æŸ¥çœ‹èŠ‚ç‚¹æ˜¯å¦æ”¯æŒ kvm ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–")]),t._v(" "),s("li",[t._v("å¦‚æœä¸æ”¯æŒï¼Œåˆ™å…ˆç”Ÿæˆè®© Kubevirt ä½¿ç”¨è½¯ä»¶è™šæ‹ŸåŒ–çš„é…ç½®")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ubuntu")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" qemu-kvm libvirt-bin bridge-utils virt-manager\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CentOS")]),t._v("\n$ yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" qemu-kvm libvirt virt-install bridge-utils\n\n$ virt-host-validate qemu\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" hardware virtualization                                 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" device /dev/kvm exists                                   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" device /dev/kvm is accessible                            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" device /dev/vhost-net exists                             "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" device /dev/net/tun exists                               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'memory'")]),t._v(" controller support                      "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'memory'")]),t._v(" controller mount-point                  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpu'")]),t._v(" controller support                         "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpu'")]),t._v(" controller mount-point                     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpuacct'")]),t._v(" controller support                     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpuacct'")]),t._v(" controller mount-point                 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpuset'")]),t._v(" controller support                      "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cpuset'")]),t._v(" controller mount-point                  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'devices'")]),t._v(" controller support                     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'devices'")]),t._v(" controller mount-point                 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blkio'")]),t._v(" controller support                       "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cgroup "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blkio'")]),t._v(" controller mount-point                   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" device assignment IOMMU support                         "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n  QEMU: Checking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" IOMMU is enabled by kernel                               "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" PASS\n")])])]),s("p",[t._v("ä¸æ”¯æŒéœ€è¦å¼€å¯Kubevirtçš„è™šæ‹ŸåŒ–é…ç½®ï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ kubectl create namespace kubevirt\n$ kubectl create configmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" kubevirt kubevirt-config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --from-literal "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("debug.useEmulation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),s("h4",{attrs:{id:"ğŸ”éƒ¨ç½²kubevirt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”éƒ¨ç½²kubevirt"}},[t._v("#")]),t._v(" ğŸ”éƒ¨ç½²kubevirt")]),t._v(" "),s("p",[t._v("éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬çš„ Kubevirtï¼Œå®˜æ–¹æœ‰æä¾›å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ çš„k8sé›†ç¾¤ç‰ˆæœ¬è¾ƒä½ï¼Œå¯ä»¥åˆ‡æ¢ç›¸å¯¹åº”çš„ç‰ˆæœ¬ã€‚")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://api.github.com/repos/kubevirt/kubevirt/releases "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" tag_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" -- "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-rc'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("': '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $2}'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/,//'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n$ kubectl apply "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" https://github.com/kubevirt/kubevirt/releases/download/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${VERSION}")]),t._v("/kubevirt-operator.yaml\n$ kubectl apply "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" https://github.com/kubevirt/kubevirt/releases/download/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${VERSION}")]),t._v("/kubevirt-cr.yaml\n")])])]),s("p",[t._v("æŸ¥çœ‹éƒ¨ç½²ç»“æœï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ kubectl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" kubevirt get pod\nNAME                               READY   STATUS    RESTARTS   AGE\nvirt-api-64999f7bf5-n9kcl          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d\nvirt-api-64999f7bf5-st5qv          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d8h\nvirt-controller-8696ccdf44-v5wnq   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d\nvirt-controller-8696ccdf44-vjvsw   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d8h\nvirt-handler-85rdn                 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("          7d19h\nvirt-handler-bpgzp                 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("         7d19h\nvirt-handler-d55c7                 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("          7d19h\nvirt-operator-78fbcdfdf4-sf5dv     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d8h\nvirt-operator-78fbcdfdf4-zf9qr     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          6d\n")])])]),s("h4",{attrs:{id:"ğŸ”éƒ¨ç½²-cdi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”éƒ¨ç½²-cdi"}},[t._v("#")]),t._v(" ğŸ”éƒ¨ç½² CDI")]),t._v(" "),s("p",[s("code",[t._v("Containerized Data Importerï¼ˆCDIï¼‰")]),t._v("é¡¹ç›®æä¾›äº†ç”¨äºä½¿ PVC ä½œä¸º KubeVirt VM ç£ç›˜çš„åŠŸèƒ½ã€‚å»ºè®®åŒæ—¶éƒ¨ç½² CDIï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://github.com/kubevirt/containerized-data-importer/releases/latest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v[0-9]\\.[0-9]*\\.[0-9]*"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n$ kubectl create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" https://github.com/kubevirt/containerized-data-importer/releases/download/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VERSION")]),t._v("/cdi-operator.yaml\n$ kubectl create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" https://github.com/kubevirt/containerized-data-importer/releases/download/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VERSION")]),t._v("/cdi-cr.yaml\n\n$ kubectl get pods "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" cdi \nNAME                               READY   STATUS    RESTARTS   AGE\ncdi-apiserver-6dfc78cdfb-qj2jm     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          32h\ncdi-deployment-6bf458c4bb-9c2hn    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          32h\ncdi-operator-74d4968557-f5q49      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          35h\ncdi-uploadproxy-5767c4bf64-b879k   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          32h\n")])])]),s("h4",{attrs:{id:"ğŸ”å®¢æˆ·ç«¯å‡†å¤‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”å®¢æˆ·ç«¯å‡†å¤‡"}},[t._v("#")]),t._v(" ğŸ”å®¢æˆ·ç«¯å‡†å¤‡")]),t._v(" "),s("p",[t._v("Kubevirt æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· "),s("code",[t._v("virtctl")]),t._v("ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ï¼š")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" https://api.github.com/repos/kubevirt/kubevirt/releases "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" tag_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" -- "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-rc'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("': '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $2}'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/,//'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" /usr/local/bin/virtctl https://github.com/kubevirt/kubevirt/releases/download/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VERSION")]),t._v("/virtctl-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VERSION")]),t._v("-linux-amd64\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/virtctl\n")])])]),s("h3",{attrs:{id:"ä½¿ç”¨kubevirtåˆ›å»ºè™šæ‹Ÿæœº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨kubevirtåˆ›å»ºè™šæ‹Ÿæœº"}},[t._v("#")]),t._v(" ä½¿ç”¨KubeVirtåˆ›å»ºè™šæ‹Ÿæœº")]),t._v(" "),s("h4",{attrs:{id:"ğŸ”å‡†å¤‡é•œåƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”å‡†å¤‡é•œåƒ"}},[t._v("#")]),t._v(" ğŸ”å‡†å¤‡é•œåƒ")]),t._v(" "),s("p",[t._v("è¿™é‡Œä½¿ç”¨çš„æ˜¯containerDiskçš„æ¨¡å¼åˆ›å»ºè™šæ‹Ÿæœºï¼Œç”¨qcow2çš„é•œåƒæ„å»ºã€‚æ–°å»ºä¸€ä¸ªå·¥ä½œç›®å½•å«"),s("code",[t._v("kubevirt")]),t._v(" ç›®å‰KubeVirtæ”¯æŒçš„é•œåƒæ ¼å¼æœ‰ä»¥ä¸‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v(".img")])]),t._v(" "),s("li",[s("p",[t._v(".qcow2")])]),t._v(" "),s("li",[s("p",[t._v(".iso")])]),t._v(" "),s("li",[s("p",[t._v("å‹ç¼©ä¸º .tarï¼Œ.gzï¼Œ.xz æ ¼å¼çš„ä¸Šè¿°é•œåƒ")])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir kubevirt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd kubevirt/ ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("567012")]),t._v("\n-rw-r--r--. "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("510459904")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v(" CentOS_7.5_x86_64_XD.qcow2\n-rw-r--r--. "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v(" Mar "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":24 Dockerfile\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat Dockerfile  ")]),t._v("\nFROM kubevirt/container-disk-v1alpha\nCOPY CentOS_7.5_x86_64_XD.qcow2 /disk/centos.img \n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker build -t centos-disk:v1 . ")]),t._v("\nSending build context to Docker daemon  556MB\nStep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" FROM kubevirt/container-disk-v1alpha\n ---"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" e4fa80ad2d49\nStep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" COPY CentOS_7.5_x86_64_XD.qcow2 /disk/centos.img\n ---"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" aa0a0ad6d5f6\nSuccessfully built aa0a0ad6d5f6\nSuccessfully tagged centos-disk:v1\n")])])]),s("h4",{attrs:{id:"ğŸ”ç¼–å†™virtualmachineèµ„æº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”ç¼–å†™virtualmachineèµ„æº"}},[t._v("#")]),t._v(" ğŸ”ç¼–å†™VirtualMachineèµ„æº")]),t._v(" "),s("p",[t._v("é€šè¿‡vmèµ„æºåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œåˆ†åˆ«ä½¿ç”¨çš„å‚æ•°åœ¨åéƒ¨åˆ†è¯¦è§£ï¼š")]),t._v(" "),s("p",[t._v("è¿™é‡Œä¸€å…±åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯"),s("code",[t._v("èµ„æºç±»å‹ã€èµ„æºæ¨¡æ¿ã€ç£ç›˜ç±»å‹ã€‚")]),t._v(" æ‰€ä»¥éœ€è¦é€šè¿‡è¿™ä¸‰ä¸ªéƒ¨åˆ†æ¥å¯¹kubevirtåˆ›å»ºè™šæ‹Ÿæœºæ‰€è¦æ±‚çš„èµ„æºæ ¹æ®éœ€æ±‚ä¿®æ”¹ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨æ„ï¼š")]),t._v(" "),s("p",[t._v("åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯æœ¬åœ°å­˜å‚¨åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™ï¼Œéœ€è¦åˆ’åˆ†ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œå¯¹äºèŠ‚ç‚¹çš„è°ƒåº¦ï¼Œå¯ä»¥æ‰“ä¸Šæ ‡ç­¾ã€‚")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat vm2.yaml  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubevirt.io/v1 \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VirtualMachine \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("running")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubevirt.io/size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" small \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubevirt.io/domain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("devices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" containerdisk \n              "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" virtio  \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("interfaces")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("masquerade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("requests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1024M\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" containerdisk \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containerDisk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n")])])]),s("h4",{attrs:{id:"ğŸ”virtualmachineèµ„æºè¯¦è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”virtualmachineèµ„æºè¯¦è§£"}},[t._v("#")]),t._v(" ğŸ”VirtualMachineèµ„æºè¯¦è§£")]),t._v(" "),s("p",[t._v("virtualmachineçš„èµ„æºç±»å‹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Kindæ˜¯ï¼š  "),s("code",[t._v("VirtualMachine")])]),t._v(" "),s("li",[t._v("apiçš„ç‰ˆæœ¬æ˜¯ï¼š "),s("code",[t._v("kubevirt.io/v1")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kubevirt.io/v1 \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VirtualMachine \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos \n")])])]),s("p",[t._v("è§„èŒƒï¼š")]),t._v(" "),s("p",[t._v("VirtualMachineInstanceè§„èŒƒåŒ…å«VirtualMachineInstanceè§„èŒƒã€‚")]),t._v(" "),s("ul",[s("li",[t._v("è¿™é‡Œçš„runningæ˜¯è¡¨ç¤ºï¼š "),s("code",[t._v("æ˜¯å¦åˆ›å»ºå…³è”VMå’ŒVMIçš„èµ„æº")])]),t._v(" "),s("li",[t._v("templateè¡¨ç¤ºï¼š "),s("code",[t._v("æ˜¯VirtualMachine Instanceçš„ç›´æ¥è§„èŒƒ")])]),t._v(" "),s("li",[t._v("labelsï¼š "),s("code",[t._v("æ‰“ä¸Šä¸¤ä¸ªæ ‡ç­¾")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("running")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubevirt.io/size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" small \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kubevirt.io/domain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos \n")])])]),s("p",[t._v("æ¨¡æ¿é‡Œçš„è§„èŒƒé…ç½®ä¸»æœºå‚æ•°ï¼š")]),t._v(" "),s("p",[t._v("åœ¨æ¨¡æ¿è§„èŒƒä¸­ï¼Œé…ç½®å½“å‰ä¸»æœºçš„ä¸€äº›ä¸»è¦ç›¸å…³è”çš„è®¾å¤‡ä»¥åŠèµ„æºï¼Œé…ç½®è§„èŒƒè¯¦è§£å¦‚ä¸‹ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("cpuï¼š")]),t._v(" "),s("code",[t._v("ä¸»è¦æ˜¯è®¾ç½®cpuçš„æ ¸å¿ƒæ•°ä¸º1ä¸ª")])]),t._v(" "),s("li",[s("strong",[t._v("devices:")]),t._v(" "),s("code",[t._v("è®¾å¤‡å…è®¸æ·»åŠ ç£ç›˜ã€ç½‘ç»œæ¥å£ç­‰")])]),t._v(" "),s("li",[s("strong",[t._v("disks:")]),t._v(" "),s("code",[t._v("åœ¨devicesçš„è§„èŒƒä¸‹æ·»åŠ vmiè¿æ¥åˆ°çš„ç£ç›˜ã€CD-ROMã€è½¯ç›˜å’ŒLUN")]),t._v("  æ€»çº¿æŒ‡ç¤ºè¦æ¨¡æ‹Ÿçš„ç£ç›˜è®¾å¤‡çš„ç±»å‹ã€‚æ”¯æŒçš„å€¼ï¼š"),s("code",[t._v("virtioï¼Œsataã€scsi")])]),t._v(" "),s("li",[s("strong",[t._v("interfaces:")]),t._v(" "),s("code",[t._v("æ¥å£æè¿°æ·»åŠ åˆ°vmiçš„ç½‘ç»œæ¥å£")])]),t._v(" "),s("li",[s("strong",[t._v("machine:")]),t._v(" "),s("code",[t._v("æœºå™¨ç±»å‹")])]),t._v(" "),s("li",[s("strong",[t._v("resources:")]),t._v(" "),s("code",[t._v("è®¾ç½®èµ„æºå’Œè¯·æ±‚èµ„æº")])]),t._v(" "),s("li",[s("strong",[t._v("hostname:")]),t._v(" "),s("code",[t._v("è®¾ç½®ä¸»æœºåç§°")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("domain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cores")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("devices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bootOrder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n              "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" virtio\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cloudinitdisk \n              "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" virtio\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" containerdisk \n              "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" virtio  \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("interfaces")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("masquerade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("machine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" q35\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("limits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 4Gi\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("requests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1333m\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 4Gi \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wtest \n")])])]),s("p",[t._v("æ¨¡æ¿é‡Œçš„è§„èŒƒé…ç½®ä¸»æœºå¤–éƒ¨å‚æ•°ç½‘ç»œéƒ¨åˆ†ï¼š")]),t._v(" "),s("p",[t._v("åœ¨é…ç½®å®Œæ¨¡æ¿çš„ä¸»æœºè§„èŒƒä¹‹åï¼Œé…ç½®å¤–éƒ¨çš„ç½‘ç»œå‚æ•°ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("networks:")]),t._v(" "),s("code",[t._v("é…ç½®å¤–éƒ¨çš„ç½‘ç»œå‚æ•°")])]),t._v(" "),s("li",[s("strong",[t._v("podï¼š")]),t._v(" "),s("code",[t._v("é…ç½®ç½‘ç»œæ¥å£CIDR")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default \n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("p",[t._v("æ¨¡æ¿é‡Œçš„è§„èŒƒé…ç½®ä¸»æœºå¤–éƒ¨å‚æ•°ç£ç›˜ï¼š")]),t._v(" "),s("p",[t._v("è¿™é‡Œä¸»è¦é…ç½®çš„æ˜¯è™šæ‹Ÿæœºçš„ç£ç›˜æ¥æºï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯containerDiskçš„æ–¹å¼")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("cloudInitNoCloud:")]),t._v(" "),s("code",[t._v("é…ç½®cloudinitçš„ä¸€äº›å‚æ•°")])]),t._v(" "),s("li",[s("strong",[t._v("containerDisk:")]),t._v(" "),s("code",[t._v("ContainerDiskå¼•ç”¨dockeræ˜ åƒï¼ŒåµŒå…¥qcowæˆ–åŸå§‹ç£ç›˜")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloudInitNoCloud")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networkDataBase64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("userDataBase64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cloudinitdisk \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" containerdisk \n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containerDisk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" centos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("disk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n")])])]),s("h4",{attrs:{id:"ğŸ”åˆ›å»ºè™šæ‹Ÿæœº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”åˆ›å»ºè™šæ‹Ÿæœº"}},[t._v("#")]),t._v(" ğŸ”åˆ›å»ºè™šæ‹Ÿæœº")]),t._v(" "),s("p",[t._v("ä½¿ç”¨applyæ‰§è¡Œyamlæ–‡ä»¶ï¼Œå¹¶ä¸”æŸ¥çœ‹vmå’Œvmiçš„èµ„æº,é€šè¿‡virtctlçš„å‘½ä»¤å¼€å¯è™šæ‹Ÿæœºï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šï¼Œå½“é•œåƒå®Œå…¨åŠ è½½å®Œæˆä¹‹åå†ä½¿ç”¨consoleè¿æ¥ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨æ„ï¼š")]),t._v(" "),s("p",[t._v("ä½¿ç”¨vmèµ„æºåˆ›å»ºä¹‹åçš„è™šæ‹Ÿæœºï¼Œé»˜è®¤çŠ¶æ€æ˜¯å±äºstopï¼Œéœ€è¦å¼€å¯ä¹‹åå†æ¬¡æŸ¥çœ‹vmiå’Œpodçš„èµ„æºæ˜¯å¦åŒæ­¥ã€‚")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl apply -f vm1.yaml  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# virtctl start  centos ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl get vm,vmi,pod  ")]),t._v("\nNAME                                AGE     STATUS    READY\nvirtualmachine.kubevirt.io/centos   7h52m   Running   True\n\nNAME                                        AGE     PHASE     IP            NODENAME           READY\nvirtualmachineinstance.kubevirt.io/centos   7h51m   Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.244")]),t._v(".0.12   k8s-master-node1   True\n\nNAME                             READY   STATUS    RESTARTS   AGE\npod/virt-launcher-centos-tjfs4   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          7h51m\n")])])]),s("h4",{attrs:{id:"ğŸ”è¿æ¥è™šæ‹Ÿæœº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”è¿æ¥è™šæ‹Ÿæœº"}},[t._v("#")]),t._v(" ğŸ”è¿æ¥è™šæ‹Ÿæœº")]),t._v(" "),s("p",[t._v("virtctl å‘½ä»¤å¯ä»¥ç®¡ç†è™šæ‹Ÿæœºçš„ç”Ÿå‘½å‘¨æœŸï¼š "),s("code",[t._v("å¼€å¯ã€é‡å¯ã€åˆ é™¤ç­‰ã€‚")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s-master-node1 kubevirt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# virtctl console centos ")]),t._v("\nSuccessfully connected to centos console. The escape sequence is ^"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nCentOS Linux "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nKernel "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),t._v(".0-862.2.3.el7.x86_64 on an x86_64\n\ncentos login: root\nPassword: \nLast login: Tue Mar "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v(" 08:35:38 on ttyS0\n\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#########################")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  Welcome to XianDian  #")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#########################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@centos ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);