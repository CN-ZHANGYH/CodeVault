(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{456:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"kubernetes的基础操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes的基础操作"}},[s._v("#")]),s._v(" Kubernetes的基础操作")]),s._v(" "),t("h2",{attrs:{id:"kubernetes的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes的版本"}},[s._v("#")]),s._v(" Kubernetes的版本")]),s._v(" "),t("p",[s._v("versi命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl version ")]),s._v("\nClient Version: version.Info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Major:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(", Minor:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"18"')]),s._v(", GitVersion:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1.18.1"')]),s._v(", GitCommit:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7879fc12a63337efff607952a323df90cdc7a335"')]),s._v(", GitTreeState:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),s._v(", BuildDate:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-04-08T17:38:50Z"')]),s._v(", GoVersion:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"go1.13.9"')]),s._v(", Compiler:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gc"')]),s._v(", Platform:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux/amd64"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("Server Version: version.Info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Major:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(", Minor:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"18"')]),s._v(", GitVersion:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1.18.1"')]),s._v(", GitCommit:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7879fc12a63337efff607952a323df90cdc7a335"')]),s._v(", GitTreeState:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),s._v(", BuildDate:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-04-08T17:30:47Z"')]),s._v(", GoVersion:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"go1.13.9"')]),s._v(", Compiler:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gc"')]),s._v(", Platform:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux/amd64"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"kubeadm-reset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm-reset"}},[s._v("#")]),s._v(" Kubeadm reset")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeadm reset 清空实验环境")]),s._v("\n")])])]),t("h2",{attrs:{id:"kubeadm-init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm-init"}},[s._v("#")]),s._v(" Kubeadm init")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("kubeadm init做了哪些工作？")])])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeadm init 部署实验环境")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 环境检查和拉取镜像（kubeadm config images pull）\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("certs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 创建证书目录/etc/kubernetes/pki，生成证书\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kubeconfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 创建连接apiserver的配置文件目录/etc/kubernetes\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kubelet-start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 生成kubelet配置文件和启动\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("control-plane"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 使用静态pod启动master组件 /etc/kubernetes/manifests\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("upload-config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("upload-certs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kubelet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 使用 ConfigMap 存储kubelet配置\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mark-control-plane"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 给master节点添加标签\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bootstrap-token"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" kubelet自动申请证书机制\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("addons"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 安装插件CoreDNS和kube-proxy\n")])])]),t("h2",{attrs:{id:"为什么部署cni网络组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么部署cni网络组件"}},[s._v("#")]),s._v(" 为什么部署CNI网络组件？")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Q1：　两边的容器ip是一样的")])]),s._v(" "),t("li",[t("strong",[s._v("Q2：　容器1访问容器2，容器1怎么知道容器2在哪个docker主机？")])]),s._v(" "),t("li",[t("strong",[s._v("Q3：　容器１访问容器２数据包是怎么传输过去的？")])])]),s._v(" "),t("p",[t("strong",[s._v("验证结果")])]),s._v(" "),t("p",[s._v("使用docker run运行一个nginx，并且查看容器的IP地址")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name nginx nginx:latest ")]),s._v("\na1a0846b2fbc01ac7a6dc5a67b0c37545386d8689f38bdb6e9251048f22ca200\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect nginx ")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Aliases"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkID"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4f998a89be2f45e879a9d33ab040bb0f71725a0a16b865225156fd3b101bb68f"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6a24ce452aa44fa4fbd3111902829aeaa1b56fcf0086aff32855e6a00a0cdec9"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.1"')]),s._v(",  \n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ip地址")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:02"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DriverOpts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("blockquote",[t("p",[t("strong",[s._v("访问容器内的地址")])])]),s._v(" "),t("p",[t("strong",[s._v("master和node节点都能访问")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping 172.17.0.1")]),s._v("\nPING "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.089")]),s._v(" ms\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping 172.17.0.1")]),s._v("\nPING "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.371")]),s._v(" ms\n")])])]),t("h2",{attrs:{id:"k8s的-cni网络模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s的-cni网络模型"}},[s._v("#")]),s._v(" K8s的 CNI网络模型")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("K8s是一个扁平化网络")])])]),s._v(" "),t("p",[t("strong",[s._v("即所有部署的网络组件都必须满足如下要求：")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("一个Pod一个IP")])]),s._v(" "),t("li",[t("strong",[s._v("所有的Pod可以与任何其他Pod直接通信")])]),s._v(" "),t("li",[t("strong",[s._v("所有节点可以与所有Pod直接通信")])]),s._v(" "),t("li",[t("strong",[s._v("Pod内部获取到的IP地址与其他Pod或节点与其他通信的IP地址是同一个")])]),s._v(" "),t("li",[t("strong",[s._v("主流的网络组件有： Flannel Calico等")])])]),s._v(" "),t("h2",{attrs:{id:"结论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结论"}},[s._v("#")]),s._v(" 结论")]),s._v(" "),t("p",[t("strong",[s._v("在相同的网络中没有指定docker的网络的情况下，可以通过访问容器的ip地址 可以查看到是在哪个docker的主机上面。")])]),s._v(" "),t("p",[t("strong",[s._v("容器1访问容器2的数据包的时候 可以做路由互相访问")])]),s._v(" "),t("h2",{attrs:{id:"kubeconfig的配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubeconfig的配置文件"}},[s._v("#")]),s._v(" kubeconfig的配置文件")]),s._v(" "),t("blockquote",[t("h4",{attrs:{id:"kubectl的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubectl的使用"}},[s._v("#")]),s._v(" kubectl的使用")])]),s._v(" "),t("p",[t("strong",[s._v("在master节点上面可以使用kubectl命令")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get nodes ")]),s._v("\nNAME     STATUS   ROLES    AGE    VERSION\nmaster   Ready    master   130m   v1.18.1\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("     Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   94m    v1.18.1\n")])])]),t("p",[t("strong",[s._v("但是在node节点上面会报错 显示没有port或者直接error")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get node ")]),s._v("\nerror: no configuration has been provided, try setting KUBERNETES_MASTER environment variable\n")])])]),t("p",[t("strong",[s._v("只需要将master节点的/root/.kube/config 拷贝到node节点")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp /root/.kube/config root@node:~")]),s._v("\nconfig                                                          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5454")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".0MB/s   00:00\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir .kube")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv config  .kube/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get nodes")]),s._v("\n' NAME     STATUS   ROLES    AGE    VERSION\nmaster   Ready    master   129m   v1.18.1\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("     Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   93m    v1.18.1\n")])])]),t("blockquote",[t("h4",{attrs:{id:"使用-kubeconfig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-kubeconfig"}},[s._v("#")]),s._v(" 使用--kubeconfig")])]),s._v(" "),t("p",[t("strong",[s._v("在node节点上面使用kubectl命令的时候可以指定kubeconfig的路径")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  mv /root/.kube/config  /tmp/ ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get nodes ")]),s._v("\n'error: no configuration has been provided, try setting KUBERNETES_MASTER environment variable\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl --kubeconfig=/tmp/config get node")]),s._v("\nNAME     STATUS   ROLES    AGE    VERSION\nmaster   Ready    master   136m   v1.18.1\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("     Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   99m    v1.18.1\n")])])]),t("blockquote",[t("h4",{attrs:{id:"completion命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#completion命令"}},[s._v("#")]),s._v(" completion命令")])]),s._v(" "),t("p",[t("strong",[s._v("kubectl工具自动补全，source < (kubectl completion bash) (依赖软件包bash-completion)")])]),s._v(" "),t("p",[t("strong",[s._v("使用kubectl命令的时候可以tab健补齐命令")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y bash-completion ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source   /usr/share/bash-completion/bash_completion ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bash ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source  <( kubectl completion bash)  ")]),s._v("\n")])])]),t("h2",{attrs:{id:"kubernetes将弃用docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes将弃用docker"}},[s._v("#")]),s._v(" Kubernetes将弃用Docker")]),s._v(" "),t("p",[t("strong",[s._v("在Kubernetes平台中，为了解决与容器运行时，（例如Docker）集成问题，在早期社区推出CRI（Container Runtime Interface，容器运行时接口），以支持更多的容器运行时。")])]),s._v(" "),t("p",[t("strong",[s._v("Kubernetes计划弃用就是kubelet中dockershim。即Kubernetes kubelet实现中的组件之一，它能够与Docker Engine进行通信。")])]),s._v(" "),t("blockquote",[t("h4",{attrs:{id:"为什么这么做"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么这么做"}},[s._v("#")]),s._v(" 为什么这么做？")])]),s._v(" "),t("p",[t("strong",[s._v("Docker内部调用链比较复杂，多层封装和调用，导致性能降低，提升故障率，不易排查。")])]),s._v(" "),t("p",[t("strong",[s._v("Docker还会在宿主机创建网络规则，存储卷，也带来了安全隐患。")])]),s._v(" "),t("blockquote",[t("h4",{attrs:{id:"如何应对"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何应对"}},[s._v("#")]),s._v(" 如何应对？")])]),s._v(" "),t("p",[t("strong",[s._v("在未来的Kubernetes版本彻底放弃Docker支持之前，引入受支持的容器运行时。")])]),s._v(" "),t("p",[t("strong",[s._v("除了docker之外，CRI还支持很多容器运行时，例如：")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("containerd： containerd与Docker相互兼容，相比Docker轻量很多，目前比较成熟")])]),s._v(" "),t("li",[t("strong",[s._v("cri-o,podman： 都是红帽（Redhat）项目，目前红帽主推podman")])]),s._v(" "),t("li",[t("strong",[s._v("在kubernetes V1.20后支持containerd")])])]),s._v(" "),t("h2",{attrs:{id:"基本资源的概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本资源的概念"}},[s._v("#")]),s._v(" 基本资源的概念")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Pod")]),s._v("：K8s最小的部署单元，一组容器的集合-")]),s._v(" "),t("li",[t("code",[s._v("Deployment")]),s._v("： 最常见额控制器，用于更高级别部署和管理Pod-")]),s._v(" "),t("li",[t("code",[s._v("Service")]),s._v("： 为一组Pod提供负载均衡，对外提供同一的访问入口-")]),s._v(" "),t("li",[t("code",[s._v("Label")]),s._v(": 标签，附加到某个资源上，用于关联对象，查询和筛选-")]),s._v(" "),t("li",[t("code",[s._v("Namespaces")]),s._v("： 命名空间，将对象逻辑上隔离，也利于权限控制")])]),s._v(" "),t("h4",{attrs:{id:"查看容器的日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器的日志"}},[s._v("#")]),s._v(" 查看容器的日志")]),s._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[s._v("[root@master ~]# kubectl logs <容器名称> -n kube-system \n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kube-system  ")]),s._v("\nNAME                             READY   STATUS    RESTARTS   AGE\ncoredns-d9d48f6bf-8ktqq          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\ncoredns-d9d48f6bf-jlhgl          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\netcd-master                      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\nkube-apiserver-master            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\nkube-controller-manager-master   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\nkube-flannel-ds-7fg7n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          12m\nkube-flannel-ds-jvwsl            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\nkube-proxy-flk2z                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\nkube-proxy-r8ztx                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          12m\nkube-scheduler-master            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          48m\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl logs coredns-d9d48f6bf-8ktqq  -n  kube-system             ")]),s._v("\n.:53\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" plugin/reload: Running configuration MD5 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 4e235fcc3696966e76816bcd9034ebc7\nCoreDNS-1.6.7\nlinux/amd64, go1.13.6, da7f65b\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" plugin/errors: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8198651563338055206.150263447128682679")]),s._v(". HINFO: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" udp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.3:50822-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.25")]),s._v(".254.2:53: i/o "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" plugin/errors: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8198651563338055206.150263447128682679")]),s._v(". HINFO: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" udp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.3:40375-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.25")]),s._v(".253.1:53: i/o "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" plugin/errors: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8198651563338055206.150263447128682679")]),s._v(". HINFO: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" udp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.3:39816-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.25")]),s._v(".254.2:53: i/o "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" plugin/errors: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8198651563338055206.150263447128682679")]),s._v(". HINFO: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" udp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.3:33657-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.25")]),s._v(".254.2:53: i/o "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v("\n")])])]),t("h4",{attrs:{id:"查看容器的事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器的事件"}},[s._v("#")]),s._v(" 查看容器的事件")]),s._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[s._v("[root@master ~]# kubectl describe pod <容器名称> -n kube-system \n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@master ~]# kubectl get pods -n kube-system  \nNAME                             READY   STATUS    RESTARTS   AGE\ncoredns-d9d48f6bf-8ktqq          1/1     Running   0          48m\ncoredns-d9d48f6bf-jlhgl          1/1     Running   0          48m\netcd-master                      1/1     Running   0          48m\nkube-apiserver-master            1/1     Running   0          48m\nkube-controller-manager-master   1/1     Running   0          48m\nkube-flannel-ds-7fg7n            1/1     Running   0          12m\nkube-flannel-ds-jvwsl            1/1     Running   0          48m\nkube-proxy-flk2z                 1/1     Running   0          48m\nkube-proxy-r8ztx                 1/1     Running   0          12m\nkube-scheduler-master            1/1     Running   0          48m\n\n[root@master ~]# kubectl describe pods etcd-master -n kube-system \n")])])]),t("h4",{attrs:{id:"查看资源标签"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看资源标签"}},[s._v("#")]),s._v(" 查看资源标签")]),s._v(" "),t("p",[t("strong",[s._v("查看pod的标签")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("NAME                   READY   STATUS    RESTARTS   AGE   LABELS\nweb-756987f8f4-8rwwp   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          40m   "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("web,pod-template-hash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("756987f8f4\n")])])]),t("p",[t("strong",[s._v("查看service的标签")])]),s._v(" "),t("p",[t("strong",[s._v("可以发现pod和service的标签app=web的，所以service才对web的pod生效。")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl  get service --show-labels")]),s._v("\nNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        AGE   LABELS\nkubernetes   ClusterIP   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.96")]),s._v(".0.1       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP        12h   "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("component")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("apiserver,provider"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kubernetes\nweb          NodePort    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.99")]),s._v(".251.101   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":30746/TCP   16m   "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("web\n")])])]),t("p",[t("strong",[s._v("查看筛选的标签")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deployment -n aliang-cka ")]),s._v("\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\npod-1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           8m21s\n")])])]),t("blockquote",[t("h2",{attrs:{id:"命名空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命名空间"}},[s._v("#")]),s._v(" 命名空间")])]),s._v(" "),t("p",[t("strong",[s._v("命名空间（Namespace）")]),s._v("：Kubernetes将资源对象逻辑上隔离，从而形成多个虚拟集群。")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("应用场景：")])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("根据不同的团队划分命名空间")])]),s._v(" "),t("li",[t("strong",[s._v("根据项目划分命名空间")])])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("kubectl get namespace：")])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("default： 默认命名空间")])]),s._v(" "),t("li",[t("strong",[s._v("kube-system： k8s系统方面的命名空间")])]),s._v(" "),t("li",[t("strong",[s._v("kube-public： 公开的命名空间，谁都可以访问")])]),s._v(" "),t("li",[t("strong",[s._v("kube-node-lease： k8s内部命名空间")])])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("两种方法指定资源命名空间：")])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("命令行加 -n")])]),s._v(" "),t("li",[t("strong",[s._v("yaml资源元数据里面指定namespace字段")])])]),s._v(" "),t("h4",{attrs:{id:"namespace命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#namespace命令"}},[s._v("#")]),s._v(" namespace命令")]),s._v(" "),t("p",[s._v("查看命名空间")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get namespace ")]),s._v("\n NAME                   STATUS   AGE\ndefault                Active   12h\nkube-node-lease        Active   12h\nkube-public            Active   12h\nkube-system            Active   12h\nkubernetes-dashboard   Active   12h\n")])])]),t("h4",{attrs:{id:"创建namespace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建namespace"}},[s._v("#")]),s._v(" 创建Namespace")]),s._v(" "),t("p",[s._v("不要害怕创建namespace。它不会降低服务的性能，反而大多情况下会提升你的工作效率。\n创建namespace只需一个很简单的命令，例如，创建一个名字为：test的namespace，执行：")]),s._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create namespace test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat test.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" test\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" test\n")])])]),t("p",[s._v("查看命名空间")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get namespace ")]),s._v("\n NAME                   STATUS   AGE\ndefault                Active   12h\nkube-node-lease        Active   12h\nkube-public            Active   12h\nkube-system            Active   12h\nkubernetes-dashboard   Active   12h\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\t\t\t\t   Active\t1ms\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);