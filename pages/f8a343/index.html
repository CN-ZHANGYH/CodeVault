<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>并行合约设计与实践 | CodeVault文档站</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/CodeVault/img/Aj.svg">
    <meta name="description" content="CodeVault一个记录云计算、云原生、Java开发的文档站。">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/CodeVault/assets/css/0.styles.bcdd6f38.css" as="style"><link rel="preload" href="/CodeVault/assets/js/app.ef278985.js" as="script"><link rel="preload" href="/CodeVault/assets/js/2.f96441c8.js" as="script"><link rel="preload" href="/CodeVault/assets/js/236.252b1f69.js" as="script"><link rel="prefetch" href="/CodeVault/assets/js/10.0b981dbd.js"><link rel="prefetch" href="/CodeVault/assets/js/100.5c06c78f.js"><link rel="prefetch" href="/CodeVault/assets/js/101.88d67c9c.js"><link rel="prefetch" href="/CodeVault/assets/js/102.70928850.js"><link rel="prefetch" href="/CodeVault/assets/js/103.ef636770.js"><link rel="prefetch" href="/CodeVault/assets/js/104.c1927b63.js"><link rel="prefetch" href="/CodeVault/assets/js/105.85c8a7cd.js"><link rel="prefetch" href="/CodeVault/assets/js/106.fb2e66ea.js"><link rel="prefetch" href="/CodeVault/assets/js/107.0f35bf63.js"><link rel="prefetch" href="/CodeVault/assets/js/108.fccb735c.js"><link rel="prefetch" href="/CodeVault/assets/js/109.682036f0.js"><link rel="prefetch" href="/CodeVault/assets/js/11.ac4d24fe.js"><link rel="prefetch" href="/CodeVault/assets/js/110.b7f8edea.js"><link rel="prefetch" href="/CodeVault/assets/js/111.fd94666b.js"><link rel="prefetch" href="/CodeVault/assets/js/112.a07708f0.js"><link rel="prefetch" href="/CodeVault/assets/js/113.63efff87.js"><link rel="prefetch" href="/CodeVault/assets/js/114.ab1099fa.js"><link rel="prefetch" href="/CodeVault/assets/js/115.f5fe6b28.js"><link rel="prefetch" href="/CodeVault/assets/js/116.6ce08e8e.js"><link rel="prefetch" href="/CodeVault/assets/js/117.48dbb04e.js"><link rel="prefetch" href="/CodeVault/assets/js/118.5b909be0.js"><link rel="prefetch" href="/CodeVault/assets/js/119.8f6e0bf7.js"><link rel="prefetch" href="/CodeVault/assets/js/12.c1e5feb4.js"><link rel="prefetch" href="/CodeVault/assets/js/120.21cc7ba5.js"><link rel="prefetch" href="/CodeVault/assets/js/121.04134de2.js"><link rel="prefetch" href="/CodeVault/assets/js/122.31567951.js"><link rel="prefetch" href="/CodeVault/assets/js/123.002f9bee.js"><link rel="prefetch" href="/CodeVault/assets/js/124.e99e860a.js"><link rel="prefetch" href="/CodeVault/assets/js/125.72c926b3.js"><link rel="prefetch" href="/CodeVault/assets/js/126.01a5e87f.js"><link rel="prefetch" href="/CodeVault/assets/js/127.1956ebe6.js"><link rel="prefetch" href="/CodeVault/assets/js/128.d65996f5.js"><link rel="prefetch" href="/CodeVault/assets/js/129.67eabc56.js"><link rel="prefetch" href="/CodeVault/assets/js/13.13f84e24.js"><link rel="prefetch" href="/CodeVault/assets/js/130.634c4ce3.js"><link rel="prefetch" href="/CodeVault/assets/js/131.a418f195.js"><link rel="prefetch" href="/CodeVault/assets/js/132.ea662f19.js"><link rel="prefetch" href="/CodeVault/assets/js/133.63b2b38b.js"><link rel="prefetch" href="/CodeVault/assets/js/134.0cd9f3da.js"><link rel="prefetch" href="/CodeVault/assets/js/135.4e8913a1.js"><link rel="prefetch" href="/CodeVault/assets/js/136.53ad8182.js"><link rel="prefetch" href="/CodeVault/assets/js/137.8d8f6ff4.js"><link rel="prefetch" href="/CodeVault/assets/js/138.1e5627de.js"><link rel="prefetch" href="/CodeVault/assets/js/139.4c335178.js"><link rel="prefetch" href="/CodeVault/assets/js/14.92742bc3.js"><link rel="prefetch" href="/CodeVault/assets/js/140.ad32a483.js"><link rel="prefetch" href="/CodeVault/assets/js/141.509650db.js"><link rel="prefetch" href="/CodeVault/assets/js/142.8a4692a4.js"><link rel="prefetch" href="/CodeVault/assets/js/143.4226943d.js"><link rel="prefetch" href="/CodeVault/assets/js/144.a04016d3.js"><link rel="prefetch" href="/CodeVault/assets/js/145.55b32ea3.js"><link rel="prefetch" href="/CodeVault/assets/js/146.d78a1fa5.js"><link rel="prefetch" href="/CodeVault/assets/js/147.c48fa78d.js"><link rel="prefetch" href="/CodeVault/assets/js/148.24a7cd95.js"><link rel="prefetch" href="/CodeVault/assets/js/149.a74e35f1.js"><link rel="prefetch" href="/CodeVault/assets/js/15.6953f44b.js"><link rel="prefetch" href="/CodeVault/assets/js/150.7f27817b.js"><link rel="prefetch" href="/CodeVault/assets/js/151.6445d326.js"><link rel="prefetch" href="/CodeVault/assets/js/152.eadc171d.js"><link rel="prefetch" href="/CodeVault/assets/js/153.2da9c7f8.js"><link rel="prefetch" href="/CodeVault/assets/js/154.a3546076.js"><link rel="prefetch" href="/CodeVault/assets/js/155.351a616f.js"><link rel="prefetch" href="/CodeVault/assets/js/156.e6bbf3b3.js"><link rel="prefetch" href="/CodeVault/assets/js/157.ee152deb.js"><link rel="prefetch" href="/CodeVault/assets/js/158.076e0f8c.js"><link rel="prefetch" href="/CodeVault/assets/js/159.9ad1744e.js"><link rel="prefetch" href="/CodeVault/assets/js/16.df859e45.js"><link rel="prefetch" href="/CodeVault/assets/js/160.c5beea39.js"><link rel="prefetch" href="/CodeVault/assets/js/161.0cf956e1.js"><link rel="prefetch" href="/CodeVault/assets/js/162.c58e81e1.js"><link rel="prefetch" href="/CodeVault/assets/js/163.63d65593.js"><link rel="prefetch" href="/CodeVault/assets/js/164.9626ab8a.js"><link rel="prefetch" href="/CodeVault/assets/js/165.fc09035b.js"><link rel="prefetch" href="/CodeVault/assets/js/166.b38be38b.js"><link rel="prefetch" href="/CodeVault/assets/js/167.8f5417ed.js"><link rel="prefetch" href="/CodeVault/assets/js/168.d636e649.js"><link rel="prefetch" href="/CodeVault/assets/js/169.dd84c459.js"><link rel="prefetch" href="/CodeVault/assets/js/17.a2971fe6.js"><link rel="prefetch" href="/CodeVault/assets/js/170.a488616f.js"><link rel="prefetch" href="/CodeVault/assets/js/171.a7896a98.js"><link rel="prefetch" href="/CodeVault/assets/js/172.90b58f0e.js"><link rel="prefetch" href="/CodeVault/assets/js/173.ce66d68a.js"><link rel="prefetch" href="/CodeVault/assets/js/174.d0a94b6a.js"><link rel="prefetch" href="/CodeVault/assets/js/175.87ea7df7.js"><link rel="prefetch" href="/CodeVault/assets/js/176.67abf34b.js"><link rel="prefetch" href="/CodeVault/assets/js/177.3b2acda5.js"><link rel="prefetch" href="/CodeVault/assets/js/178.5fe697a5.js"><link rel="prefetch" href="/CodeVault/assets/js/179.57349e36.js"><link rel="prefetch" href="/CodeVault/assets/js/18.45b06c71.js"><link rel="prefetch" href="/CodeVault/assets/js/180.a8b6136e.js"><link rel="prefetch" href="/CodeVault/assets/js/181.c96cb1ac.js"><link rel="prefetch" href="/CodeVault/assets/js/182.e13a2ed6.js"><link rel="prefetch" href="/CodeVault/assets/js/183.4982d955.js"><link rel="prefetch" href="/CodeVault/assets/js/184.123e3912.js"><link rel="prefetch" href="/CodeVault/assets/js/185.c1db2bfa.js"><link rel="prefetch" href="/CodeVault/assets/js/186.bff6dc40.js"><link rel="prefetch" href="/CodeVault/assets/js/187.3e10e06d.js"><link rel="prefetch" href="/CodeVault/assets/js/188.53f01570.js"><link rel="prefetch" href="/CodeVault/assets/js/189.53c9b973.js"><link rel="prefetch" href="/CodeVault/assets/js/19.21381c2f.js"><link rel="prefetch" href="/CodeVault/assets/js/190.f9e298a3.js"><link rel="prefetch" href="/CodeVault/assets/js/191.7055ec43.js"><link rel="prefetch" href="/CodeVault/assets/js/192.6083d608.js"><link rel="prefetch" href="/CodeVault/assets/js/193.72e5d099.js"><link rel="prefetch" href="/CodeVault/assets/js/194.cb4c2f87.js"><link rel="prefetch" href="/CodeVault/assets/js/195.add61432.js"><link rel="prefetch" href="/CodeVault/assets/js/196.cafb716f.js"><link rel="prefetch" href="/CodeVault/assets/js/197.29ad1cb1.js"><link rel="prefetch" href="/CodeVault/assets/js/198.1ca9886c.js"><link rel="prefetch" href="/CodeVault/assets/js/199.28f7095d.js"><link rel="prefetch" href="/CodeVault/assets/js/20.fe478246.js"><link rel="prefetch" href="/CodeVault/assets/js/200.cdd91d66.js"><link rel="prefetch" href="/CodeVault/assets/js/201.568571d0.js"><link rel="prefetch" href="/CodeVault/assets/js/202.0b55d1cd.js"><link rel="prefetch" href="/CodeVault/assets/js/203.c9d7036e.js"><link rel="prefetch" href="/CodeVault/assets/js/204.f877fa44.js"><link rel="prefetch" href="/CodeVault/assets/js/205.f7dcea25.js"><link rel="prefetch" href="/CodeVault/assets/js/206.266f6bb0.js"><link rel="prefetch" href="/CodeVault/assets/js/207.962cdf0e.js"><link rel="prefetch" href="/CodeVault/assets/js/208.dcbb7fb9.js"><link rel="prefetch" href="/CodeVault/assets/js/209.89cb12fb.js"><link rel="prefetch" href="/CodeVault/assets/js/21.1a17ddc5.js"><link rel="prefetch" href="/CodeVault/assets/js/210.442ced55.js"><link rel="prefetch" href="/CodeVault/assets/js/211.6d14fe33.js"><link rel="prefetch" href="/CodeVault/assets/js/212.65a1883d.js"><link rel="prefetch" href="/CodeVault/assets/js/213.21351702.js"><link rel="prefetch" href="/CodeVault/assets/js/214.bd781706.js"><link rel="prefetch" href="/CodeVault/assets/js/215.f30b644c.js"><link rel="prefetch" href="/CodeVault/assets/js/216.587501ff.js"><link rel="prefetch" href="/CodeVault/assets/js/217.8db2123f.js"><link rel="prefetch" href="/CodeVault/assets/js/218.aa6b1af6.js"><link rel="prefetch" href="/CodeVault/assets/js/219.2b27640b.js"><link rel="prefetch" href="/CodeVault/assets/js/22.7652d0d6.js"><link rel="prefetch" href="/CodeVault/assets/js/220.eafe6218.js"><link rel="prefetch" href="/CodeVault/assets/js/221.ab153f73.js"><link rel="prefetch" href="/CodeVault/assets/js/222.4f7df33b.js"><link rel="prefetch" href="/CodeVault/assets/js/223.6f5b1e03.js"><link rel="prefetch" href="/CodeVault/assets/js/224.6bed6414.js"><link rel="prefetch" href="/CodeVault/assets/js/225.03a64323.js"><link rel="prefetch" href="/CodeVault/assets/js/226.2db9dc4b.js"><link rel="prefetch" href="/CodeVault/assets/js/227.6e01bc51.js"><link rel="prefetch" href="/CodeVault/assets/js/228.d06cad32.js"><link rel="prefetch" href="/CodeVault/assets/js/229.3f46b203.js"><link rel="prefetch" href="/CodeVault/assets/js/23.8a5bbf3f.js"><link rel="prefetch" href="/CodeVault/assets/js/230.b84fd605.js"><link rel="prefetch" href="/CodeVault/assets/js/231.ca2e1834.js"><link rel="prefetch" href="/CodeVault/assets/js/232.e572f662.js"><link rel="prefetch" href="/CodeVault/assets/js/233.0a7e6deb.js"><link rel="prefetch" href="/CodeVault/assets/js/234.9dddbcb6.js"><link rel="prefetch" href="/CodeVault/assets/js/235.b4ed574b.js"><link rel="prefetch" href="/CodeVault/assets/js/237.c529d9c4.js"><link rel="prefetch" href="/CodeVault/assets/js/238.16da920c.js"><link rel="prefetch" href="/CodeVault/assets/js/239.14f7892d.js"><link rel="prefetch" href="/CodeVault/assets/js/24.1ca1bd80.js"><link rel="prefetch" href="/CodeVault/assets/js/240.d00a46df.js"><link rel="prefetch" href="/CodeVault/assets/js/25.43c779a1.js"><link rel="prefetch" href="/CodeVault/assets/js/26.bdfe293e.js"><link rel="prefetch" href="/CodeVault/assets/js/27.330c11f5.js"><link rel="prefetch" href="/CodeVault/assets/js/28.46dfe7f4.js"><link rel="prefetch" href="/CodeVault/assets/js/29.4fc19b1e.js"><link rel="prefetch" href="/CodeVault/assets/js/3.44fcbdc8.js"><link rel="prefetch" href="/CodeVault/assets/js/30.da1d9fd7.js"><link rel="prefetch" href="/CodeVault/assets/js/31.df871787.js"><link rel="prefetch" href="/CodeVault/assets/js/32.e62268d4.js"><link rel="prefetch" href="/CodeVault/assets/js/33.b2c675b0.js"><link rel="prefetch" href="/CodeVault/assets/js/34.461e2f23.js"><link rel="prefetch" href="/CodeVault/assets/js/35.2666157f.js"><link rel="prefetch" href="/CodeVault/assets/js/36.b55a4b34.js"><link rel="prefetch" href="/CodeVault/assets/js/37.556ba5c1.js"><link rel="prefetch" href="/CodeVault/assets/js/38.8c982590.js"><link rel="prefetch" href="/CodeVault/assets/js/39.a7850266.js"><link rel="prefetch" href="/CodeVault/assets/js/4.8a0557a7.js"><link rel="prefetch" href="/CodeVault/assets/js/40.9a11a440.js"><link rel="prefetch" href="/CodeVault/assets/js/41.c3a71e10.js"><link rel="prefetch" href="/CodeVault/assets/js/42.7e9779c1.js"><link rel="prefetch" href="/CodeVault/assets/js/43.e017fec5.js"><link rel="prefetch" href="/CodeVault/assets/js/44.22c5aef3.js"><link rel="prefetch" href="/CodeVault/assets/js/45.dfe95d23.js"><link rel="prefetch" href="/CodeVault/assets/js/46.10af373d.js"><link rel="prefetch" href="/CodeVault/assets/js/47.a1e4779a.js"><link rel="prefetch" href="/CodeVault/assets/js/48.3142bf91.js"><link rel="prefetch" href="/CodeVault/assets/js/49.08546fe2.js"><link rel="prefetch" href="/CodeVault/assets/js/5.1bad1047.js"><link rel="prefetch" href="/CodeVault/assets/js/50.75c37eaf.js"><link rel="prefetch" href="/CodeVault/assets/js/51.b2f39f65.js"><link rel="prefetch" href="/CodeVault/assets/js/52.97fc3d07.js"><link rel="prefetch" href="/CodeVault/assets/js/53.1a2a51df.js"><link rel="prefetch" href="/CodeVault/assets/js/54.09f7dfd6.js"><link rel="prefetch" href="/CodeVault/assets/js/55.d112e5e2.js"><link rel="prefetch" href="/CodeVault/assets/js/56.b7b00837.js"><link rel="prefetch" href="/CodeVault/assets/js/57.5beac805.js"><link rel="prefetch" href="/CodeVault/assets/js/58.04f116f1.js"><link rel="prefetch" href="/CodeVault/assets/js/59.d660a6b3.js"><link rel="prefetch" href="/CodeVault/assets/js/6.7220274d.js"><link rel="prefetch" href="/CodeVault/assets/js/60.54783427.js"><link rel="prefetch" href="/CodeVault/assets/js/61.6e520517.js"><link rel="prefetch" href="/CodeVault/assets/js/62.78b5acff.js"><link rel="prefetch" href="/CodeVault/assets/js/63.0492d6b3.js"><link rel="prefetch" href="/CodeVault/assets/js/64.bd2a8518.js"><link rel="prefetch" href="/CodeVault/assets/js/65.8acc8c15.js"><link rel="prefetch" href="/CodeVault/assets/js/66.c2dc1d15.js"><link rel="prefetch" href="/CodeVault/assets/js/67.d584fc60.js"><link rel="prefetch" href="/CodeVault/assets/js/68.7221e725.js"><link rel="prefetch" href="/CodeVault/assets/js/69.f1a4c42c.js"><link rel="prefetch" href="/CodeVault/assets/js/7.ee190d28.js"><link rel="prefetch" href="/CodeVault/assets/js/70.8fb27ce3.js"><link rel="prefetch" href="/CodeVault/assets/js/71.2011297a.js"><link rel="prefetch" href="/CodeVault/assets/js/72.81904f20.js"><link rel="prefetch" href="/CodeVault/assets/js/73.cae4a206.js"><link rel="prefetch" href="/CodeVault/assets/js/74.41ca332e.js"><link rel="prefetch" href="/CodeVault/assets/js/75.ae7006ef.js"><link rel="prefetch" href="/CodeVault/assets/js/76.8477b765.js"><link rel="prefetch" href="/CodeVault/assets/js/77.ae764f14.js"><link rel="prefetch" href="/CodeVault/assets/js/78.b47518b4.js"><link rel="prefetch" href="/CodeVault/assets/js/79.bde0466f.js"><link rel="prefetch" href="/CodeVault/assets/js/8.e3ab8186.js"><link rel="prefetch" href="/CodeVault/assets/js/80.94af34f8.js"><link rel="prefetch" href="/CodeVault/assets/js/81.f1ba0edc.js"><link rel="prefetch" href="/CodeVault/assets/js/82.4485e21e.js"><link rel="prefetch" href="/CodeVault/assets/js/83.940dbcc3.js"><link rel="prefetch" href="/CodeVault/assets/js/84.6be8c64a.js"><link rel="prefetch" href="/CodeVault/assets/js/85.aa147bd8.js"><link rel="prefetch" href="/CodeVault/assets/js/86.0259d757.js"><link rel="prefetch" href="/CodeVault/assets/js/87.c88b420b.js"><link rel="prefetch" href="/CodeVault/assets/js/88.38f98c94.js"><link rel="prefetch" href="/CodeVault/assets/js/89.421840d7.js"><link rel="prefetch" href="/CodeVault/assets/js/9.cb249ed0.js"><link rel="prefetch" href="/CodeVault/assets/js/90.cd9b70c8.js"><link rel="prefetch" href="/CodeVault/assets/js/91.0c040f15.js"><link rel="prefetch" href="/CodeVault/assets/js/92.1ea436cf.js"><link rel="prefetch" href="/CodeVault/assets/js/93.7de38599.js"><link rel="prefetch" href="/CodeVault/assets/js/94.f2ad5a97.js"><link rel="prefetch" href="/CodeVault/assets/js/95.22f940d7.js"><link rel="prefetch" href="/CodeVault/assets/js/96.6a991248.js"><link rel="prefetch" href="/CodeVault/assets/js/97.aeccee85.js"><link rel="prefetch" href="/CodeVault/assets/js/98.79db6c16.js"><link rel="prefetch" href="/CodeVault/assets/js/99.aa13c9cb.js">
    <link rel="stylesheet" href="/CodeVault/assets/css/0.styles.bcdd6f38.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CodeVault/" class="home-link router-link-active"><img src="/CodeVault/img/huli.svg" alt="CodeVault文档站" class="logo"> <span class="site-name can-hide">CodeVault文档站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CodeVault/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈开发" class="dropdown-title"><a href="/CodeVault/pages/d1eaf8/" class="link-title">全栈开发</a> <span class="title" style="display:none;">全栈开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云计算运维</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/d1eaf8/" class="nav-link">云计算</a></li></ul></li><li class="dropdown-item"><h4>容器开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/e820a7/" class="nav-link">容器</a></li></ul></li><li class="dropdown-item"><h4>K8S虚拟化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/da2470/" class="nav-link">容器虚拟化</a></li></ul></li><li class="dropdown-item"><h4>运维高级篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/ce761d/" class="nav-link">高可用</a></li></ul></li><li class="dropdown-item"><h4>前端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">前端常用</a></li></ul></li><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">后端常用</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/CodeVault/pages/e4db9d/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/e4db9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/c936ca/" class="nav-link">学习文档资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><a href="/CodeVault/pages/f24c41/" class="link-title">学习路线</a> <span class="title" style="display:none;">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f24c41/" class="nav-link">后端学习路线</a></li></ul></li><li class="dropdown-item"><h4>Web3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1583d1/" class="nav-link">区块链学习路线</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/CodeVault/pages/6ffa63/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML5+CSS3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/6ffa63/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/b23e0c/" class="nav-link">CSS3</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/0e8324/" class="nav-link">JavaScript开篇</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/4d9ec9/" class="nav-link">JavaScript面向对象</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0505ad/" class="nav-link">JavaScript DOM</a></li></ul></li><li class="dropdown-item"><h4>API</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/845076/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9c8e93/" class="nav-link">Ajax</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Axios</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/a1209f/" class="nav-link">Vuejs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/CodeVault/pages/5e1c7d/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/5e1c7d/" class="nav-link">Java进阶</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9b262c/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3e651a/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>Golang</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/135518/" class="nav-link">Beego</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gin</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gorm</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/CodeVault/pages/7ef2c7/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/7ef2c7/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/516f71/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1eaa9a/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1ac9b2/" class="nav-link">Ceph</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/719244/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/6ec6ec/" class="nav-link">Istio</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/30e340/" class="nav-link">Prometheus</a></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/32fd53/" class="nav-link">Docker</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="K8S" class="dropdown-title"><a href="/CodeVault/pages/46159d/" class="link-title">K8S</a> <span class="title" style="display:none;">K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云原生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/46159d/" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f87a46/" class="nav-link">CKS认证</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/2d432e/" class="nav-link">Operator</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/f6f110/" class="nav-link">CI/CD</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/CodeVault/pages/f9fa7a/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f9fa7a/" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/314d26/" class="nav-link">Kvm</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/44e450/" class="nav-link">Ansible</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/8292d8/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="区块链" class="dropdown-title"><a href="/CodeVault/pages/f3ea9f/" class="link-title">区块链</a> <span class="title" style="display:none;">区块链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>FISCO BCOS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f3ea9f/" class="nav-link">WeBASE搭建</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛上</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/685f1f/" class="nav-link">碳排放解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3f1596/" class="nav-link">慈善公益解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cc43be/" class="nav-link">构造交易传入AppID</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/75ddc8/" class="nav-link">合约时间触发器</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9bcc7c/" class="nav-link">一键部署环境脚本</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a93fcf/" class="nav-link">合约调用机制与并行合约</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛下</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1fdb40/" class="nav-link">DDCMS后端容器化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/795b78/" class="nav-link">DDCMS第三方登录</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a99040/" class="nav-link">DDCMS智能合约设计</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cb310d/" class="nav-link">DDCMS部署和运维</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0b1c5a/" class="nav-link">DDCMS接口报错</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/99df38/" class="nav-link">合约大小限制优化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f8a343/" aria-current="page" class="nav-link router-link-exact-active router-link-active">并行合约最佳实践</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3d3086/" class="nav-link">一文搞懂Truffle测试</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/e3d908/" class="nav-link">记录</a></div> <a href="https://github.com/CN-ZHANGYH/CodeVault" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/CodeVault/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈开发" class="dropdown-title"><a href="/CodeVault/pages/d1eaf8/" class="link-title">全栈开发</a> <span class="title" style="display:none;">全栈开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云计算运维</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/d1eaf8/" class="nav-link">云计算</a></li></ul></li><li class="dropdown-item"><h4>容器开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/e820a7/" class="nav-link">容器</a></li></ul></li><li class="dropdown-item"><h4>K8S虚拟化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/da2470/" class="nav-link">容器虚拟化</a></li></ul></li><li class="dropdown-item"><h4>运维高级篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/ce761d/" class="nav-link">高可用</a></li></ul></li><li class="dropdown-item"><h4>前端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">前端常用</a></li></ul></li><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">后端常用</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/CodeVault/pages/e4db9d/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/e4db9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/c936ca/" class="nav-link">学习文档资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><a href="/CodeVault/pages/f24c41/" class="link-title">学习路线</a> <span class="title" style="display:none;">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f24c41/" class="nav-link">后端学习路线</a></li></ul></li><li class="dropdown-item"><h4>Web3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1583d1/" class="nav-link">区块链学习路线</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/CodeVault/pages/6ffa63/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML5+CSS3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/6ffa63/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/b23e0c/" class="nav-link">CSS3</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/0e8324/" class="nav-link">JavaScript开篇</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/4d9ec9/" class="nav-link">JavaScript面向对象</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0505ad/" class="nav-link">JavaScript DOM</a></li></ul></li><li class="dropdown-item"><h4>API</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/845076/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9c8e93/" class="nav-link">Ajax</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Axios</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/a1209f/" class="nav-link">Vuejs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/CodeVault/pages/5e1c7d/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/5e1c7d/" class="nav-link">Java进阶</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9b262c/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3e651a/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>Golang</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/135518/" class="nav-link">Beego</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gin</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gorm</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/CodeVault/pages/7ef2c7/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/7ef2c7/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/516f71/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1eaa9a/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1ac9b2/" class="nav-link">Ceph</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/719244/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/6ec6ec/" class="nav-link">Istio</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/30e340/" class="nav-link">Prometheus</a></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/32fd53/" class="nav-link">Docker</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="K8S" class="dropdown-title"><a href="/CodeVault/pages/46159d/" class="link-title">K8S</a> <span class="title" style="display:none;">K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云原生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/46159d/" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f87a46/" class="nav-link">CKS认证</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/2d432e/" class="nav-link">Operator</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/f6f110/" class="nav-link">CI/CD</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/CodeVault/pages/f9fa7a/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f9fa7a/" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/314d26/" class="nav-link">Kvm</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/44e450/" class="nav-link">Ansible</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/8292d8/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="区块链" class="dropdown-title"><a href="/CodeVault/pages/f3ea9f/" class="link-title">区块链</a> <span class="title" style="display:none;">区块链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>FISCO BCOS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f3ea9f/" class="nav-link">WeBASE搭建</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛上</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/685f1f/" class="nav-link">碳排放解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3f1596/" class="nav-link">慈善公益解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cc43be/" class="nav-link">构造交易传入AppID</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/75ddc8/" class="nav-link">合约时间触发器</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9bcc7c/" class="nav-link">一键部署环境脚本</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a93fcf/" class="nav-link">合约调用机制与并行合约</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛下</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1fdb40/" class="nav-link">DDCMS后端容器化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/795b78/" class="nav-link">DDCMS第三方登录</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a99040/" class="nav-link">DDCMS智能合约设计</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cb310d/" class="nav-link">DDCMS部署和运维</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0b1c5a/" class="nav-link">DDCMS接口报错</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/99df38/" class="nav-link">合约大小限制优化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f8a343/" aria-current="page" class="nav-link router-link-exact-active router-link-active">并行合约最佳实践</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3d3086/" class="nav-link">一文搞懂Truffle测试</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/e3d908/" class="nav-link">记录</a></div> <a href="https://github.com/CN-ZHANGYH/CodeVault" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>FISCO BCOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/f3ea9f/" class="sidebar-link">搭建Fisco的联盟链(WeBase版)</a></li><li><a href="/CodeVault/pages/484318/" class="sidebar-link">FISCO BCOS Air搭建</a></li><li><a href="/CodeVault/pages/58f15c/" class="sidebar-link">FISCO BCOS Pro搭建</a></li><li><a href="/CodeVault/pages/cca1e9/" class="sidebar-link">FISCO BCOS Max搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>2023 Task挑战赛上</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/685f1f/" class="sidebar-link">企业碳排放解决方案合约案例</a></li><li><a href="/CodeVault/pages/3f1596/" class="sidebar-link">慈善公益解决方案</a></li><li><a href="/CodeVault/pages/cc43be/" class="sidebar-link">RawTransaction优化</a></li><li><a href="/CodeVault/pages/75ddc8/" class="sidebar-link">Solidity合约时间触发器</a></li><li><a href="/CodeVault/pages/9bcc7c/" class="sidebar-link">一键部署环境脚本</a></li><li><a href="/CodeVault/pages/a93fcf/" class="sidebar-link">合约调用机制与并行合约</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>2023 Task挑战赛下</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/1fdb40/" class="sidebar-link">DDCMS 后端容器化解决方案</a></li><li><a href="/CodeVault/pages/795b78/" class="sidebar-link">DDCMS实现第三方Github登录</a></li><li><a href="/CodeVault/pages/a99040/" class="sidebar-link">DDCMS智能合约设计与实现</a></li><li><a href="/CodeVault/pages/cb310d/" class="sidebar-link">部署DDCMS分布式数据管理</a></li><li><a href="/CodeVault/pages/0b1c5a/" class="sidebar-link">DDCMS-Service后端searchCompany接口解决报错</a></li><li><a href="/CodeVault/pages/99df38/" class="sidebar-link">Solidity智能合约大小限制优化方案</a></li><li><a href="/CodeVault/pages/f8a343/" aria-current="page" class="active sidebar-link">并行合约设计与实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_1-什么是并行合约" class="sidebar-link">1.什么是并行合约？</a></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_2-互斥的概念" class="sidebar-link">2.互斥的概念</a></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_3-并行合约的必要条件" class="sidebar-link">3.并行合约的必要条件</a></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_4-fisco并行计算的框架" class="sidebar-link">4.FISCO并行计算的框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_4-1-parallelcontract合约" class="sidebar-link">4.1 ParallelContract合约</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_4-2-解析合约代码" class="sidebar-link">4.2 解析合约代码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_5-并行合约模拟业务设计" class="sidebar-link">5.并行合约模拟业务设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_5-1-业务设计思路" class="sidebar-link">5.1 业务设计思路</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_5-2-详细业务说明" class="sidebar-link">5.2 详细业务说明</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/f8a343/#_6-具体合约实现与测试" class="sidebar-link">6.具体合约实现与测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_6-1-并行合约" class="sidebar-link">6.1 并行合约</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_6-2-storagedata合约" class="sidebar-link">6.2 StorageData合约</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_6-3-delivery合约" class="sidebar-link">6.3 Delivery合约</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_6-4-部署调用" class="sidebar-link">6.4 部署调用</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/f8a343/#_6-5-java-sdk-模拟测试" class="sidebar-link">6.5 Java SDK 模拟测试</a></li></ul></li></ul></li><li><a href="/CodeVault/pages/3d3086/" class="sidebar-link">一文搞懂Truffle测试</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/CodeVault/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>区块链</span></li><li data-v-06225672><span data-v-06225672>2023 Task挑战赛下</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/CN-ZHANGYH" target="_blank" title="作者" class="beLink" data-v-06225672>Yyzop</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-11-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">并行合约设计与实践<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="基于fisco-bcos并行合约设计与实践"><a href="#基于fisco-bcos并行合约设计与实践" class="header-anchor">#</a> 基于FISCO BCOS并行合约设计与实践</h1> <p>本文将探讨合约开发如何提高并行度的问题,开发怎么样的合约可以被并行处理。</p> <blockquote><p>作者：</p> <ul><li>江西师范大学 王江宇</li> <li>深圳职业技术大学 张宇豪</li></ul></blockquote> <h2 id="_1-什么是并行合约"><a href="#_1-什么是并行合约" class="header-anchor">#</a> 1.什么是并行合约？</h2> <blockquote><p>贴个官方网址：https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/transaction_parallel.html
​		并行合约是指能够在区块链网络上以并行方式执行的智能合约。传统的智能合约通常是以串行方式执行的，也就是按照顺序逐个执行交易。这种串行执行可能导致执行速度较慢，尤其是当合约逻辑复杂或涉及大量数据处理时。</p></blockquote> <p>​		为了提高智能合约的执行效率，一些区块链平台引入了并行合约的概念。并行合约允许多个交易同时进行处理，这样可以通过并行计算的方式提高整体的处理速度。不同的交易可以在不同的线程或进程中并行地执行，从而减少了串行执行的延迟。</p> <p>​		并行合约的实现可能涉及多个方面。首先，合约需要被设计为可以并行处理的，即任务之间没有明显的依赖关系，并且可以独立执行。其次，智能合约的底层区块链平台需要支持并行处理的机制，例如多线程或多进程执行。此外，对于并行处理的合约，还需要考虑并发安全性和资源管理等问题，以确保正确性和可靠性。</p> <p>​		总结来说，通过实现并行合约，可以有效利用计算资源并提高智能合约的执行效率。这对于处理大量数据、复杂逻辑或需要高吞吐量的应用场景尤为重要。然而，并行合约的具体实现方式和支持程度可能因区块链平台而异，因此在选择使用并行合约时需要进行相应的研究和评估。</p> <h2 id="_2-互斥的概念"><a href="#_2-互斥的概念" class="header-anchor">#</a> 2.互斥的概念</h2> <p>&quot;并行合约的互斥&quot;是指在多个并行运行的智能合约之间实施互斥（Mutual Exclusion）措施，以确保它们在处理共享资源时不会产生冲突或竞争条件。</p> <p>具体来说，智能合约是在区块链网络上执行的自动化代码，它可以实现各种功能，如转账、记录数据等。在某些情况下，多个合约可能需要同时操作或访问共享的资源，例如数据库、状态变量或其他数据。</p> <p>并行合约的互斥的概念可以通过以下示例进行解释：</p> <p>假设有两个智能合约 A 和 B，它们都需要访问共享资源 R（例如某个区域的快递派送情况）。如果没有适当的互斥机制，以下情况可能发生：</p> <ol><li><strong>竞争条件：</strong> 合约 A 和合约 B 同时尝试修改资源 R 的内容，可能导致不一致的状态或数据损坏。</li> <li><strong>死锁：</strong> 合约 A 锁定资源 R，然后尝试锁定资源 S，而合约 B 同时锁定资源 S，然后尝试锁定资源 R。这种情况下，两个合约会陷入无限等待，无法继续执行。</li></ol> <p>在链接文档中提到：</p> <ul><li><strong>互斥参数</strong>：合约<strong>接口</strong>中，与合约存储变量的“读/写”操作相关的参数。例如转账的接口transfer(X, Y)，X和Y都是互斥参数。</li> <li><strong>互斥对象</strong>：一笔<strong>交易</strong>中，根据互斥参数提取出来的、具体的互斥内容。例如转账的接口transfer(X, Y), 一笔调用此接口的交易中，具体的参数是transfer(A, B)，则这笔操作的互斥对象是[A, B]；另外一笔交易，调用的参数是transfer(A, C)，则这笔操作的互斥对象是[A, C]。</li></ul> <blockquote><p><strong>判断同一时刻两笔交易是否能并行执行，就是判断两笔交易的互斥对象是否有交集。相互之间交集为空的交易可并行执行。</strong></p></blockquote> <h2 id="_3-并行合约的必要条件"><a href="#_3-并行合约的必要条件" class="header-anchor">#</a> 3.并行合约的必要条件</h2> <p>一共需要遵守如下的三个规则。</p> <p><strong>3.1 确定接口是否可并行</strong></p> <p>可并行的合约接口，必须满足：</p> <ul><li>无调用外部合约</li> <li>无调用其它函数接口</li></ul> <p>例如如下：</p> <p>![截图 2023-08-17 19-33-19](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 19-33-19.png)</p> <p><strong>3.2 确定互斥参数</strong></p> <p>在编写接口前，先确定接口的互斥参数，接口的互斥即是对全局变量的互斥，互斥参数的确定规则为：</p> <ul><li>接口访问了全局mapping，mapping的key是互斥参数</li> <li>接口访问了全局数组，数组的下标是互斥参数</li> <li>接口访问了简单类型的全局变量，所有简单类型的全局变量共用一个互斥参数，用不同的变量名作为互斥对象</li></ul> <p>还是使用上面一样的：</p> <p>![截图 2023-08-17 19-33-19](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 19-33-19.png)</p> <p><strong>3.3 确定参数类型和顺序</strong></p> <p>确定互斥参数后，根据规则确定参数类型和顺序，规则为：</p> <ul><li>接口参数仅限：<strong>string、address、uint256、int256</strong>（未来会支持更多类型）</li> <li>互斥参数必须全部出现在接口参数中</li> <li>所有互斥参数排列在接口参数的最前</li></ul> <h2 id="_4-fisco并行计算的框架"><a href="#_4-fisco并行计算的框架" class="header-anchor">#</a> 4.FISCO并行计算的框架</h2> <h3 id="_4-1-parallelcontract合约"><a href="#_4-1-parallelcontract合约" class="header-anchor">#</a> 4.1 ParallelContract合约</h3> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.4.25</span><span class="token punctuation">;</span>
<span class="token comment">// 预编译合约 ParallelConfigPrecompiled</span>
<span class="token keyword">contract</span> <span class="token class-name">ParallelConfigPrecompiled</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注册并行函数</span>
    <span class="token comment">// 参数1：并行函数地址</span>
    <span class="token comment">// 参数2：并行函数名称</span>
    <span class="token comment">// 参数3：致命区间值，用于限制并行计算区间大小</span>
    <span class="token keyword">function</span> <span class="token function">registerParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 注销并行函数</span>
    <span class="token comment">// 参数1：并行函数地址</span>
    <span class="token comment">// 参数2：并行函数名称</span>
    <span class="token keyword">function</span> <span class="token function">unregisterParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>
 
<span class="token comment">// 并行合约基类</span>
<span class="token keyword">contract</span> <span class="token class-name">ParallelContract</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实例化并使用 ParallelConfigPrecompiled 合约</span>
    ParallelConfigPrecompiled precompiled <span class="token operator">=</span> <span class="token function">ParallelConfigPrecompiled</span><span class="token punctuation">(</span><span class="token number">0x1006</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 注册并行函数，注册后可以在并行计算中使用</span>
    <span class="token comment">// 参数1：并行函数名称</span>
    <span class="token comment">// 参数2：致命区间值，用于限制并行计算区间大小</span>
    <span class="token keyword">function</span> <span class="token function">registerParallelFunction</span><span class="token punctuation">(</span><span class="token builtin">string</span> functionName<span class="token punctuation">,</span> <span class="token builtin">uint256</span> criticalSize<span class="token punctuation">)</span> <span class="token keyword">public</span> 
    <span class="token punctuation">{</span>
        precompiled<span class="token punctuation">.</span><span class="token function">registerParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> functionName<span class="token punctuation">,</span> criticalSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 注销并行函数，在停用并行计算前建议注销所有已注册的并行函数</span>
    <span class="token comment">// 参数1：并行函数名称</span>
    <span class="token keyword">function</span> <span class="token function">unregisterParallelFunction</span><span class="token punctuation">(</span><span class="token builtin">string</span> functionName<span class="token punctuation">)</span> <span class="token keyword">public</span>
    <span class="token punctuation">{</span>
        precompiled<span class="token punctuation">.</span><span class="token function">unregisterParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 启用并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">enableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 关闭并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">disableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-2-解析合约代码"><a href="#_4-2-解析合约代码" class="header-anchor">#</a> 4.2 解析合约代码</h3> <blockquote><p>上面的整个合约包含如下内容：
ParallelConfigPrecompiled 预编译合约：</p></blockquote> <p>这部分合约定义了名为 <code>ParallelConfigPrecompiled</code> 的合约，它用于在区块链上预先配置并行计算的相关设置。</p> <ol><li><code>registerParallelFunctionInternal</code> 函数：该函数用于注册并行函数，它接收三个参数：并行函数的地址、函数名称以及一个称为 &quot;criticalSize&quot; 的参数。该参数用于限制并行计算区间的大小。</li> <li><code>unregisterParallelFunctionInternal</code> 函数：这个函数用于注销已注册的并行函数，同样接受函数地址和名称作为参数。</li></ol> <p>ParallelContract 并行合约基类：</p> <p>这部分合约定义了一个名为 <code>ParallelContract</code> 的合约，它作为并行计算的基类，可以被其他合约继承并使用。</p> <ol><li><code>ParallelConfigPrecompiled</code> 实例化：在该合约内部实例化了 <code>ParallelConfigPrecompiled</code> 合约，并使用了地址 <code>0x1006</code> 来初始化。</li> <li><code>registerParallelFunction</code> 函数：这个函数是用于在继承的合约中注册并行函数的。它接收函数名称和 &quot;criticalSize&quot; 参数，并通过调用预编译合约的 <code>registerParallelFunctionInternal</code> 函数来注册函数。这允许继承合约在并行计算中使用已注册的函数。</li> <li><code>unregisterParallelFunction</code> 函数：用于在继承的合约中注销已注册的并行函数。它接收函数名称，然后通过调用预编译合约的 <code>unregisterParallelFunctionInternal</code> 函数来注销函数。</li> <li><code>enableParallel</code> 函数和 <code>disableParallel</code> 函数：这两个函数用于启用和关闭并行计算功能。</li></ol> <h2 id="_5-并行合约模拟业务设计"><a href="#_5-并行合约模拟业务设计" class="header-anchor">#</a> 5.并行合约模拟业务设计</h2> <h3 id="_5-1-业务设计思路"><a href="#_5-1-业务设计思路" class="header-anchor">#</a> 5.1 业务设计思路</h3> <p>![截图 2023-08-17 18-36-01](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 18-36-01.png)</p> <h3 id="_5-2-详细业务说明"><a href="#_5-2-详细业务说明" class="header-anchor">#</a> 5.2 详细业务说明</h3> <p>该业务主要涉及快递派送、签收流程以及售后操作。快递员负责派送快递，签收方可以对签收后的物流进行售后操作。我们这里不涉及一个快递员针对所有的用户进行派送，显示业务可以，这里只做模拟演示。</p> <p><strong>角色定义：</strong></p> <ul><li><code>快递员</code>：负责派送快递到指定区域。</li> <li><code>签收方</code>：负责在指定区域接收并签收快递。</li></ul> <p><strong>流程设计：</strong></p> <ul><li><code>派送流程</code>： 快递员根据区域划分将快递派送到对应的签收方处。</li> <li><code>签收流程</code>： 签收方在收到快递后，可以进行签收操作。签收后，系统记录签收时间及状态。</li> <li><code>售后流程</code>： 签收方可以对签收后的物流进行售后操作，包括提出问题、退货、换货等。售后请求会被记录，并通知相关部门处理。</li></ul> <p><strong>并行合约设计部分：</strong></p> <ul><li><code>派送业务</code>：A快递员拿取快件给B用户派送快递，B快递员拿取快件给C用户派送快递，此时A快递员不可能给C用户派送快递。可以实现多快递员同时拿取快件进行不同地方的派件。</li> <li><code>售后业务</code>：A用户和B用户如果都签收之后，A用户可以向该物流进行售后，B用户也可以对物流进行售后，但是对应的商家和物流可能不一样，所以也可以同时进行操作。</li></ul> <h2 id="_6-具体合约实现与测试"><a href="#_6-具体合约实现与测试" class="header-anchor">#</a> 6.具体合约实现与测试</h2> <p>环境搭建：</p> <ul><li>FISCO BCOS 2.9.2</li> <li>WeBASE-Front 1.5.5</li></ul> <p>![截图 2023-08-17 20-02-04](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-02-04.png)</p> <h3 id="_6-1-并行合约"><a href="#_6-1-并行合约" class="header-anchor">#</a> 6.1 并行合约</h3> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.4.25</span><span class="token punctuation">;</span>
<span class="token comment">// 预编译合约 ParallelConfigPrecompiled</span>
<span class="token keyword">contract</span> <span class="token class-name">ParallelConfigPrecompiled</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注册并行函数</span>
    <span class="token comment">// 参数1：并行函数地址</span>
    <span class="token comment">// 参数2：并行函数名称</span>
    <span class="token comment">// 参数3：致命区间值，用于限制并行计算区间大小</span>
    <span class="token keyword">function</span> <span class="token function">registerParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 注销并行函数</span>
    <span class="token comment">// 参数1：并行函数地址</span>
    <span class="token comment">// 参数2：并行函数名称</span>
    <span class="token keyword">function</span> <span class="token function">unregisterParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>
 
<span class="token comment">// 并行合约基类</span>
<span class="token keyword">contract</span> <span class="token class-name">ParallelContract</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实例化并使用 ParallelConfigPrecompiled 合约</span>
    ParallelConfigPrecompiled precompiled <span class="token operator">=</span> <span class="token function">ParallelConfigPrecompiled</span><span class="token punctuation">(</span><span class="token number">0x1006</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 注册并行函数，注册后可以在并行计算中使用</span>
    <span class="token comment">// 参数1：并行函数名称</span>
    <span class="token comment">// 参数2：致命区间值，用于限制并行计算区间大小</span>
    <span class="token keyword">function</span> <span class="token function">registerParallelFunction</span><span class="token punctuation">(</span><span class="token builtin">string</span> functionName<span class="token punctuation">,</span> <span class="token builtin">uint256</span> criticalSize<span class="token punctuation">)</span> <span class="token keyword">public</span> 
    <span class="token punctuation">{</span>
        precompiled<span class="token punctuation">.</span><span class="token function">registerParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> functionName<span class="token punctuation">,</span> criticalSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 注销并行函数，在停用并行计算前建议注销所有已注册的并行函数</span>
    <span class="token comment">// 参数1：并行函数名称</span>
    <span class="token keyword">function</span> <span class="token function">unregisterParallelFunction</span><span class="token punctuation">(</span><span class="token builtin">string</span> functionName<span class="token punctuation">)</span> <span class="token keyword">public</span>
    <span class="token punctuation">{</span>
        precompiled<span class="token punctuation">.</span><span class="token function">unregisterParallelFunctionInternal</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 启用并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">enableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 关闭并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">disableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-2-storagedata合约"><a href="#_6-2-storagedata合约" class="header-anchor">#</a> 6.2 StorageData合约</h3> <p><strong>数据结构定义</strong></p> <p><strong>User 结构</strong>：描述了一个快递员的信息。包括：</p> <ul><li><code>u_address</code>：用户的地址。</li> <li><code>role</code>：用户的角色。</li></ul> <p><strong>SignRecord 结构</strong>：描述了一个签收记录的信息。包括：</p> <ul><li><code>record_id</code>：记录的唯一标识。</li> <li><code>c_address</code>：客户地址。</li> <li><code>u_address</code>：快递员地址。</li> <li><code>sign_time</code>：签收时间。</li></ul> <p><strong>状态变量</strong></p> <ol><li><code>RecordCount</code>：记录了签收记录的数量。</li> <li><code>SignRecordList</code>：一个动态数组，存储所有签收记录的标识。</li> <li><code>UserIsSignStatus</code>：映射，记录了用户是否已签收的状态。</li> <li><code>UserIsClaimStatus</code>：映射，记录了用户是否已提出售后申请的状态。</li> <li><code>UserMap</code>：映射，将用户地址与其对应的 <code>User</code> 结构关联起。</li> <li><code>RecordMap</code>：映射，将记录标识与其对应的 <code>SignRecord</code> 结构关联起来。</li></ol> <p><strong>事件定义</strong></p> <ol><li><code>Registered</code> 事件：在用户注册时触发，记录用户的地址和角色信息。</li> <li><code>Signed</code> 事件：在用户签收操作时触发，记录用户的地址和签收状态。</li> <li><code>Refusal</code> 事件：在用户拒收操作时触发，记录用户的地址和拒收时间。</li></ol> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.4.25</span><span class="token punctuation">;</span>
<span class="token comment">// 数据结构合约</span>
<span class="token keyword">contract</span> <span class="token class-name">StorageData</span> <span class="token punctuation">{</span>
    <span class="token comment">// 快递员</span>
    <span class="token keyword">struct</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
        <span class="token builtin">address</span> u_address<span class="token punctuation">;</span>  <span class="token comment">// 用户的地址</span>
        <span class="token builtin">uint</span>    role<span class="token punctuation">;</span>       <span class="token comment">// 角色</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 签收记录</span>
    <span class="token keyword">struct</span> <span class="token class-name">SignRecord</span><span class="token punctuation">{</span>
        <span class="token builtin">uint</span> record_id<span class="token punctuation">;</span>
        <span class="token builtin">address</span> c_address<span class="token punctuation">;</span>
        <span class="token builtin">address</span> u_address<span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> sign_time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 签收记录ID</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> RecordCount<span class="token punctuation">;</span>
    <span class="token comment">// 签收的记录数组</span>
    <span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> SignRecordList<span class="token punctuation">;</span>
    
    
    <span class="token comment">// 用户签收的状态</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token keyword">public</span> UserIsSignStatus<span class="token punctuation">;</span>
    <span class="token comment">// 用户售后申请</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token keyword">public</span> UserIsClaimStatus<span class="token punctuation">;</span>
    <span class="token comment">// 用户注册</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> User<span class="token punctuation">)</span> <span class="token keyword">public</span> UserMap<span class="token punctuation">;</span>
    <span class="token comment">// 生成记录</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> <span class="token operator">=&gt;</span> SignRecord<span class="token punctuation">)</span> <span class="token keyword">public</span> RecordMap<span class="token punctuation">;</span>
    
    
    <span class="token comment">// 用户注册的事件</span>
    <span class="token keyword">event</span> <span class="token function">Registered</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> _userAddress<span class="token punctuation">,</span><span class="token builtin">uint</span> <span class="token keyword">indexed</span> _role<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    
    <span class="token comment">// 用户签收的事件</span>
    <span class="token keyword">event</span> <span class="token function">Signed</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> _userAddress<span class="token punctuation">,</span><span class="token builtin">uint256</span> <span class="token keyword">indexed</span> _isSign<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    
    <span class="token comment">// 用户拒收事件</span>
    <span class="token keyword">event</span> <span class="token function">Refusal</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> _userAddress<span class="token punctuation">,</span><span class="token builtin">uint</span> <span class="token keyword">indexed</span> _time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-3-delivery合约"><a href="#_6-3-delivery合约" class="header-anchor">#</a> 6.3 Delivery合约</h3> <ol><li><code>IsCourier</code> 修饰器：该修饰器要求被修饰的函数只能由快递员调用。</li> <li><code>userRegister</code> 函数：用于用户注册，接受一个参数 <code>_userAddress</code>，将用户地址与角色信息进行关联，设置为普通用户（角色为1）。</li> <li><code>courierRegister</code> 函数：用于快递员注册，接受一个参数 <code>_courierAddress</code>，将快递员地址与角色信息进行关联，设置为快递员（角色为2）。</li> <li><code>courierToUserSign</code> 函数：用于快递员签收操作，接受 <code>_from</code> 快递员地址、<code>_to</code> 用户地址和 <code>_isSign</code> 是否签收的标识参数。函数内部生成签收记录并存储到 <code>RecordMap</code> 中，同时更新签收状态、触发相应事件。</li> <li><code>afterSales</code> 函数：用于用户进行售后操作，接受 <code>_from</code> 用户地址和 <code>_isClaim</code> 是否申请售后的标识参数。根据 <code>_isClaim</code> 更新用户的售后申请状态。</li> <li><code>selectSignRecordList</code> 函数：查询所有的签收记录，返回一个包含所有签收记录的数组。</li> <li><code>enableParallel</code> 函数：重写了基类的启用并行计算功能，注册了两个并行函数：<code>courierToUserSign</code> 和 <code>afterSales</code>。</li> <li><code>disableParallel</code> 函数：重写了基类的禁用并行计算功能，注销了之前注册的并行函数。</li></ol> <blockquote><p>这里courierToUserSign函数的前两个参数分别是address，为互斥参数。afterSales函数的前一个参数是互斥参数。</p></blockquote> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.4.25</span><span class="token punctuation">;</span>
<span class="token keyword">pragma</span> experimental ABIEncoderV2<span class="token punctuation">;</span>
<span class="token comment">// 派送合约</span>
<span class="token keyword">import</span> <span class="token string">&quot;./StorageData.sol&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./ParallelContract.sol&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">contract</span> <span class="token class-name">Delivery</span>  <span class="token keyword">is</span> StorageData<span class="token punctuation">,</span>ParallelContract <span class="token punctuation">{</span>
    
    <span class="token comment">// 判断当前是否为快递员</span>
    <span class="token keyword">modifier</span> <span class="token function">IsCourier</span><span class="token punctuation">(</span><span class="token builtin">address</span> courierAddress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>UserMap<span class="token punctuation">[</span>courierAddress<span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;当前用户不是快递员&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">_</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 用户的注册业务</span>
    <span class="token keyword">function</span> <span class="token function">userRegister</span><span class="token punctuation">(</span><span class="token builtin">address</span> _userAddress<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        UserMap<span class="token punctuation">[</span>_userAddress<span class="token punctuation">]</span><span class="token punctuation">.</span>u_address <span class="token operator">=</span> _userAddress<span class="token punctuation">;</span>
        UserMap<span class="token punctuation">[</span>_userAddress<span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 快递员注册业务</span>
    <span class="token keyword">function</span> <span class="token function">courierRegister</span><span class="token punctuation">(</span><span class="token builtin">address</span> _courierAddress<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        UserMap<span class="token punctuation">[</span>_courierAddress<span class="token punctuation">]</span><span class="token punctuation">.</span>u_address <span class="token operator">=</span> _courierAddress<span class="token punctuation">;</span>
        UserMap<span class="token punctuation">[</span>_courierAddress<span class="token punctuation">]</span><span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 签收生成签收记录</span>
    <span class="token keyword">function</span> <span class="token function">courierToUserSign</span><span class="token punctuation">(</span><span class="token builtin">address</span> _from<span class="token punctuation">,</span><span class="token builtin">address</span> _to<span class="token punctuation">,</span><span class="token builtin">uint256</span> _isSign<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token function">IsCourier</span><span class="token punctuation">(</span>_from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 生成签收完成的订单记录</span>
        RecordCount<span class="token operator">++</span><span class="token punctuation">;</span>
        SignRecord <span class="token keyword">storage</span> _signRecord <span class="token operator">=</span> RecordMap<span class="token punctuation">[</span>RecordCount<span class="token punctuation">]</span><span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>record_id <span class="token operator">=</span> RecordCount<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>c_address <span class="token operator">=</span> _from<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>u_address <span class="token operator">=</span> _to<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>sign_time <span class="token operator">=</span> block<span class="token punctuation">.</span>timestamp<span class="token punctuation">;</span>
        
        SignRecordList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>RecordCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isSign <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 设置该用户已签收</span>
            UserIsSignStatus<span class="token punctuation">[</span>_to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 设置用户拒绝签收</span>
            UserIsSignStatus<span class="token punctuation">[</span>_to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">emit</span> <span class="token function">Refusal</span><span class="token punctuation">(</span>_to<span class="token punctuation">,</span>block<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">emit</span> <span class="token function">Signed</span><span class="token punctuation">(</span>_to<span class="token punctuation">,</span>_isSign<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 对物流进行售后</span>
    <span class="token keyword">function</span> <span class="token function">afterSales</span><span class="token punctuation">(</span><span class="token builtin">address</span> _from<span class="token punctuation">,</span><span class="token builtin">uint256</span> _isClaim<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">&quot;当前用户已经申请售后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isClaim <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 查询所有的签收记录</span>
    <span class="token keyword">function</span> <span class="token function">selectSignRecordList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span><span class="token punctuation">(</span>SignRecord<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SignRecord<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">memory</span> recordList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SignRecord</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>SignRecordList<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> SignRecordList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            recordList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> RecordMap<span class="token punctuation">[</span>SignRecordList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> recordList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 声明函数 enableParallel，用于启用并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">enableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token function">registerParallelFunction</span><span class="token punctuation">(</span><span class="token string">&quot;courierToUserSign(address,address,uint256)&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerParallelFunction</span><span class="token punctuation">(</span><span class="token string">&quot;afterSales(address,uint256)&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 声明函数 disableParallel，用于禁用并行计算功能</span>
    <span class="token keyword">function</span> <span class="token function">disableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token function">unregisterParallelFunction</span><span class="token punctuation">(</span><span class="token string">&quot;courierToUserSign(address,address,bool)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">unregisterParallelFunction</span><span class="token punctuation">(</span><span class="token string">&quot;afterSales(address,uint256)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如下代码作为解析：</p></blockquote> <ul><li><strong>courierToUserSign</strong>签收业务
<ul><li>这里入参分别为两个用户地址，一个是快递员一个是用户。然后签收状态码，对前两个参数需要做互斥的判断，在业务中我涉及了生成签收的记录，然后修改了用户的签收状态，这里我分别使用了maping的设计，虽然对存储的消耗会稍微大一点，但是保证了每一个key不一样。</li> <li>通过状态码的判断，对用户的签收状态使用mapping的方式更新。</li></ul></li> <li><strong>afterSales</strong>售后业务
<ul><li>这里的售后使用的是mapping的方式更新，保证了每一个key都是不一样的， 具体的业务可以去根据该mapping对应的value去判断，再去进行详细的业务操作。</li></ul></li></ul> <div class="language-solidity extra-class"><pre class="language-solidity"><code>   <span class="token comment">// 签收生成签收记录</span>
    <span class="token keyword">function</span> <span class="token function">courierToUserSign</span><span class="token punctuation">(</span><span class="token builtin">address</span> _from<span class="token punctuation">,</span><span class="token builtin">address</span> _to<span class="token punctuation">,</span><span class="token builtin">uint256</span> _isSign<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token function">IsCourier</span><span class="token punctuation">(</span>_from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 生成签收完成的订单记录</span>
        RecordCount<span class="token operator">++</span><span class="token punctuation">;</span>
        SignRecord <span class="token keyword">storage</span> _signRecord <span class="token operator">=</span> RecordMap<span class="token punctuation">[</span>RecordCount<span class="token punctuation">]</span><span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>record_id <span class="token operator">=</span> RecordCount<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>c_address <span class="token operator">=</span> _from<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>u_address <span class="token operator">=</span> _to<span class="token punctuation">;</span>
        _signRecord<span class="token punctuation">.</span>sign_time <span class="token operator">=</span> block<span class="token punctuation">.</span>timestamp<span class="token punctuation">;</span>
        
        SignRecordList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>RecordCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isSign <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 设置该用户已签收</span>
            UserIsSignStatus<span class="token punctuation">[</span>_to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 设置用户拒绝签收</span>
            UserIsSignStatus<span class="token punctuation">[</span>_to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">emit</span> <span class="token function">Refusal</span><span class="token punctuation">(</span>_to<span class="token punctuation">,</span>block<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">emit</span> <span class="token function">Signed</span><span class="token punctuation">(</span>_to<span class="token punctuation">,</span>_isSign<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 对物流进行售后</span>
    <span class="token keyword">function</span> <span class="token function">afterSales</span><span class="token punctuation">(</span><span class="token builtin">address</span> _from<span class="token punctuation">,</span><span class="token builtin">uint256</span> _isClaim<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">&quot;当前用户已经申请售后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_isClaim <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            UserIsClaimStatus<span class="token punctuation">[</span>_from<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-4-部署调用"><a href="#_6-4-部署调用" class="header-anchor">#</a> 6.4 部署调用</h3> <p>分别创建四个用户，2个快递员，2个用户。</p> <p>![截图 2023-08-17 20-29-45](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-29-45.png)</p> <p>在Delivery合约中我添加了初始化构造函数，默认注册了2个快递员和2个用户。</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code>    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token function">userRegister</span><span class="token punctuation">(</span><span class="token number">0x871c15e058f81906e9b7faea37b0023a3a13fdc6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">userRegister</span><span class="token punctuation">(</span><span class="token number">0x081ae64bb3e2d480b6dfd5b994451420ee58830e</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token function">courierRegister</span><span class="token punctuation">(</span><span class="token number">0x442234617ffb5e26892a8e329f42cf23dd9a0ff9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">courierRegister</span><span class="token punctuation">(</span><span class="token number">0xc3990fe75c7b2354b80fa0a90bb3cd7544101168</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
</code></pre></div><p>部署合约之后，调用enableParallel函数，开启两个函数允许并行执行。</p> <p>![截图 2023-08-17 20-40-10](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-40-10.png)</p> <p>调用courierToUserSign函数，courier1给user1用户签收。然后courier2给user2用户签收。签收状态码是0。</p> <p>![截图 2023-08-17 20-33-51](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-33-51.png)</p> <p>调用回执如下：</p> <p>![截图 2023-08-17 20-35-56](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-35-56.png)</p> <p>根据如上操作然后继续完成courier2对user2用户的签收。</p> <p>接下来调用selectSignRecordList函数，查看所有的签收记录情况。</p> <p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20230817203731156.png" alt="image-20230817203731156"></p> <p>如下是回执信息：</p> <p>![截图 2023-08-17 20-38-20](https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/截图 2023-08-17 20-38-20.png)</p> <blockquote><p>到这里肯定会有同学说： 你这才调用了2次啊？还是单次调用这样，并没有实现并行合约啊，并没有体现并行合约执行的效果。</p> <p>答疑：</p> <ul><li>其实这里需要多个客户端同时执行该函数，同时签收</li> <li>我们需要达到较高的TPS的情况下才能看到具体的效果</li></ul></blockquote> <h3 id="_6-5-java-sdk-模拟测试"><a href="#_6-5-java-sdk-模拟测试" class="header-anchor">#</a> 6.5 Java SDK 模拟测试</h3> <ul><li>这里使用的是Springboot编写的一个API接口http://localhost:8080/delivery/sign进行测试</li> <li>简单的使用了一下线程池模拟测试了一下并行合约的执行效率，我们需要调用enableParallel函数开启并行执行。</li></ul> <blockquote><p>也可以结合Java-SDK-Demo进行测试。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delivery&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeliveryController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DeliveryService</span> deliveryService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/sign&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">courierToUserSign</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 开启允许并行执行</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            deliveryService<span class="token punctuation">.</span><span class="token function">enableParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 直接批量注册用户和快递员</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> <span class="token function">initUserAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> courierList <span class="token operator">=</span> <span class="token function">initUserAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InitUserAndCourier</span><span class="token punctuation">(</span>userList<span class="token punctuation">,</span> courierList<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">ExecutorService</span> threadPool <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置线程池大小</span>
        <span class="token keyword">int</span> numTasks <span class="token operator">=</span> courierList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 任务数量</span>
        <span class="token keyword">int</span> numThreads <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 并发线程数</span>
        <span class="token keyword">int</span> tasksPerThread <span class="token operator">=</span> numTasks <span class="token operator">/</span> numThreads<span class="token punctuation">;</span> <span class="token comment">// 每个线程需要执行的任务数量</span>

        <span class="token comment">// 多个线程同时执行 模拟多快递员进行多用户的签收</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numThreads<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> startIdx <span class="token operator">=</span> i <span class="token operator">*</span> tasksPerThread<span class="token punctuation">;</span>
            <span class="token keyword">int</span> endIdx <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> numThreads <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> numTasks <span class="token operator">:</span> startIdx <span class="token operator">+</span> tasksPerThread<span class="token punctuation">;</span>

            threadPool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> startIdx<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> endIdx<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">DeliveryCourierToUserSignInputBO</span> signInputBO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeliveryCourierToUserSignInputBO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    signInputBO<span class="token punctuation">.</span><span class="token function">set_isSign</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    signInputBO<span class="token punctuation">.</span><span class="token function">set_from</span><span class="token punctuation">(</span>courierList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    signInputBO<span class="token punctuation">.</span><span class="token function">set_to</span><span class="token punctuation">(</span>userList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        deliveryService<span class="token punctuation">.</span><span class="token function">courierToUserSign</span><span class="token punctuation">(</span>signInputBO<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        threadPool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化用户和快递员</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token class-name">InitUserAndCourier</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userList<span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> courierList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 注册用户</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DeliveryUserRegisterInputBO</span> userRegisterInputBO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeliveryUserRegisterInputBO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userRegisterInputBO<span class="token punctuation">.</span><span class="token function">set_userAddress</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                deliveryService<span class="token punctuation">.</span><span class="token function">userRegister</span><span class="token punctuation">(</span>userRegisterInputBO<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 注册快递员</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> courierList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DeliveryCourierRegisterInputBO</span> courierRegisterInputBO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeliveryCourierRegisterInputBO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            courierRegisterInputBO<span class="token punctuation">.</span><span class="token function">set_courierAddress</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                deliveryService<span class="token punctuation">.</span><span class="token function">courierRegister</span><span class="token punctuation">(</span>courierRegisterInputBO<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化用户地址</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">initUserAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userAddressList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CryptoSuite</span> cryptoSuite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CryptoSuite</span><span class="token punctuation">(</span><span class="token class-name">CryptoType</span><span class="token punctuation">.</span><span class="token constant">ECDSA_TYPE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CryptoKeyPair</span> keyPair <span class="token operator">=</span> cryptoSuite<span class="token punctuation">.</span><span class="token function">createKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userAddressList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>keyPair<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> userAddressList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/CodeVault/pages/99df38/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Solidity智能合约大小限制优化方案</div></a> <a href="/CodeVault/pages/3d3086/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">一文搞懂Truffle测试</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/CodeVault/pages/99df38/" class="prev">Solidity智能合约大小限制优化方案</a></span> <span class="next"><a href="/CodeVault/pages/3d3086/">一文搞懂Truffle测试</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/CodeVault/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/CodeVault/pages/c936ca/"><div>
            学习文档
            <!----></div></a> <span class="date">11-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/CodeVault/pages/53f082/"><div>
            如何成为FISCO社区的MVP 总结篇
            <!----></div></a> <span class="date">11-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/CodeVault/pages/3d3086/"><div>
            一文搞懂Truffle测试
            <!----></div></a> <span class="date">11-28</span></dt></dl> <dl><dd></dd> <dt><a href="/CodeVault/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>YYzop & Hior | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/CodeVault/assets/js/app.ef278985.js" defer></script><script src="/CodeVault/assets/js/2.f96441c8.js" defer></script><script src="/CodeVault/assets/js/236.252b1f69.js" defer></script>
  </body>
</html>
