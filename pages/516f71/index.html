<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis详解 | CodeVault文档站</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/CodeVault/img/Aj.svg">
    <meta name="description" content="CodeVault一个记录云计算、云原生、Java开发的文档站。">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/CodeVault/assets/css/0.styles.bcdd6f38.css" as="style"><link rel="preload" href="/CodeVault/assets/js/app.ef278985.js" as="script"><link rel="preload" href="/CodeVault/assets/js/2.f96441c8.js" as="script"><link rel="preload" href="/CodeVault/assets/js/113.63efff87.js" as="script"><link rel="prefetch" href="/CodeVault/assets/js/10.0b981dbd.js"><link rel="prefetch" href="/CodeVault/assets/js/100.5c06c78f.js"><link rel="prefetch" href="/CodeVault/assets/js/101.88d67c9c.js"><link rel="prefetch" href="/CodeVault/assets/js/102.70928850.js"><link rel="prefetch" href="/CodeVault/assets/js/103.ef636770.js"><link rel="prefetch" href="/CodeVault/assets/js/104.c1927b63.js"><link rel="prefetch" href="/CodeVault/assets/js/105.85c8a7cd.js"><link rel="prefetch" href="/CodeVault/assets/js/106.fb2e66ea.js"><link rel="prefetch" href="/CodeVault/assets/js/107.0f35bf63.js"><link rel="prefetch" href="/CodeVault/assets/js/108.fccb735c.js"><link rel="prefetch" href="/CodeVault/assets/js/109.682036f0.js"><link rel="prefetch" href="/CodeVault/assets/js/11.ac4d24fe.js"><link rel="prefetch" href="/CodeVault/assets/js/110.b7f8edea.js"><link rel="prefetch" href="/CodeVault/assets/js/111.fd94666b.js"><link rel="prefetch" href="/CodeVault/assets/js/112.a07708f0.js"><link rel="prefetch" href="/CodeVault/assets/js/114.ab1099fa.js"><link rel="prefetch" href="/CodeVault/assets/js/115.f5fe6b28.js"><link rel="prefetch" href="/CodeVault/assets/js/116.6ce08e8e.js"><link rel="prefetch" href="/CodeVault/assets/js/117.48dbb04e.js"><link rel="prefetch" href="/CodeVault/assets/js/118.5b909be0.js"><link rel="prefetch" href="/CodeVault/assets/js/119.8f6e0bf7.js"><link rel="prefetch" href="/CodeVault/assets/js/12.c1e5feb4.js"><link rel="prefetch" href="/CodeVault/assets/js/120.21cc7ba5.js"><link rel="prefetch" href="/CodeVault/assets/js/121.04134de2.js"><link rel="prefetch" href="/CodeVault/assets/js/122.31567951.js"><link rel="prefetch" href="/CodeVault/assets/js/123.002f9bee.js"><link rel="prefetch" href="/CodeVault/assets/js/124.e99e860a.js"><link rel="prefetch" href="/CodeVault/assets/js/125.72c926b3.js"><link rel="prefetch" href="/CodeVault/assets/js/126.01a5e87f.js"><link rel="prefetch" href="/CodeVault/assets/js/127.1956ebe6.js"><link rel="prefetch" href="/CodeVault/assets/js/128.d65996f5.js"><link rel="prefetch" href="/CodeVault/assets/js/129.67eabc56.js"><link rel="prefetch" href="/CodeVault/assets/js/13.13f84e24.js"><link rel="prefetch" href="/CodeVault/assets/js/130.634c4ce3.js"><link rel="prefetch" href="/CodeVault/assets/js/131.a418f195.js"><link rel="prefetch" href="/CodeVault/assets/js/132.ea662f19.js"><link rel="prefetch" href="/CodeVault/assets/js/133.63b2b38b.js"><link rel="prefetch" href="/CodeVault/assets/js/134.0cd9f3da.js"><link rel="prefetch" href="/CodeVault/assets/js/135.4e8913a1.js"><link rel="prefetch" href="/CodeVault/assets/js/136.53ad8182.js"><link rel="prefetch" href="/CodeVault/assets/js/137.8d8f6ff4.js"><link rel="prefetch" href="/CodeVault/assets/js/138.1e5627de.js"><link rel="prefetch" href="/CodeVault/assets/js/139.4c335178.js"><link rel="prefetch" href="/CodeVault/assets/js/14.92742bc3.js"><link rel="prefetch" href="/CodeVault/assets/js/140.ad32a483.js"><link rel="prefetch" href="/CodeVault/assets/js/141.509650db.js"><link rel="prefetch" href="/CodeVault/assets/js/142.8a4692a4.js"><link rel="prefetch" href="/CodeVault/assets/js/143.4226943d.js"><link rel="prefetch" href="/CodeVault/assets/js/144.a04016d3.js"><link rel="prefetch" href="/CodeVault/assets/js/145.55b32ea3.js"><link rel="prefetch" href="/CodeVault/assets/js/146.d78a1fa5.js"><link rel="prefetch" href="/CodeVault/assets/js/147.c48fa78d.js"><link rel="prefetch" href="/CodeVault/assets/js/148.24a7cd95.js"><link rel="prefetch" href="/CodeVault/assets/js/149.a74e35f1.js"><link rel="prefetch" href="/CodeVault/assets/js/15.6953f44b.js"><link rel="prefetch" href="/CodeVault/assets/js/150.7f27817b.js"><link rel="prefetch" href="/CodeVault/assets/js/151.6445d326.js"><link rel="prefetch" href="/CodeVault/assets/js/152.eadc171d.js"><link rel="prefetch" href="/CodeVault/assets/js/153.2da9c7f8.js"><link rel="prefetch" href="/CodeVault/assets/js/154.a3546076.js"><link rel="prefetch" href="/CodeVault/assets/js/155.351a616f.js"><link rel="prefetch" href="/CodeVault/assets/js/156.e6bbf3b3.js"><link rel="prefetch" href="/CodeVault/assets/js/157.ee152deb.js"><link rel="prefetch" href="/CodeVault/assets/js/158.076e0f8c.js"><link rel="prefetch" href="/CodeVault/assets/js/159.9ad1744e.js"><link rel="prefetch" href="/CodeVault/assets/js/16.df859e45.js"><link rel="prefetch" href="/CodeVault/assets/js/160.c5beea39.js"><link rel="prefetch" href="/CodeVault/assets/js/161.0cf956e1.js"><link rel="prefetch" href="/CodeVault/assets/js/162.c58e81e1.js"><link rel="prefetch" href="/CodeVault/assets/js/163.63d65593.js"><link rel="prefetch" href="/CodeVault/assets/js/164.9626ab8a.js"><link rel="prefetch" href="/CodeVault/assets/js/165.fc09035b.js"><link rel="prefetch" href="/CodeVault/assets/js/166.b38be38b.js"><link rel="prefetch" href="/CodeVault/assets/js/167.8f5417ed.js"><link rel="prefetch" href="/CodeVault/assets/js/168.d636e649.js"><link rel="prefetch" href="/CodeVault/assets/js/169.dd84c459.js"><link rel="prefetch" href="/CodeVault/assets/js/17.a2971fe6.js"><link rel="prefetch" href="/CodeVault/assets/js/170.a488616f.js"><link rel="prefetch" href="/CodeVault/assets/js/171.a7896a98.js"><link rel="prefetch" href="/CodeVault/assets/js/172.90b58f0e.js"><link rel="prefetch" href="/CodeVault/assets/js/173.ce66d68a.js"><link rel="prefetch" href="/CodeVault/assets/js/174.d0a94b6a.js"><link rel="prefetch" href="/CodeVault/assets/js/175.87ea7df7.js"><link rel="prefetch" href="/CodeVault/assets/js/176.67abf34b.js"><link rel="prefetch" href="/CodeVault/assets/js/177.3b2acda5.js"><link rel="prefetch" href="/CodeVault/assets/js/178.5fe697a5.js"><link rel="prefetch" href="/CodeVault/assets/js/179.57349e36.js"><link rel="prefetch" href="/CodeVault/assets/js/18.45b06c71.js"><link rel="prefetch" href="/CodeVault/assets/js/180.a8b6136e.js"><link rel="prefetch" href="/CodeVault/assets/js/181.c96cb1ac.js"><link rel="prefetch" href="/CodeVault/assets/js/182.e13a2ed6.js"><link rel="prefetch" href="/CodeVault/assets/js/183.4982d955.js"><link rel="prefetch" href="/CodeVault/assets/js/184.123e3912.js"><link rel="prefetch" href="/CodeVault/assets/js/185.c1db2bfa.js"><link rel="prefetch" href="/CodeVault/assets/js/186.bff6dc40.js"><link rel="prefetch" href="/CodeVault/assets/js/187.3e10e06d.js"><link rel="prefetch" href="/CodeVault/assets/js/188.53f01570.js"><link rel="prefetch" href="/CodeVault/assets/js/189.53c9b973.js"><link rel="prefetch" href="/CodeVault/assets/js/19.21381c2f.js"><link rel="prefetch" href="/CodeVault/assets/js/190.f9e298a3.js"><link rel="prefetch" href="/CodeVault/assets/js/191.7055ec43.js"><link rel="prefetch" href="/CodeVault/assets/js/192.6083d608.js"><link rel="prefetch" href="/CodeVault/assets/js/193.72e5d099.js"><link rel="prefetch" href="/CodeVault/assets/js/194.cb4c2f87.js"><link rel="prefetch" href="/CodeVault/assets/js/195.add61432.js"><link rel="prefetch" href="/CodeVault/assets/js/196.cafb716f.js"><link rel="prefetch" href="/CodeVault/assets/js/197.29ad1cb1.js"><link rel="prefetch" href="/CodeVault/assets/js/198.1ca9886c.js"><link rel="prefetch" href="/CodeVault/assets/js/199.28f7095d.js"><link rel="prefetch" href="/CodeVault/assets/js/20.fe478246.js"><link rel="prefetch" href="/CodeVault/assets/js/200.cdd91d66.js"><link rel="prefetch" href="/CodeVault/assets/js/201.568571d0.js"><link rel="prefetch" href="/CodeVault/assets/js/202.0b55d1cd.js"><link rel="prefetch" href="/CodeVault/assets/js/203.c9d7036e.js"><link rel="prefetch" href="/CodeVault/assets/js/204.f877fa44.js"><link rel="prefetch" href="/CodeVault/assets/js/205.f7dcea25.js"><link rel="prefetch" href="/CodeVault/assets/js/206.266f6bb0.js"><link rel="prefetch" href="/CodeVault/assets/js/207.962cdf0e.js"><link rel="prefetch" href="/CodeVault/assets/js/208.dcbb7fb9.js"><link rel="prefetch" href="/CodeVault/assets/js/209.89cb12fb.js"><link rel="prefetch" href="/CodeVault/assets/js/21.1a17ddc5.js"><link rel="prefetch" href="/CodeVault/assets/js/210.442ced55.js"><link rel="prefetch" href="/CodeVault/assets/js/211.6d14fe33.js"><link rel="prefetch" href="/CodeVault/assets/js/212.65a1883d.js"><link rel="prefetch" href="/CodeVault/assets/js/213.21351702.js"><link rel="prefetch" href="/CodeVault/assets/js/214.bd781706.js"><link rel="prefetch" href="/CodeVault/assets/js/215.f30b644c.js"><link rel="prefetch" href="/CodeVault/assets/js/216.587501ff.js"><link rel="prefetch" href="/CodeVault/assets/js/217.8db2123f.js"><link rel="prefetch" href="/CodeVault/assets/js/218.aa6b1af6.js"><link rel="prefetch" href="/CodeVault/assets/js/219.2b27640b.js"><link rel="prefetch" href="/CodeVault/assets/js/22.7652d0d6.js"><link rel="prefetch" href="/CodeVault/assets/js/220.eafe6218.js"><link rel="prefetch" href="/CodeVault/assets/js/221.ab153f73.js"><link rel="prefetch" href="/CodeVault/assets/js/222.4f7df33b.js"><link rel="prefetch" href="/CodeVault/assets/js/223.6f5b1e03.js"><link rel="prefetch" href="/CodeVault/assets/js/224.6bed6414.js"><link rel="prefetch" href="/CodeVault/assets/js/225.03a64323.js"><link rel="prefetch" href="/CodeVault/assets/js/226.2db9dc4b.js"><link rel="prefetch" href="/CodeVault/assets/js/227.6e01bc51.js"><link rel="prefetch" href="/CodeVault/assets/js/228.d06cad32.js"><link rel="prefetch" href="/CodeVault/assets/js/229.3f46b203.js"><link rel="prefetch" href="/CodeVault/assets/js/23.8a5bbf3f.js"><link rel="prefetch" href="/CodeVault/assets/js/230.b84fd605.js"><link rel="prefetch" href="/CodeVault/assets/js/231.ca2e1834.js"><link rel="prefetch" href="/CodeVault/assets/js/232.e572f662.js"><link rel="prefetch" href="/CodeVault/assets/js/233.0a7e6deb.js"><link rel="prefetch" href="/CodeVault/assets/js/234.9dddbcb6.js"><link rel="prefetch" href="/CodeVault/assets/js/235.b4ed574b.js"><link rel="prefetch" href="/CodeVault/assets/js/236.252b1f69.js"><link rel="prefetch" href="/CodeVault/assets/js/237.c529d9c4.js"><link rel="prefetch" href="/CodeVault/assets/js/238.16da920c.js"><link rel="prefetch" href="/CodeVault/assets/js/239.14f7892d.js"><link rel="prefetch" href="/CodeVault/assets/js/24.1ca1bd80.js"><link rel="prefetch" href="/CodeVault/assets/js/240.d00a46df.js"><link rel="prefetch" href="/CodeVault/assets/js/25.43c779a1.js"><link rel="prefetch" href="/CodeVault/assets/js/26.bdfe293e.js"><link rel="prefetch" href="/CodeVault/assets/js/27.330c11f5.js"><link rel="prefetch" href="/CodeVault/assets/js/28.46dfe7f4.js"><link rel="prefetch" href="/CodeVault/assets/js/29.4fc19b1e.js"><link rel="prefetch" href="/CodeVault/assets/js/3.44fcbdc8.js"><link rel="prefetch" href="/CodeVault/assets/js/30.da1d9fd7.js"><link rel="prefetch" href="/CodeVault/assets/js/31.df871787.js"><link rel="prefetch" href="/CodeVault/assets/js/32.e62268d4.js"><link rel="prefetch" href="/CodeVault/assets/js/33.b2c675b0.js"><link rel="prefetch" href="/CodeVault/assets/js/34.461e2f23.js"><link rel="prefetch" href="/CodeVault/assets/js/35.2666157f.js"><link rel="prefetch" href="/CodeVault/assets/js/36.b55a4b34.js"><link rel="prefetch" href="/CodeVault/assets/js/37.556ba5c1.js"><link rel="prefetch" href="/CodeVault/assets/js/38.8c982590.js"><link rel="prefetch" href="/CodeVault/assets/js/39.a7850266.js"><link rel="prefetch" href="/CodeVault/assets/js/4.8a0557a7.js"><link rel="prefetch" href="/CodeVault/assets/js/40.9a11a440.js"><link rel="prefetch" href="/CodeVault/assets/js/41.c3a71e10.js"><link rel="prefetch" href="/CodeVault/assets/js/42.7e9779c1.js"><link rel="prefetch" href="/CodeVault/assets/js/43.e017fec5.js"><link rel="prefetch" href="/CodeVault/assets/js/44.22c5aef3.js"><link rel="prefetch" href="/CodeVault/assets/js/45.dfe95d23.js"><link rel="prefetch" href="/CodeVault/assets/js/46.10af373d.js"><link rel="prefetch" href="/CodeVault/assets/js/47.a1e4779a.js"><link rel="prefetch" href="/CodeVault/assets/js/48.3142bf91.js"><link rel="prefetch" href="/CodeVault/assets/js/49.08546fe2.js"><link rel="prefetch" href="/CodeVault/assets/js/5.1bad1047.js"><link rel="prefetch" href="/CodeVault/assets/js/50.75c37eaf.js"><link rel="prefetch" href="/CodeVault/assets/js/51.b2f39f65.js"><link rel="prefetch" href="/CodeVault/assets/js/52.97fc3d07.js"><link rel="prefetch" href="/CodeVault/assets/js/53.1a2a51df.js"><link rel="prefetch" href="/CodeVault/assets/js/54.09f7dfd6.js"><link rel="prefetch" href="/CodeVault/assets/js/55.d112e5e2.js"><link rel="prefetch" href="/CodeVault/assets/js/56.b7b00837.js"><link rel="prefetch" href="/CodeVault/assets/js/57.5beac805.js"><link rel="prefetch" href="/CodeVault/assets/js/58.04f116f1.js"><link rel="prefetch" href="/CodeVault/assets/js/59.d660a6b3.js"><link rel="prefetch" href="/CodeVault/assets/js/6.7220274d.js"><link rel="prefetch" href="/CodeVault/assets/js/60.54783427.js"><link rel="prefetch" href="/CodeVault/assets/js/61.6e520517.js"><link rel="prefetch" href="/CodeVault/assets/js/62.78b5acff.js"><link rel="prefetch" href="/CodeVault/assets/js/63.0492d6b3.js"><link rel="prefetch" href="/CodeVault/assets/js/64.bd2a8518.js"><link rel="prefetch" href="/CodeVault/assets/js/65.8acc8c15.js"><link rel="prefetch" href="/CodeVault/assets/js/66.c2dc1d15.js"><link rel="prefetch" href="/CodeVault/assets/js/67.d584fc60.js"><link rel="prefetch" href="/CodeVault/assets/js/68.7221e725.js"><link rel="prefetch" href="/CodeVault/assets/js/69.f1a4c42c.js"><link rel="prefetch" href="/CodeVault/assets/js/7.ee190d28.js"><link rel="prefetch" href="/CodeVault/assets/js/70.8fb27ce3.js"><link rel="prefetch" href="/CodeVault/assets/js/71.2011297a.js"><link rel="prefetch" href="/CodeVault/assets/js/72.81904f20.js"><link rel="prefetch" href="/CodeVault/assets/js/73.cae4a206.js"><link rel="prefetch" href="/CodeVault/assets/js/74.41ca332e.js"><link rel="prefetch" href="/CodeVault/assets/js/75.ae7006ef.js"><link rel="prefetch" href="/CodeVault/assets/js/76.8477b765.js"><link rel="prefetch" href="/CodeVault/assets/js/77.ae764f14.js"><link rel="prefetch" href="/CodeVault/assets/js/78.b47518b4.js"><link rel="prefetch" href="/CodeVault/assets/js/79.bde0466f.js"><link rel="prefetch" href="/CodeVault/assets/js/8.e3ab8186.js"><link rel="prefetch" href="/CodeVault/assets/js/80.94af34f8.js"><link rel="prefetch" href="/CodeVault/assets/js/81.f1ba0edc.js"><link rel="prefetch" href="/CodeVault/assets/js/82.4485e21e.js"><link rel="prefetch" href="/CodeVault/assets/js/83.940dbcc3.js"><link rel="prefetch" href="/CodeVault/assets/js/84.6be8c64a.js"><link rel="prefetch" href="/CodeVault/assets/js/85.aa147bd8.js"><link rel="prefetch" href="/CodeVault/assets/js/86.0259d757.js"><link rel="prefetch" href="/CodeVault/assets/js/87.c88b420b.js"><link rel="prefetch" href="/CodeVault/assets/js/88.38f98c94.js"><link rel="prefetch" href="/CodeVault/assets/js/89.421840d7.js"><link rel="prefetch" href="/CodeVault/assets/js/9.cb249ed0.js"><link rel="prefetch" href="/CodeVault/assets/js/90.cd9b70c8.js"><link rel="prefetch" href="/CodeVault/assets/js/91.0c040f15.js"><link rel="prefetch" href="/CodeVault/assets/js/92.1ea436cf.js"><link rel="prefetch" href="/CodeVault/assets/js/93.7de38599.js"><link rel="prefetch" href="/CodeVault/assets/js/94.f2ad5a97.js"><link rel="prefetch" href="/CodeVault/assets/js/95.22f940d7.js"><link rel="prefetch" href="/CodeVault/assets/js/96.6a991248.js"><link rel="prefetch" href="/CodeVault/assets/js/97.aeccee85.js"><link rel="prefetch" href="/CodeVault/assets/js/98.79db6c16.js"><link rel="prefetch" href="/CodeVault/assets/js/99.aa13c9cb.js">
    <link rel="stylesheet" href="/CodeVault/assets/css/0.styles.bcdd6f38.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CodeVault/" class="home-link router-link-active"><img src="/CodeVault/img/huli.svg" alt="CodeVault文档站" class="logo"> <span class="site-name can-hide">CodeVault文档站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CodeVault/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈开发" class="dropdown-title"><a href="/CodeVault/pages/d1eaf8/" class="link-title">全栈开发</a> <span class="title" style="display:none;">全栈开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云计算运维</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/d1eaf8/" class="nav-link">云计算</a></li></ul></li><li class="dropdown-item"><h4>容器开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/e820a7/" class="nav-link">容器</a></li></ul></li><li class="dropdown-item"><h4>K8S虚拟化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/da2470/" class="nav-link">容器虚拟化</a></li></ul></li><li class="dropdown-item"><h4>运维高级篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/ce761d/" class="nav-link">高可用</a></li></ul></li><li class="dropdown-item"><h4>前端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">前端常用</a></li></ul></li><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">后端常用</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/CodeVault/pages/e4db9d/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/e4db9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/c936ca/" class="nav-link">学习文档资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><a href="/CodeVault/pages/f24c41/" class="link-title">学习路线</a> <span class="title" style="display:none;">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f24c41/" class="nav-link">后端学习路线</a></li></ul></li><li class="dropdown-item"><h4>Web3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1583d1/" class="nav-link">区块链学习路线</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/CodeVault/pages/6ffa63/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML5+CSS3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/6ffa63/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/b23e0c/" class="nav-link">CSS3</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/0e8324/" class="nav-link">JavaScript开篇</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/4d9ec9/" class="nav-link">JavaScript面向对象</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0505ad/" class="nav-link">JavaScript DOM</a></li></ul></li><li class="dropdown-item"><h4>API</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/845076/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9c8e93/" class="nav-link">Ajax</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Axios</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/a1209f/" class="nav-link">Vuejs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/CodeVault/pages/5e1c7d/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/5e1c7d/" class="nav-link">Java进阶</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9b262c/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3e651a/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>Golang</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/135518/" class="nav-link">Beego</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gin</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gorm</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/CodeVault/pages/7ef2c7/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/7ef2c7/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/516f71/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Redis</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1eaa9a/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1ac9b2/" class="nav-link">Ceph</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/719244/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/6ec6ec/" class="nav-link">Istio</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/30e340/" class="nav-link">Prometheus</a></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/32fd53/" class="nav-link">Docker</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="K8S" class="dropdown-title"><a href="/CodeVault/pages/46159d/" class="link-title">K8S</a> <span class="title" style="display:none;">K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云原生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/46159d/" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f87a46/" class="nav-link">CKS认证</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/2d432e/" class="nav-link">Operator</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/f6f110/" class="nav-link">CI/CD</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/CodeVault/pages/f9fa7a/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f9fa7a/" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/314d26/" class="nav-link">Kvm</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/44e450/" class="nav-link">Ansible</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/8292d8/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="区块链" class="dropdown-title"><a href="/CodeVault/pages/f3ea9f/" class="link-title">区块链</a> <span class="title" style="display:none;">区块链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>FISCO BCOS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f3ea9f/" class="nav-link">WeBASE搭建</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛上</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/685f1f/" class="nav-link">碳排放解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3f1596/" class="nav-link">慈善公益解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cc43be/" class="nav-link">构造交易传入AppID</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/75ddc8/" class="nav-link">合约时间触发器</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9bcc7c/" class="nav-link">一键部署环境脚本</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a93fcf/" class="nav-link">合约调用机制与并行合约</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛下</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1fdb40/" class="nav-link">DDCMS后端容器化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/795b78/" class="nav-link">DDCMS第三方登录</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a99040/" class="nav-link">DDCMS智能合约设计</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cb310d/" class="nav-link">DDCMS部署和运维</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0b1c5a/" class="nav-link">DDCMS接口报错</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/99df38/" class="nav-link">合约大小限制优化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f8a343/" class="nav-link">并行合约最佳实践</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3d3086/" class="nav-link">一文搞懂Truffle测试</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/e3d908/" class="nav-link">记录</a></div> <a href="https://github.com/CN-ZHANGYH/CodeVault" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/CodeVault/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈开发" class="dropdown-title"><a href="/CodeVault/pages/d1eaf8/" class="link-title">全栈开发</a> <span class="title" style="display:none;">全栈开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云计算运维</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/d1eaf8/" class="nav-link">云计算</a></li></ul></li><li class="dropdown-item"><h4>容器开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/e820a7/" class="nav-link">容器</a></li></ul></li><li class="dropdown-item"><h4>K8S虚拟化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/da2470/" class="nav-link">容器虚拟化</a></li></ul></li><li class="dropdown-item"><h4>运维高级篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/ce761d/" class="nav-link">高可用</a></li></ul></li><li class="dropdown-item"><h4>前端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">前端常用</a></li></ul></li><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">后端常用</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源" class="dropdown-title"><a href="/CodeVault/pages/e4db9d/" class="link-title">资源</a> <span class="title" style="display:none;">资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/e4db9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/c936ca/" class="nav-link">学习文档资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><a href="/CodeVault/pages/f24c41/" class="link-title">学习路线</a> <span class="title" style="display:none;">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f24c41/" class="nav-link">后端学习路线</a></li></ul></li><li class="dropdown-item"><h4>Web3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1583d1/" class="nav-link">区块链学习路线</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/CodeVault/pages/6ffa63/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML5+CSS3</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/6ffa63/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/b23e0c/" class="nav-link">CSS3</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/0e8324/" class="nav-link">JavaScript开篇</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/4d9ec9/" class="nav-link">JavaScript面向对象</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0505ad/" class="nav-link">JavaScript DOM</a></li></ul></li><li class="dropdown-item"><h4>API</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/845076/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9c8e93/" class="nav-link">Ajax</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Axios</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/a1209f/" class="nav-link">Vuejs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/CodeVault/pages/5e1c7d/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/5e1c7d/" class="nav-link">Java进阶</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9b262c/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3e651a/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>Golang</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/135518/" class="nav-link">Beego</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gin</a></li><li class="dropdown-subitem"><a href="/CodeVault/" class="nav-link">Gorm</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/CodeVault/pages/7ef2c7/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CodeVault/pages/7ef2c7/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/516f71/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Redis</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1eaa9a/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/1ac9b2/" class="nav-link">Ceph</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/719244/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/6ec6ec/" class="nav-link">Istio</a></li><li class="dropdown-item"><!----> <a href="/CodeVault/pages/30e340/" class="nav-link">Prometheus</a></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/32fd53/" class="nav-link">Docker</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="K8S" class="dropdown-title"><a href="/CodeVault/pages/46159d/" class="link-title">K8S</a> <span class="title" style="display:none;">K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>云原生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/46159d/" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f87a46/" class="nav-link">CKS认证</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/2d432e/" class="nav-link">Operator</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/f6f110/" class="nav-link">CI/CD</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/CodeVault/pages/f9fa7a/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f9fa7a/" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/314d26/" class="nav-link">Kvm</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/44e450/" class="nav-link">Ansible</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/8292d8/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="区块链" class="dropdown-title"><a href="/CodeVault/pages/f3ea9f/" class="link-title">区块链</a> <span class="title" style="display:none;">区块链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>FISCO BCOS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/f3ea9f/" class="nav-link">WeBASE搭建</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛上</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/685f1f/" class="nav-link">碳排放解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3f1596/" class="nav-link">慈善公益解决方案</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cc43be/" class="nav-link">构造交易传入AppID</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/75ddc8/" class="nav-link">合约时间触发器</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/9bcc7c/" class="nav-link">一键部署环境脚本</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a93fcf/" class="nav-link">合约调用机制与并行合约</a></li></ul></li><li class="dropdown-item"><h4>2023年TASK挑战赛下</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/CodeVault/pages/1fdb40/" class="nav-link">DDCMS后端容器化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/795b78/" class="nav-link">DDCMS第三方登录</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/a99040/" class="nav-link">DDCMS智能合约设计</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/cb310d/" class="nav-link">DDCMS部署和运维</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/0b1c5a/" class="nav-link">DDCMS接口报错</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/99df38/" class="nav-link">合约大小限制优化</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/f8a343/" class="nav-link">并行合约最佳实践</a></li><li class="dropdown-subitem"><a href="/CodeVault/pages/3d3086/" class="nav-link">一文搞懂Truffle测试</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/CodeVault/pages/e3d908/" class="nav-link">记录</a></div> <a href="https://github.com/CN-ZHANGYH/CodeVault" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>基础教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/7ef2c7/" class="sidebar-link">MySQL安装</a></li><li><a href="/CodeVault/pages/b1d838/" class="sidebar-link">MySQL概述</a></li><li><a href="/CodeVault/pages/fbb36b/" class="sidebar-link">MySQL的SQL详解</a></li><li><a href="/CodeVault/pages/a1d62a/" class="sidebar-link">MySQL的函数</a></li><li><a href="/CodeVault/pages/d89c01/" class="sidebar-link">MySQL的约束</a></li><li><a href="/CodeVault/pages/b6194d/" class="sidebar-link">MySQL多表查询</a></li><li><a href="/CodeVault/pages/ec27a2/" class="sidebar-link">MySQL的事务</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>进阶教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/b4b939/" class="sidebar-link">MySQL的存储引擎和索引</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>MySQL日常</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/20a0c8/" class="sidebar-link">Ubuntu20.04 MySQL8远程登录</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/516f71/" aria-current="page" class="active sidebar-link">Redis详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_1-nosql数据库" class="sidebar-link">1.NoSql数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_1-1-nosql数据库介绍" class="sidebar-link">1.1 NoSQL数据库介绍</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_1-2-nosql适用场景" class="sidebar-link">1.2 NoSQL适用场景</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_1-3-redis概述" class="sidebar-link">1.3 Redis概述</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_1-4-redis的架构" class="sidebar-link">1.4 Redis的架构</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_2-redis的安装" class="sidebar-link">2. Redis的安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_2-1编写dockerfile" class="sidebar-link">2.1编写Dockerfile</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_2-2-配置compose" class="sidebar-link">2.2 配置Compose</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_2-3-部署查看状态" class="sidebar-link">2.3 部署查看状态</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_2-4-redis键-key" class="sidebar-link">2.4 Redis键(key)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_3-数据类型" class="sidebar-link">3. 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-1-redis字符串-string" class="sidebar-link">3.1 Redis字符串(String)</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-2-字符串常用命令" class="sidebar-link">3.2 字符串常用命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-3-redis列表-list" class="sidebar-link">3.3 Redis列表(List)</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-4-列表常用命令" class="sidebar-link">3.4 列表常用命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-5-redis-集合-set" class="sidebar-link">3.5 Redis 集合(Set)</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-6-集合的常用命令" class="sidebar-link">3.6 集合的常用命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-7-redis哈希-hash" class="sidebar-link">3.7 Redis哈希(Hash)</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-8-哈希常用命令" class="sidebar-link">3.8 哈希常用命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-9-redis-有序集合-zset" class="sidebar-link">3.9 Redis 有序集合 Zset</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_3-10-zset的常用命令" class="sidebar-link">3.10 zset的常用命令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_4-redis的配置文件详解" class="sidebar-link">4. Redis的配置文件详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_4-1-units单位" class="sidebar-link">4.1 Units单位</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_4-2-网络相关配置" class="sidebar-link">4.2 网络相关配置</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_4-3-general通用" class="sidebar-link">4.3 GENERAL通用</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_4-4-security安全" class="sidebar-link">4.4 SECURITY安全</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_5-redis的发布和订阅" class="sidebar-link">5. Redis的发布和订阅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_5-1-什么是发布和订阅" class="sidebar-link">5.1 什么是发布和订阅</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_5-2-redis的发布订阅" class="sidebar-link">5.2 Redis的发布订阅</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/CodeVault/pages/516f71/#_6-新数据类型" class="sidebar-link">6. 新数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-1-bitmaps-位操作字符串" class="sidebar-link">6.1 Bitmaps：位操作字符串</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-2-简介" class="sidebar-link">6.2 简介</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-3-常用命令" class="sidebar-link">6.3 常用命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-4-bitmaps与set比较" class="sidebar-link">6.4 bitmaps与set比较</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-5-hyperloglog" class="sidebar-link">6.5 HyperLoglog</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-6-简介" class="sidebar-link">6.6 简介</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-7-命令" class="sidebar-link">6.7 命令</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-8-geographic" class="sidebar-link">6.8 Geographic</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-9-简介" class="sidebar-link">6.9 简介</a></li><li class="sidebar-sub-header level3"><a href="/CodeVault/pages/516f71/#_6-10-命令" class="sidebar-link">6.10 命令</a></li></ul></li></ul></li><li><a href="/CodeVault/pages/2d9f22/" class="sidebar-link">SpringBoot整合Redis</a></li><li><a href="/CodeVault/pages/b090ab/" class="sidebar-link">Redis事务和锁机制</a></li><li><a href="/CodeVault/pages/30c858/" class="sidebar-link">Redis应用问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/1eaa9a/" class="sidebar-link">Nginx相关概念</a></li><li><a href="/CodeVault/pages/ed04cf/" class="sidebar-link">Nginx反向代理</a></li><li><a href="/CodeVault/pages/e62533/" class="sidebar-link">Nginx负载均衡</a></li><li><a href="/CodeVault/pages/77a980/" class="sidebar-link">Nginx动静分离</a></li><li><a href="/CodeVault/pages/61acb1/" class="sidebar-link">Nginx高可用</a></li><li><a href="/CodeVault/pages/d3565a/" class="sidebar-link">Nginx的虚拟主机和域名解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Ceph</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/1ac9b2/" class="sidebar-link">Ceph部署(14.2.0 nautilus版)</a></li><li><a href="/CodeVault/pages/4d7a5e/" class="sidebar-link">基于Rook构建Ceph云原生存储</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Elasticsearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/719244/" class="sidebar-link">Elasticsearch教程</a></li><li><a href="/CodeVault/pages/218cd6/" class="sidebar-link">SpringBoot整合ES</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Istio</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/6ec6ec/" class="sidebar-link">Istio概述</a></li><li><a href="/CodeVault/pages/824f20/" class="sidebar-link">Istio安装</a></li><li><a href="/CodeVault/pages/42e0d6/" class="sidebar-link">Istio由浅入深</a></li><li><a href="/CodeVault/pages/14e323/" class="sidebar-link">Istio练习题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Prometheuse</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CodeVault/pages/30e340/" class="sidebar-link">Prometheus + Grafana监控</a></li><li><a href="/CodeVault/pages/5bec87/" class="sidebar-link">Prometheus+Grafana+Docker</a></li><li><a href="/CodeVault/pages/ae94b7/" class="sidebar-link">Prometheus+Grafana+Kubernetes</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/CodeVault/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>中间件</span></li><li data-v-06225672><span data-v-06225672>Redis</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/cn-zhangyh" target="_blank" title="作者" class="beLink" data-v-06225672>Yyzop</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Redis详解<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="redis的详解"><a href="#redis的详解" class="header-anchor">#</a> Redis的详解</h1> <h2 id="_1-nosql数据库"><a href="#_1-nosql数据库" class="header-anchor">#</a> 1.NoSql数据库</h2> <h3 id="_1-1-nosql数据库介绍"><a href="#_1-1-nosql数据库介绍" class="header-anchor">#</a> 1.1 NoSQL数据库介绍</h3> <p>NoSQL(NoSQL = <code>Not Only SQL</code>),意思即是“不仅仅是SQL”，泛指<code>非关系型的数据库</code> NoSQL不依赖业务逻辑方式存储，而似简单的<code>key-value</code>模式存储。因此大大的增加了数据库的扩展能力。</p> <ul><li>不遵循SQL标准</li> <li>不支持ACID</li> <li>超远于SQL的性能</li></ul> <h3 id="_1-2-nosql适用场景"><a href="#_1-2-nosql适用场景" class="header-anchor">#</a> 1.2 NoSQL适用场景</h3> <ul><li>对数据高并发的读写</li> <li>海量数据的读写</li> <li>对数据高可扩展性的</li></ul> <h3 id="_1-3-redis概述"><a href="#_1-3-redis概述" class="header-anchor">#</a> 1.3 Redis概述</h3> <ul><li><p>Redis 是一个开源的 key-value 存储系统。</p></li> <li><p>和 Memcached 类似，它支持存储的 value 类型相对更多，包括 <code>string</code> (字符串)、<code>list</code> (链表)、<code>set</code> (集合)、<code>zset</code> (<code>sorted set –</code>有序集合) 和 <code>hash</code>（哈希类型）。</p></li> <li><p>这些数据类型都支持 <code>push/pop、add/remove</code> 及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。</p></li> <li><p>在此基础上，Redis 支持各种不同方式的排序。</p></li> <li><p>与 memcached 一样，为了保证效率，数据都是缓存在内存中。</p></li> <li><p>区别的是 Redis 会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件。</p></li> <li><p>并且在此基础上实现了 <code>master-slave (主从)</code> 同步。</p></li></ul> <p><strong>应用场景</strong></p> <p>配合关系型数据库做高速缓存</p> <ul><li>高频次，热门访问的数据，降低数据库 IO。</li> <li>分布式架构，做 session 共享。</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618162745983.png" alt="img"></p> <p>多样的数据结构存储持久化数据</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618160101040.png" alt="image-20210618160101040"></p> <h3 id="_1-4-redis的架构"><a href="#_1-4-redis的架构" class="header-anchor">#</a> 1.4 Redis的架构</h3> <p><code>Redis 使用的是单线程 + 多路 IO 复用技术：</code></p> <p>多路复用是指使用一个线程来检查多个文件描述符（Socket）的就绪状态，比如调用 select 和 poll 函数，传入多个文件描述符，如果有一个文件描述符就绪，则返回，否则阻塞直到超时。得到就绪状态后进行真正的操作可以在同一个线程里执行，也可以启动线程执行（比如使用线程池）。</p> <p><code>串行 vs 多线程 + 锁（memcached）</code> vs <code>单线程 + 多路 IO 复用 (Redis)</code>（与 Memcache 三点不同：支持多数据类型，支持持久化，单线程 + 多路 IO 复用） 。</p> <p>相关的知识：</p> <ol><li>默认16个数据库，类似数组下标从0开始，初始默认使用0号库</li> <li>使用命令<code>select &lt;dbid&gt;</code>来切换数据库。</li> <li>统一密码管理，所有库同样密码</li> <li><code>dbsize</code>查看当前数据库的key的数量</li> <li><code>flushdb</code>清空当前数据库</li> <li><code>flushall</code>通杀全部库</li></ol> <h2 id="_2-redis的安装"><a href="#_2-redis的安装" class="header-anchor">#</a> 2. Redis的安装</h2> <p>这里的Redis使用的是Docker的环境安装，如果不考虑Redis的分布式集群以及哨兵的问题，可以使用Docker的方式 启动Redis，我这里使用的是CentOS的镜像手写Dockerfile的方式使用Docker-compose的方式管理Redis。</p> <h3 id="_2-1编写dockerfile"><a href="#_2-1编写dockerfile" class="header-anchor">#</a> 2.1编写Dockerfile</h3> <p>使用的是CentOS的yum源，这样安装的Redis随时可以删除也可以重新安装。</p> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> centos:centos7.9.2009</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Chinaskills </span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -rf /etc/yum.repos.d/*</span>
<span class="token instruction"><span class="token keyword">COPY</span> local.repo /etc/yum.repos.d/</span>
<span class="token instruction"><span class="token keyword">COPY</span> yum /root/yum</span>
<span class="token instruction"><span class="token keyword">RUN</span> yum -y install redis</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">'s/127.0.0.1/0.0.0.0/g'</span> /etc/redis.conf &amp;&amp; <span class="token operator">\</span>
   sed -i <span class="token string">'s/protected-mode yes/protected-mode no/g'</span> /etc/redis.conf</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 6379</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;/usr/bin/redis-server&quot;</span>,<span class="token string">&quot;/etc/redis.conf&quot;</span>]</span>
</code></pre></div><h3 id="_2-2-配置compose"><a href="#_2-2-配置compose" class="header-anchor">#</a> 2.2 配置Compose</h3> <p>使用docker-compose的方式管理Redis会方便很多，很好运维。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.0&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">Redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>v1.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>nosql 
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;6379:6379&quot;</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always 
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> redis
</code></pre></div><h3 id="_2-3-部署查看状态"><a href="#_2-3-部署查看状态" class="header-anchor">#</a> 2.3 部署查看状态</h3> <p>在后台将镜像跑起来之后，可以进入容器操作。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@administrator:~/redis<span class="token comment"># docker-compose up -d</span>
root@administrator:~/redis<span class="token comment"># docker-compose ps </span>
   Name                  Command               State                 Ports              
----------------------------------------------------------------------------------------
redis-nosql   /usr/bin/redis-server /etc <span class="token punctuation">..</span>.   Up      <span class="token number">0.0</span>.0.0:6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp,:::6379-<span class="token operator">&gt;</span><span class="token number">6</span>
                                                       <span class="token number">379</span>/tcp   
                                                       
                                                       
root@administrator:~/redis<span class="token comment"># docker exec -it redis-nosql /bin/bash</span>
<span class="token punctuation">[</span>root@redis /<span class="token punctuation">]</span><span class="token comment"># redis-cli</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre></div><h3 id="_2-4-redis键-key"><a href="#_2-4-redis键-key" class="header-anchor">#</a> 2.4 Redis键(key)</h3> <ul><li><code>keys *</code> 查看当前所有的key <code>(匹配： keys *1)</code></li> <li><code>exists key</code> 判断某个key是否存在</li> <li><code>type key</code> 查看你的key是什么类型</li> <li><code>del key</code> 删除value选择非阻塞删除</li> <li>仅将keys从keyspace元数据中删除，真正的删除会在后续异步操作。</li> <li><code>expire key 10</code> 10秒钟： 为给定的key设置国企时间</li> <li><code>ttl key</code> 查看还有多少秒过期 , -1表示永远不过期，-表示已经过期</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查看所有的key</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;ke2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key3&quot;</span>

<span class="token comment"># 判断是否存在</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists ke2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

<span class="token comment"># 查看当前的key的类型</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> ke2
string

<span class="token comment"># 删除当前的key</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> del ke2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key3&quot;</span>

<span class="token comment"># 设置当前的key过期时间</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> expire key3 <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl key3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl key3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span>
</code></pre></div><h2 id="_3-数据类型"><a href="#_3-数据类型" class="header-anchor">#</a> 3. 数据类型</h2> <h3 id="_3-1-redis字符串-string"><a href="#_3-1-redis字符串-string" class="header-anchor">#</a> 3.1 Redis字符串(String)</h3> <p><strong>概述</strong></p> <ul><li><p>String 是 Redis 最基本的类型，你可以理解成与 Memcached 一模一样的类型，一个 key 对应一个 value。</p></li> <li><p>String 类型是二进制安全的。意味着 Redis 的 string 可以包含任何数据。比如 jpg 图片或者序列化的对象。</p></li> <li><p>String 类型是 Redis 最基本的数据类型，一个 Redis 中字符串 value 最多可以是 512M。</p></li></ul> <p>数据结构
String 的数据结构为简单动态字符串 (Simple Dynamic String, 缩写 SDS)，是可以修改的字符串，内部结构实现上类似于 Java 的 ArrayList，采用预分配冗余空间的方式来减少内存的频繁分配.</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618162745983.png" alt="image-20210618162745983"></p> <p>如图中所示，内部为当前字符串实际分配的空间 capacity 一般要高于实际字符串长度 len。当字符串长度小于 1M 时，扩容都是加倍现有的空间，如果超过 1M，扩容时一次只会多扩 1M 的空间。需要注意的是字符串最大长度为 512M。</p> <h3 id="_3-2-字符串常用命令"><a href="#_3-2-字符串常用命令" class="header-anchor">#</a> 3.2 字符串常用命令</h3> <p>1.添加键值对</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">set</span> <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> 添加键值对

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key value <span class="token punctuation">[</span>EX seconds<span class="token punctuation">]</span> <span class="token punctuation">[</span>PX milliseconds<span class="token punctuation">]</span> <span class="token punctuation">[</span>NX<span class="token operator">|</span>XX<span class="token punctuation">]</span>
- NX: 当数据库中的key不存在时，可以将key-value添加数据库
- XX: 当数据库中的key存在时，可以将key-value添加数据库，与NX参数互斥
- EX：key的超时参数
- PX：key的超时毫秒数，与EX互斥
</code></pre></div><p>2.查询对应键值</p> <div class="language- extra-class"><pre class="language-text"><code>get &lt;key&gt;
</code></pre></div><p>实例:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 <span class="token number">100</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 <span class="token number">200</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1 
<span class="token string">&quot;100&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k2
<span class="token string">&quot;200&quot;</span>
</code></pre></div><p>3.将给定的value追加到原值的末尾</p> <div class="language-shell extra-class"><pre class="language-shell"><code>append <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> 
</code></pre></div><p>4.获取key的长度</p> <div class="language-shell extra-class"><pre class="language-shell"><code>strlen <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>5.只有key不存在的时候，设置key的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>setnx <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#  查询当前的所有键值对</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append k1 abc
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">&quot;100abc&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen k1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx k3 <span class="token number">300</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

<span class="token comment"># 这里可以看到k2无法再设置key的值</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx k2 <span class="token number">200</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><p>6.将key中存储的数字增值1，只能对数字值操作，如果为空，新增值为1</p> <div class="language-shell extra-class"><pre class="language-shell"><code>incr <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>7.将key中存储的数字值减1，只能对数字值操作，如果为空，新增值为-1</p> <div class="language-shell extra-class"><pre class="language-shell"><code>decr <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>8.将key中存储的数字值增减，自定义步长</p> <div class="language-shell extra-class"><pre class="language-shell"><code>incrby/decrby <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>步长<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr k2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">201</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr k2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">200</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby k2 <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">210</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby k2 <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">200</span>
</code></pre></div><p>9.同时设置一个或多个key和value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mset <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>10.同时获取一个或多个value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>msetnx <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre></div><blockquote><p>注意： 同时设置一个或者多个key-value对，当前仅当所有给定的key都不存在。</p></blockquote> <p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset k4 v1 k5 v2 k6 v3
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;k6&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;k5&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;k4&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget k4 k5 k6
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
</code></pre></div><p>11.获取值的范围，类似java的substring，前包，后包</p> <div class="language-shell extra-class"><pre class="language-shell"><code>getrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>起始位置<span class="token operator">&gt;</span><span class="token operator">&lt;</span>结束位置<span class="token operator">&gt;</span>
</code></pre></div><p>12.用value覆写key所存储的字符串值，从起始位置开始（索引从0开始）</p> <div class="language-shell extra-class"><pre class="language-shell"><code>setrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>起始位置<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key7 abcdefg
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getrange key7 <span class="token number">0</span> <span class="token number">3</span>
<span class="token string">&quot;abcd&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setrange key7 <span class="token number">3</span> <span class="token number">666</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key7
<span class="token string">&quot;abc666g&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre></div><p>13.设置键值的同时，设置过期时间，单位秒</p> <div class="language-shell extra-class"><pre class="language-shell"><code>setex <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>过期时间<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>14.以新换旧，设置了新值同时获得旧的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>getset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex key8 <span class="token number">5</span> v8
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset key7 abc
<span class="token string">&quot;abc666g&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key7
<span class="token string">&quot;abc&quot;</span>
</code></pre></div><h3 id="_3-3-redis列表-list"><a href="#_3-3-redis列表-list" class="header-anchor">#</a> 3.3 Redis列表(List)</h3> <p><strong>概述</strong></p> <p>单键多值： Redis列表是简单的字符串列表，按照插入顺序排序，你可以添加一个元素到列表的头部（左边）或者尾部（右边）。它的底层实际是个<code>双向链表</code>，对两端的操作性能很高，通过索引下标的操作中间的节点性能会较差。</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618163018649.png" alt="image-20210618163018649"></p> <p><strong>数据结构</strong></p> <ul><li>List 的数据结构为快速链表 quickList。</li> <li>首先在列表元素较少的情况下会使用一块连续的内存存储，这个结构是 ziplist，也即是压缩列表。它将所有的元素紧挨着一起存储，分配的是一块连续的内存。</li> <li>当数据量比较多的时候才会改成 quicklist。因为普通的链表需要的附加指针空间太大，会比较浪费空间。比如这个列表里存的只是 int 类型的数据，结构上还需要两个额外的指针 prev 和 next。</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618164459005.png" alt="image-20210618164459005"></p> <ul><li>Redis 将链表和 ziplist 结合起来组成了 quicklist。也就是将多个 ziplist 使用双向指针串起来使用。这样既满足了快速的插入删除性能，又不会出现太大的空间冗余。</li></ul> <h3 id="_3-4-列表常用命令"><a href="#_3-4-列表常用命令" class="header-anchor">#</a> 3.4 列表常用命令</h3> <p>1.从左边或者右边插入一个或者多个值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lpush / rpush <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>
</code></pre></div><p>2.从左边或者右边吐出一个值，值在键在，值光键值亡</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lpop / rpop <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> 
</code></pre></div><p>3.列表从右边吐出一个值，插入到另外列表的左边</p> <div class="language-shell extra-class"><pre class="language-shell"><code>rpoplpush <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>从<span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
</code></pre></div><p>4.按照索引下标获得元素(从左到右)</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>start<span class="token operator">&gt;</span><span class="token operator">&lt;</span>stop<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 从左边插入value到key中</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush k1 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush k2 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token comment"># 从右往左边吐出k2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpop k2
<span class="token string">&quot;v3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpop k2
<span class="token string">&quot;v2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpop k2
<span class="token string">&quot;v1&quot;</span>

<span class="token comment"># 从k2 吐出 插入到k1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush k1 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush k2 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpoplpush k2 k1
<span class="token string">&quot;v1&quot;</span>

<span class="token comment"># 使用索引下标查询</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange k1 <span class="token number">0</span> <span class="token number">4</span> 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
</code></pre></div><p>5.按照索引下标获得元素</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lindex <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>index<span class="token operator">&gt;</span>  
</code></pre></div><p>6.获得列表长度</p> <div class="language-shell extra-class"><pre class="language-shell"><code>llen <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>7.在value的后面插入新的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>linsert <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> before <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator">&lt;</span>newvalue<span class="token operator">&gt;</span>
</code></pre></div><p>8.从左边删除n个value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lrem  <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>9.将列表key下标为index的值替换为value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>lset  <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>index<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 获得元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex k2 <span class="token number">1</span>
<span class="token string">&quot;v2&quot;</span>

<span class="token comment"># 获得长度</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> llen k2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> linsert k2 before v2 v5
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>

<span class="token comment"># 从左边删除n个</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrem k2 <span class="token number">3</span> v1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset k2 <span class="token number">0</span> v1
OK
</code></pre></div><h3 id="_3-5-redis-集合-set"><a href="#_3-5-redis-集合-set" class="header-anchor">#</a> 3.5 Redis 集合(Set)</h3> <p><strong>概述</strong></p> <ul><li><p>Redis set 对外提供的功能与 list 类似，是一个列表的功能，特殊之处在于 set 是可以自动排重的，当你需要存储一个列表数据，又不希望出现重复数据时，set 是一个很好的选择，并且 set 提供了判断某个成员是否在一个 set 集合内的重要接口，这个也是 list 所不能提供的。</p></li> <li><p>Redis 的 Set 是 string 类型的无序集合。它底层其实是一个 <code>value</code> 为 <code>null</code> 的 <code>hash</code> 表，所以添加，删除，查找的 <code>复杂度都是 O (1)</code>。</p></li> <li><p>一个算法，随着数据的增加，执行时间的长短，如果是 O (1)，数据增加，查找数据的时间不变。</p></li></ul> <p><strong>数据结构</strong></p> <ul><li>Set 数据结构是 dict 字典，字典是用哈希表实现的。</li> <li>Java 中 HashSet 的内部实现使用的是 HashMap，只不过所有的 value 都指向同一个对象。Redis 的 set 结构也是一样，它的内部也使用 hash 结构，所有的 value 都指向同一个内部值。</li></ul> <h3 id="_3-6-集合的常用命令"><a href="#_3-6-集合的常用命令" class="header-anchor">#</a> 3.6 集合的常用命令</h3> <p>1.将一个或者多个member元素加入到集合key中，已经存在的member元素将被忽略</p> <div class="language- extra-class"><pre class="language-text"><code>sadd  &lt;key&gt;&lt;value1&gt;&lt;value2&gt;
</code></pre></div><p>2.取出该集合的所有值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>smembers <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>3.判断集合key是否含有该value的值，有1，没有0</p> <div class="language-shell extra-class"><pre class="language-shell"><code>sismember <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> 
</code></pre></div><p>4.返回该集合的元素个数</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scard <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>5.删除集合的某个元素</p> <div class="language-shell extra-class"><pre class="language-shell"><code>srem <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>6.随机从该集合中吐出一个值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>spop <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>7.随机从该集合中取出n个值，不会从集合中删除</p> <div class="language-shell extra-class"><pre class="language-shell"><code>srandmember <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span> 
</code></pre></div><p>8.把集合中一个值从一个集合移动到另一个集合</p> <div class="language-shell extra-class"><pre class="language-shell"><code>smove <span class="token operator">&lt;</span>source<span class="token operator">&gt;</span><span class="token operator">&lt;</span>destination<span class="token operator">&gt;</span> value
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 添加一个集合</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd k1 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token comment"># 获取集合的所有数据</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers k1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token comment"># 判断是否存在</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember k1 v2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># 返回元素个数</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard k1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token comment"># 删除某个元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srem k1 v2 v1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token comment"># 随机吐出一个值</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop k1
<span class="token string">&quot;v3&quot;</span>
<span class="token comment"># 吐出n个值</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd k2 v1 v2 v3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember k2 <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
</code></pre></div><p>9.返回两个集合的元素交集元素</p> <div class="language- extra-class"><pre class="language-text"><code>sinter &lt;key1&gt;&lt;key2&gt;
</code></pre></div><p>10.返回两个集合的并集元素</p> <div class="language-shell extra-class"><pre class="language-shell"><code>sunion <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>11.返回两个集合的差集元素(key1中的，不包含key2中的)</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sdiff</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd k1 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd k2 <span class="token number">1</span> <span class="token number">3</span> <span class="token number">5</span> <span class="token number">7</span> 
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sinter k1 k2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sunion k1 k2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;5&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;7&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">sdiff</span> k1 k2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span>
</code></pre></div><h3 id="_3-7-redis哈希-hash"><a href="#_3-7-redis哈希-hash" class="header-anchor">#</a> 3.7 Redis哈希(Hash)</h3> <p><strong>概述</strong></p> <p>Redis hash 是一个键值对集合。</p> <ul><li><p>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。</p></li> <li><p>类似 Java 里面的 Map&lt;String,Object&gt;。</p></li> <li><p>用户 ID 为查找的 key，存储的 value 用户对象包含姓名，年龄，生日等信息，如果用普通的 key/value 结构来存储，主要有以下 2 种存储方式：</p></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618203434868.png" alt="image-20210618203434868"></p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618203449210.png" alt="image-20210618203449210"></p> <p>方法一：每次修改用户的某个属性需要，先反序列化改好后再序列化回去。开销较大。</p> <p>方法二：用户 ID 数据冗余。</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618203718979.png" alt="image-20210618203718979"></p> <p>通过 key (用户 ID) + field (属性标签) 就可以操作对应属性数据了，既不需要重复存储数据，也不会带来序列化和并发修改控制的问题。</p> <p><strong>数据结构</strong>
Hash 类型对应的数据结构是两种：ziplist（压缩列表），hashtable（哈希表）。当 field-value 长度较短且个数较少时，使用 ziplist，否则使用 hashtable。</p> <h3 id="_3-8-哈希常用命令"><a href="#_3-8-哈希常用命令" class="header-anchor">#</a> 3.8 哈希常用命令</h3> <p>1.创建一个key添加给field键赋值value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>2.从哈希集合中取出field的value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hget <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span>
</code></pre></div><p>3.批量设置hash的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hmset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>field<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>field<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>4.查看哈希表key中，给定的field是否存在</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hexists <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 设置单个field的值</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset k1 info <span class="token function">id</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget k1 info
<span class="token string">&quot;id&quot;</span>

<span class="token comment"># 批量设置</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmset k2 <span class="token function">id</span> uuid age <span class="token number">20</span> name lisi
OK
<span class="token comment"># 查看是否存在</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists k2 <span class="token function">id</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><p>5.列出hash集合的所有field</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hkeys <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>6.列出hash集合的所有value</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hvals <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre></div><p>7.为哈希表key中的域field的值加上增量1 -1</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hincrby <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">&lt;</span>increment<span class="token operator">&gt;</span>
</code></pre></div><p>8.将哈希表key中的域field的值设置为value，当且仅当域field不存在</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hsetnx <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys k2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;id&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals k2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;uuid&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;lisi&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby k2 age <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">21</span>
</code></pre></div><h3 id="_3-9-redis-有序集合-zset"><a href="#_3-9-redis-有序集合-zset" class="header-anchor">#</a> 3.9 Redis 有序集合 Zset</h3> <p><strong>概述</strong></p> <ul><li><p><code>Redis 有序集合 zset 与普通集合 set 非常相似，是一个没有重复元素的字符串集合。</code></p></li> <li><p>不同之处是有序集合的每个成员都关联了一个评分（score），这个评分（score）被用来按照从最低分到最高分的方式排序集合中的成员。集合的成员是唯一的，但是评分可以是重复了 。</p></li> <li><p>因为元素是有 序的，所以你也可以很快的根据评分（score）或者次序（position）来获取一个范围的元素。</p></li> <li><p>访问有序集合的中间元素也是非常快的，因此你能够使用有序集合作为一个没有重复成员的智能列表。</p></li></ul> <p><strong>数据结构</strong></p> <p>SortedSet (zset) 是 Redis 提供的一个非常特别的数据结构，一方面它等价于 Java 的数据结构 Map&lt;String, Double&gt;，可以给每一个元素 value 赋予一个权重 score，另一方面它又类似于 TreeSet，内部的元素会按照权重 score 进行排序，可以得到每个元素的名次，还可以通过 score 的范围来获取元素的列表。</p> <p>zset 底层使用了两个数据结构：</p> <ul><li><p>hash，hash 的作用就是关联元素 value 和权重 score，保障元素 value 的唯一性，可以通过元素 value 找到相应的 score 值。</p></li> <li><p>跳跃表，跳跃表的目的在于给元素 value 排序，根据 score 的范围获取元素列表。</p></li></ul> <p><strong>跳跃表</strong></p> <p>简介</p> <p>有序集合在生活中比较常见，例如根据成绩对学生排名，根据得分对玩家排名等。对于有序集合的底层实现，可以用数组、平衡树、链表等。数组不便元素的插入、删除；平衡树或红黑树虽然效率高但结构复杂；链表查询需要遍历所有效率低。Redis 采用的是跳跃表，跳跃表效率堪比红黑树，实现远比红黑树简单。</p> <p>对比有序链表和跳跃表，从链表中查询出 51：</p> <p>有序链表</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618205641992.png" alt="image-20210618205641992">
要查找值为 51 的元素，需要从第一个元素开始依次查找、比较才能找到。共需要 6 次比较。</p> <p>跳跃表</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618205920332.png" alt="image-20210618205920332"></p> <ul><li><p>从第 2 层开始，1 节点比 51 节点小，向后比较；</p></li> <li><p>21 节点比 51 节点小，继续向后比较，后面就是 NULL 了，所以从 21 节点向下到第 1 层；</p></li> <li><p>在第 1 层，41 节点比 51 节点小，继续向后，61 节点比 51 节点大，所以从 41 向下；</p></li> <li><p>在第 0 层，51 节点为要查找的节点，节点被找到，共查找 4 次。</p></li></ul> <p>从此可以看出跳跃表比有序链表效率要高。</p> <h3 id="_3-10-zset的常用命令"><a href="#_3-10-zset的常用命令" class="header-anchor">#</a> 3.10 zset的常用命令</h3> <p>1.将一个或多个member元素及其score值加入到有序集key当中。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zadd <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>score<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>score<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><p>2.返回有序集key中，下标start stop之间的元素，带上withscores可以让分数一起喝返回值回到结果集。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>start<span class="token operator">&gt;</span><span class="token operator">&lt;</span>stop<span class="token operator">&gt;</span> <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span>
</code></pre></div><p>3.返回有序集key中，所有的score值介于min和max之间（包括等于min或max有序集成员按score值递增(从小到大)次序排序）</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zrangebyscore key minmax <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span><span class="token punctuation">[</span>limit offset count<span class="token punctuation">]</span>
</code></pre></div><p>4.从小到大排列</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zrevrangebyscore key minmax <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span><span class="token punctuation">[</span>limit offset count<span class="token punctuation">]</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd topn <span class="token number">200</span> Java <span class="token number">300</span> C++ <span class="token number">240</span> Python <span class="token number">400</span> Golang
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange topn <span class="token number">0</span> <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Java&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Python&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;C++&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;Golang&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange topn <span class="token number">0</span> <span class="token number">3</span> withscores
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Java&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;200&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Python&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;240&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;C++&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;300&quot;</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;Golang&quot;</span>
<span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;400&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore topn <span class="token number">200</span> <span class="token number">300</span> withscores 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Java&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;200&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Python&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;240&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;C++&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;300&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore topn <span class="token number">300</span> <span class="token number">200</span> withscores 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;C++&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;300&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Python&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;240&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;Java&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;200&quot;</span>
</code></pre></div><p>5.为元素的score加上增量</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zincrby <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>increment<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>6.删除该集合下，指定的元素</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zrem <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>7.统计集合，分数区间内的元素个数</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zcount <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>min<span class="token operator">&gt;</span><span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>
</code></pre></div><p>8.返回值在集合中的排名，从0开始</p> <div class="language-shell extra-class"><pre class="language-shell"><code>zrank <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>实例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zincrby topn <span class="token number">50</span> Java
<span class="token string">&quot;250&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem topn Python
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount topn <span class="token number">200</span> <span class="token number">300</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrank topn Java
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><h2 id="_4-redis的配置文件详解"><a href="#_4-redis的配置文件详解" class="header-anchor">#</a> 4. Redis的配置文件详解</h2> <h3 id="_4-1-units单位"><a href="#_4-1-units单位" class="header-anchor">#</a> 4.1 Units单位</h3> <p>配置大小单位,开头定义了一些基本的度量单位，只支持bytes，不支持bit大小写不敏感</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Note on units: when memory size is needed, it is possible to specify</span>
<span class="token comment"># it in the usual form of 1k 5GB 4M and so forth:</span>
<span class="token comment">#</span>
<span class="token comment"># 1k =&gt; 1000 bytes</span>
<span class="token comment"># 1kb =&gt; 1024 bytes</span>
<span class="token comment"># 1m =&gt; 1000000 bytes</span>
<span class="token comment"># 1mb =&gt; 1024*1024 bytes</span>
<span class="token comment"># 1g =&gt; 1000000000 bytes</span>
<span class="token comment"># 1gb =&gt; 1024*1024*1024 bytes</span>
</code></pre></div><h3 id="_4-2-网络相关配置"><a href="#_4-2-网络相关配置" class="header-anchor">#</a> 4.2 网络相关配置</h3> <p>1.<code>Bind配置</code>
默认情况bind=127.0.0.1只能接受本机的访问请求，不写的情况下，无限制接受任何ip地址的访问</p> <p>生产环境肯定要写你应用服务器的地址；服务器是需要远程访问的，所以需要将其注释掉，如果开启了<code>protected-mode</code>，那么在没有设定<code>bind ip</code>且没有设密码的情况下，Redis只允许接受本机的响应。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################## NETWORK #####################################</span>

<span class="token comment"># By default, if no &quot;bind&quot; configuration directive is specified, Redis listens</span>
<span class="token comment"># for connections from all the network interfaces available on the server.</span>
<span class="token comment"># It is possible to listen to just one or multiple selected interfaces using</span>
<span class="token comment"># the &quot;bind&quot; configuration directive, followed by one or more IP addresses.</span>
<span class="token comment">#</span>
<span class="token comment"># Examples:</span>
<span class="token comment">#</span>
<span class="token comment"># bind 192.168.1.100 10.0.0.1</span>
<span class="token comment"># bind 0.0.0.0 ::1</span>

<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
</code></pre></div><p>2.<code>protected-mode保护模式</code></p> <p>将本机访问保护模式设置no</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># By default protected mode is enabled. You should disable it only if</span>
<span class="token comment"># you are sure you want clients from other hosts to connect to Redis</span>
<span class="token comment"># even if no authentication is configured, nor a specific set of interfaces</span>
<span class="token comment"># are explicitly listed using the &quot;bind&quot; directive.</span>

protected-mode no
</code></pre></div><p>3.<code>Port端口设置</code></p> <p>端口号，默认 6379</p> <div class="language-shell extra-class"><pre class="language-shell"><code>port <span class="token number">6379</span>
</code></pre></div><p>4.<code>tcp-backlog</code></p> <p>设置tcp的backlog，backlog其实是一个连接队列，backlog队列总和=未完成三次握手队列 + 已经完成三次握手队列。</p> <p>在高并发环境下你需要一个高backlog值来避免慢客户端连接问题。</p> <blockquote><p>注意Linux内核会将这个值减小到<code>/proc/sys/net/core/somaxconn的值（128）</code>，所以需要确认增大<code>/proc/sys/net/core/somaxconn</code>和<code>/proc/sys/net/ipv4/tcp_max_syn_backlog（128）</code>两个值来达到想要的效果</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># TCP listen() backlog.</span>
<span class="token comment">#</span>
<span class="token comment"># In high requests-per-second environments you need an high backlog in order</span>
<span class="token comment"># to avoid slow clients connections issues. Note that the Linux kernel</span>
<span class="token comment"># will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span>
<span class="token comment"># make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span>
<span class="token comment"># in order to get the desired effect.</span>
tcp-backlog <span class="token number">511</span>
</code></pre></div><p>5.<code>tcp-keepalive</code></p> <p>对访问客户端的一种心跳检测，每隔n秒检测一次。单位为秒，如果设置为0，则不会进行Keepalive检测，建议设置成60</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># A reasonable value for this option is 300 seconds, which is the new</span>
<span class="token comment"># Redis default starting with Redis 3.2.1.</span>
tcp-keepalive <span class="token number">300</span>
</code></pre></div><h3 id="_4-3-general通用"><a href="#_4-3-general通用" class="header-anchor">#</a> 4.3 GENERAL通用</h3> <p>1.<code>daemonize</code></p> <p>是否为后台进程，设置为yes,守护进程，后台启动</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################# GENERAL #####################################</span>

<span class="token comment"># By default Redis does not run as a daemon. Use 'yes' if you need it.</span>
<span class="token comment"># Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span>
daemonize <span class="token function">yes</span>
</code></pre></div><p>2.<code>loglevel</code></p> <p>指定日志记录级别，Redis总共支持四个级别：<code>debug、verbose、notice、warning</code>，默认为<code>notice</code>
四个级别根据使用阶段来选择，生产环境选择notice 或者warning</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Specify the server verbosity level.</span>
<span class="token comment"># This can be one of:</span>
<span class="token comment"># debug (a lot of information, useful for development/testing)</span>
<span class="token comment"># verbose (many rarely useful info, but not a mess like the debug level)</span>
<span class="token comment"># notice (moderately verbose, what you want in production probably)</span>
<span class="token comment"># warning (only very important / critical messages are logged)</span>
loglevel notice
</code></pre></div><h3 id="_4-4-security安全"><a href="#_4-4-security安全" class="header-anchor">#</a> 4.4 SECURITY安全</h3> <p>1.<code>设置密码</code></p> <p>访问密码的查看、设置和取消,在命令中设置密码，只是临时的。重启redis服务器，密码就还原了。
永久设置，需要再配置文件中进行设置。</p> <p>即找到redis的配置文件—redis.conf文件，然后修改里面的<code>requirepass</code>，这个本来是注释起来了的，将注释去掉，并将后面对应的字段设置成自己想要的密码.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Warning: since Redis is pretty fast an outside user can try up to</span>
<span class="token comment"># 150k passwords per second against a good box. This means that you should</span>
<span class="token comment"># use a very strong password otherwise it will be very easy to break.</span>
<span class="token comment">#</span>
requirepass <span class="token number">123456</span>
</code></pre></div><h2 id="_5-redis的发布和订阅"><a href="#_5-redis的发布和订阅" class="header-anchor">#</a> 5. Redis的发布和订阅</h2> <h3 id="_5-1-什么是发布和订阅"><a href="#_5-1-什么是发布和订阅" class="header-anchor">#</a> 5.1 什么是发布和订阅</h3> <ul><li>Redis 发布订阅 (pub/sub) 是一种消息通信模式：<code>发送者 (pub) 发送消息，订阅者 (sub) 接收消息。</code></li> <li>Redis 客户端可以订阅任意数量的频道。</li></ul> <h3 id="_5-2-redis的发布订阅"><a href="#_5-2-redis的发布订阅" class="header-anchor">#</a> 5.2 Redis的发布订阅</h3> <p>客户端可以订阅频道如下图：</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618211300027.png" alt="image-20210618211300027"></p> <p>当给这个频道发布消息后，消息就会发送给订阅的客户端：</p> <p><img src="https://cdn.jsdelivr.net/gh/zhangc233/pic@master/img/image-20210618211401669.png" alt="image-20210618211401669"></p> <p>发布订阅命令行实现：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 打开一个客户端订阅 channel1：</span>
<span class="token punctuation">[</span>root@redis etc<span class="token punctuation">]</span><span class="token comment"># redis-cli </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> subscribe channel1
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;subscribe&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>   


<span class="token comment"># 打开另一个客户端，给 channel1 发布消息 hello：</span>
<span class="token punctuation">[</span>root@redis /<span class="token punctuation">]</span><span class="token comment"># redis-cli </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> publish channel1 hello
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

<span class="token comment"># 打开第一个客户端可以看到发送的消息：</span>
<span class="token punctuation">[</span>root@redis etc<span class="token punctuation">]</span><span class="token comment"># redis-cli </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> subscribe channel1
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;subscribe&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;channel1&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>   
</code></pre></div><h2 id="_6-新数据类型"><a href="#_6-新数据类型" class="header-anchor">#</a> 6. 新数据类型</h2> <h3 id="_6-1-bitmaps-位操作字符串"><a href="#_6-1-bitmaps-位操作字符串" class="header-anchor">#</a> 6.1 Bitmaps：位操作字符串</h3> <h3 id="_6-2-简介"><a href="#_6-2-简介" class="header-anchor">#</a> 6.2 简介</h3> <p>现代计算机使用二进制（位）作为信息的基本单位，1个字节等于8位，例如“abc”字符串是有3个字节组成，但实际在计算机内存储时将其使用二进制表示，“abc”分别对应的ASCII码是：97、98、99，对应的二进制分别是01100001、01100010、01100011，如下图</p> <p><img src="https://raw.githubusercontent.com/cn-zhangyh/image/main/img/1369022-20220427111059587-108591998.png" alt="img"></p> <p>合理地使用位操作能够有效地提高内存使用率和开发效率。</p> <p>Redis提供了Bitmaps这个“数据类型”可以实现对位的操作：</p> <ul><li>Bitmaps本身不是一种数据类型， 实际上它就是字符串（key-value） ， 但是它可以对字符串的位进行操作，字符串中每个字符对应1个字节，也就是8位，一个字符可以存储8个bit位信息。</li> <li>Bitmaps单独提供了一套命令， 所以在Redis中使用Bitmaps和使用字符串的方法不太相同。 可以把Bitmaps想象成一个以位为单位的数组， 数组的每个单元只能存储0和1， 数组的下标在Bitmaps中叫做偏移量。</li></ul> <p><img src="https://raw.githubusercontent.com/cn-zhangyh/image/main/img/1369022-20220427111115780-308728451.png" alt="img"></p> <h3 id="_6-3-常用命令"><a href="#_6-3-常用命令" class="header-anchor">#</a> 6.3 常用命令</h3> <p><strong>setbit：设置某个偏移量的值（0或1）</strong></p> <ol><li><code>SETBIT key offset value</code></li></ol> <blockquote><p>设置offset偏移位的值为value，offset的值是从0开始的，<strong>n代表第n+1个bit位置的</strong>。</p> <p><code>offset</code> 参数必须大于或等于 <code>0</code> ，小于 2^32 (bit 映射被限制在 512 MB 之内)。</p> <p><code>value</code>的值只能为0或1</p> <p>**返回值：**指定偏移量原来储存的位。</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>redis<span class="token operator">&gt;</span> SETBIT bit <span class="token number">10086</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> GETBIT bit <span class="token number">10086</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

redis<span class="token operator">&gt;</span> GETBIT bit <span class="token number">100</span>   <span class="token comment"># bit 默认被初始化为 0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><p><strong>示例</strong></p> <p>每个独立用户是否访问过网站存放在bitmaps中，将访问的用户记做1，没有访问的用户记做0，用户id作为offset。</p> <p>假设现在有20个用户，userid=1,6,11,15,19的用户对网站进行了访问，那么当前bitmaps初始化结果如图</p> <p><img src="https://raw.githubusercontent.com/cn-zhangyh/image/main/img/1369022-20220427111130754-1227376152.png" alt="img"></p> <p><code>users:20220409</code>这个bitmaps中表示2022-04-09这天独立访问的用户，如下</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit users:20220409 <span class="token number">1</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit users:20220409 <span class="token number">6</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit users:20220409 <span class="token number">11</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit users:20220409 <span class="token number">15</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit users:20220409 <span class="token number">19</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><p><strong>getbit：获取某个偏移位的值</strong></p> <ol><li><code>GETBIT key offset</code></li></ol> <blockquote><p>获取key所对应的bitmaps中offset偏移位的值。</p> <p>返回值：0或者1</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment">#清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit <span class="token function">users</span> <span class="token number">1001</span> <span class="token number">1</span> <span class="token comment">#设置偏移量1001的bit位的值为1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit <span class="token function">users</span> <span class="token number">1001</span> <span class="token comment">#获取偏移位1001的bit位的值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit <span class="token function">users</span> <span class="token number">1000</span> <span class="token comment">#获取偏移位1000的bit位的值，未设置，返回0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><p><strong>bitcount：统计bit位都为1的数量</strong></p> <ol><li><code>BITCOUNT key [start] [end]</code></li></ol> <blockquote><p>统计字符串被设置为1的bit数，一般情况下，给定的整个字符串都会被进行统计，通过指定额外的start或者end参数，可以让计数只在特定的位上进行，<code>start</code> 和 <code>end</code> 参数，都可以使用负数值：比如 <code>-1</code> 表示最后一个位，而 <code>-2</code> 表示倒数第二个位，以此类推。</p> <p><strong>注意了：start、end是指bit组的字节的下标数，一个直接对应8个bit，所以[a,b]对应的offset范围是[8a,8b+7]</strong></p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment"># 清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit user <span class="token number">7</span> <span class="token number">1</span> <span class="token comment"># 设置user这个bitmaps中偏移量为7的bit为值为1，也就是第8个bit位的值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit user <span class="token number">15</span> <span class="token number">1</span> <span class="token comment"># 设置user这个bitmaps中偏移量为15的bit为值为1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit user <span class="token number">23</span> <span class="token number">1</span> <span class="token comment"># 设置user这个bitmaps中偏移量为23的bit为值为1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> bitcount user <span class="token comment"># 获取user这个bitmaps中1的数量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> bitcount user <span class="token number">0</span> <span class="token number">1</span> <span class="token comment"># 获取[0,1]这个字节内bit位上1的数量，也就是offset是[0,15]的位置上1的数量，所以是2个</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> bitcount user <span class="token number">0</span> <span class="token number">0</span> <span class="token comment"># 获取[0,0]这个字节内bit位上1的数量，也就是offset是[0,7]的位置上1的数量，只有7这个位置，所以是1个</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><p><strong>bittop：对一个多个bitmaps执行位操作</strong></p> <ol><li><code>BITOP operation destkey key [key ...]</code></li></ol> <blockquote><p>对一个或多个保存二进制位的字符串 <code>key</code> 进行位元操作，并将结果保存到 <code>destkey</code> 上。</p> <p><code>operation</code> 可以是 <code>AND</code> 、 <code>OR</code> 、 <code>NOT</code> 、 <code>XOR</code> 这四种操作中的任意一种：</p> <ul><li><code>BITOP AND destkey key [key ...]</code> ，对一个或多个 <code>key</code> 求逻辑并，并将结果保存到 <code>destkey</code> 。</li> <li><code>BITOP OR destkey key [key ...]</code> ，对一个或多个 <code>key</code> 求逻辑或，并将结果保存到 <code>destkey</code> 。</li> <li><code>BITOP XOR destkey key [key ...]</code> ，对一个或多个 <code>key</code> 求逻辑异或，并将结果保存到 <code>destkey</code> 。</li> <li><code>BITOP NOT destkey key</code> ，对给定 <code>key</code> 求逻辑非，并将结果保存到 <code>destkey</code> 。</li></ul> <p>除了 <code>NOT</code> 操作之外，其他操作都可以接受一个或多个 <code>key</code> 作为输入。</p> <p>**返回值：**保存到 <code>destkey</code> 的字符串的长度，和输入 <code>key</code> 中最长的字符串长度相等。</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>redis<span class="token operator">&gt;</span> SETBIT bits-1 <span class="token number">0</span> <span class="token number">1</span>        <span class="token comment"># bits-1 = 1001</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> SETBIT bits-1 <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> SETBIT bits-2 <span class="token number">0</span> <span class="token number">1</span>        <span class="token comment"># bits-2 = 1011</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> SETBIT bits-2 <span class="token number">1</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> SETBIT bits-2 <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> BITOP AND and-result bits-1 bits-2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

redis<span class="token operator">&gt;</span> GETBIT and-result <span class="token number">0</span>      <span class="token comment"># and-result = 1001</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

redis<span class="token operator">&gt;</span> GETBIT and-result <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> GETBIT and-result <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>

redis<span class="token operator">&gt;</span> GETBIT and-result <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><h3 id="_6-4-bitmaps与set比较"><a href="#_6-4-bitmaps与set比较" class="header-anchor">#</a> 6.4 bitmaps与set比较</h3> <p>假设网站有 1 亿用户， 每天独立访问的用户有 5 千万， 如果每天用集合类型和 Bitmaps 分别存储活跃用户可以得到表：</p> <p><strong>set 和 Bitmaps 存储一天活跃用户对比</strong></p> <table><thead><tr><th>数据类型</th> <th>每个用户 id 占用空间</th> <th>需要存储的用户量</th> <th>全部内存量</th></tr></thead> <tbody><tr><td>set集合</td> <td>64 位</td> <td>50000000</td> <td>64 位 * 50000000 = 400MB</td></tr> <tr><td>Bitmaps</td> <td>1位</td> <td>100000000</td> <td>1 位 * 100000000 = 12.5MB</td></tr></tbody></table> <p>很明显， 这种情况下使用 Bitmaps 能节省很多的内存空间， 尤其是随着时间推移节省的内存还是非常可观的。</p> <p><strong>set 和 Bitmaps 存储独立用户空间对比</strong></p> <table><thead><tr><th>数据类型</th> <th>一天</th> <th>一月</th> <th>一年</th></tr></thead> <tbody><tr><td>set集合</td> <td>400MB</td> <td>12GB</td> <td>144GB</td></tr> <tr><td>Bitmaps</td> <td>12.5MB</td> <td>375MB</td> <td>4.5GB</td></tr></tbody></table> <p>但 Bitmaps 并不是万金油， 假如该网站每天的独立访问用户很少， 例如只有 10 万（大量的僵尸用户） ， 那么两者的对比如下表所示， 很显然， 这时候使用 Bitmaps 就不太合适了， 因为基本上大部分位都是 0。</p> <table><thead><tr><th>数据类型</th> <th>每个 userid 占用空间</th> <th>需要存储的用户量</th> <th>全部内存量</th></tr></thead> <tbody><tr><td>集合</td> <td>64 位</td> <td>100000</td> <td>64 位 * 100000 = 800KB</td></tr> <tr><td>Bitmaps</td> <td>1 位</td> <td>100000000</td> <td>1 位 * 100000000 = 12.5MB</td></tr></tbody></table> <h3 id="_6-5-hyperloglog"><a href="#_6-5-hyperloglog" class="header-anchor">#</a> 6.5 HyperLoglog</h3> <h3 id="_6-6-简介"><a href="#_6-6-简介" class="header-anchor">#</a> 6.6 简介</h3> <p>在工作当中，我们经常会遇到与统计相关的功能需求，比如统计网站 PV（PageView 页面访问量），可以使用 Redis 的 incr、incrby 轻松实现。但像 UV（UniqueVisitor 独立访客）、独立 IP 数、搜索记录数等需要去重和计数的问题如何解决？这种求集合中不重复元素个数的问题称为基数问题。</p> <p>解决基数问题有很多种方案：</p> <p>数据存储在 MySQL 表中，使用 distinct count 计算不重复个数。</p> <p>使用 Redis 提供的 hash、set、bitmaps 等数据结构来处理。</p> <p>以上的方案结果精确，但随着数据不断增加，导致占用空间越来越大，对于非常大的数据集是不切实际的。能否能够降低一定的精度来平衡存储空间？Redis 推出了 HyperLogLog。</p> <p>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是：在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定的、并且是很小的。</p> <p>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 <code>2^64</code> 个不同元素的基数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。</p> <p>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</p> <p>什么是基数？</p> <p>比如数据集 <code>{1, 3, 5, 7, 5, 7, 8}</code>，那么这个数据集的基数集为 <code>{1, 3, 5 ,7, 8}</code>，基数 (不重复元素) 为 5。 基数估计就是在误差可接受的范围内，快速计算基数。</p> <h3 id="_6-7-命令"><a href="#_6-7-命令" class="header-anchor">#</a> 6.7 命令</h3> <p><strong>pfadd：添加多个元素</strong></p> <ol><li><code>pfadd key element [element ...]</code></li></ol> <blockquote><p>向HyperLoglog类型的key中添加一个或者多个元素。</p> <p>添加一个或者多个元素到key对应的集合中。</p> <p><strong>返回值：</strong></p> <p>1：添加成功</p> <p>0：添加失败</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment"># 清空db方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd program <span class="token function">java</span> php c c++ <span class="token comment"># program中添加4个元素[java,php,c,c++]，添加成功发，返回1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd program <span class="token function">java</span> <span class="token comment"># 再次添加java，由于已经存在，所以添加失败，返回0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd program <span class="token function">java</span> js <span class="token comment"># 再次添加2个元素，java已经存在了，但是js不存在，添加成功，返回1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><p><strong>pfcount：获取多个HLL合并后元素的个数</strong></p> <ol><li><code>pfcount key1 key2 ...</code></li></ol> <blockquote><p>统计一个或者多个key去重后元素的数量。</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment"># 清空db方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd uv1 a b c d e <span class="token comment">#uv1中5个元素：[a,b,c,d,e]</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv1 <span class="token comment">#uv1中数量为5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd uv2 b c d e f <span class="token comment">#uv2中5个元素：[b,c,d,e,f]</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv2 <span class="token comment">#uv2中数量为5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv1 uv2 <span class="token comment"># 获取uv1和uv2去重之后数量合集：[a,b,c,d,e,f]，数量为5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
</code></pre></div><p><strong>pfmerge：将多个HLL合并后元素放入另外一个HLL</strong></p> <ol><li><code>pfmerge destkey sourcekey [sourcekey ...]</code></li></ol> <blockquote><p>将多个<code>sourcekey</code>合并后放到<code>destkey</code>中。</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment"># 清空db方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd uv1 a b c d e <span class="token comment">#uv1中5个元素：[a,b,c,d,e]</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv1 <span class="token comment">#uv1中数量为5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd uv2 b c d e f <span class="token comment">#uv2中5个元素：[b,c,d,e,f]</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv2 <span class="token comment">#uv2中数量为5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfmerge uv_dest uv1 uv2 <span class="token comment">#将uv1和uv2合并后放入uv_dest</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount uv_dest <span class="token comment">#uv_dest元素个数为6</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
</code></pre></div><h3 id="_6-8-geographic"><a href="#_6-8-geographic" class="header-anchor">#</a> 6.8 Geographic</h3> <h3 id="_6-9-简介"><a href="#_6-9-简介" class="header-anchor">#</a> 6.9 简介</h3> <p>Reids3.2 中增加了对GEO类型的支持，GEO（Geographic），地理信息的缩写。</p> <p>该类型，就是元素的 2 维坐标，在地图上就是经纬度，redis基于该类型，提供了经纬度设置、查询、范围查询、距离查询，经纬度Hash等常见操作。</p> <h3 id="_6-10-命令"><a href="#_6-10-命令" class="header-anchor">#</a> 6.10 命令</h3> <p><strong>geoadd：添加多个位置的经纬度</strong></p> <ol><li><code>geoadd key longitude latitude member [longitude latitude member ...]</code></li></ol> <blockquote><p>longitude latitude member：经度 纬度 名称</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment">#清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">121.47</span> <span class="token number">31.23</span> shanghai <span class="token comment">#添加上海的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">106.50</span> <span class="token number">29.53</span> chongqing <span class="token number">114.05</span> <span class="token number">22.52</span> shenzhen <span class="token number">116.38</span> <span class="token number">39.90</span> beijing <span class="token comment">#添加重庆、深圳、北京 3 个城市的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> china:city <span class="token comment">#发现geo实际上使用zset类型存储的</span>
zset
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange china:city <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqing&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shenzhen&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange china:city <span class="token number">0</span> <span class="token parameter variable">-1</span> withscores
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqing&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;4026042091628984&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shenzhen&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;4046432193584628&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;4054803462927619&quot;</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;4069885332386336&quot;</span>
</code></pre></div><p>两级无法直接添加，一般会下载城市数据，直接通过java程序一次性导入。</p> <p>有效的经纬度从-180度到180度，有效的维度从-85.05112878度到85.05112878度。</p> <p>当坐标位置超出指定范围时，该命令将会返回一个错误。</p> <p>已经添加的数据，是无法再次往里面添加的。</p> <p><strong>geopos：获取多个位置的坐标值</strong></p> <ol><li><code>geopos key member [member ...]</code></li></ol> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment">#清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">121.47</span> <span class="token number">31.23</span> shanghai <span class="token comment">#添加上海的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">106.50</span> <span class="token number">29.53</span> chongqing <span class="token number">114.05</span> <span class="token number">22.52</span> shenzhen <span class="token number">116.38</span> <span class="token number">39.90</span> beijing <span class="token comment">#添加重庆、深圳、北京 3 个城市的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geopos china:city wuhan beijing chongqing <span class="token comment">#获取武汉、北京、重庆 3个城市的坐标，由于没有添加武汉的数据，所以没有获取到，其他2个获取到了</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;116.38000041246414185&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;39.90000009167092543&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;106.49999767541885376&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.52999957900659211&quot;</span>
</code></pre></div><p><strong>geodist：获取两个位置的直线距离</strong></p> <ol><li><code>geodist key member1 member2 [m|km|ft|mi]</code></li></ol> <blockquote><p>单位：<code>[m|km|ft|mi] -》[米|千米|英里|英尺]</code>，默认为米</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment">#清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">121.47</span> <span class="token number">31.23</span> shanghai <span class="token comment">#添加上海的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">106.50</span> <span class="token number">29.53</span> chongqing <span class="token number">114.05</span> <span class="token number">22.52</span> shenzhen <span class="token number">116.38</span> <span class="token number">39.90</span> beijing <span class="token comment">#添加重庆、深圳、北京 3 个城市的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist china:city beijing chongqing km <span class="token comment">#获取北京到重庆的直线距离</span>
<span class="token string">&quot;1462.9505&quot;</span>
</code></pre></div><p><strong>georadius：以给定的经纬度为中心，找出某一半径内的元素</strong></p> <ol><li><code>georadius key longitude latitude radius m|km|ft|mi</code></li></ol> <blockquote><p>单位：<code>[m|km|ft|mi] -》[米|千米|英里|英尺]</code>，默认为米</p></blockquote> <p>示例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb <span class="token comment">#清空db，方便测试</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">121.47</span> <span class="token number">31.23</span> shanghai <span class="token comment">#添加上海的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">106.50</span> <span class="token number">29.53</span> chongqing <span class="token number">114.05</span> <span class="token number">22.52</span> shenzhen <span class="token number">116.38</span> <span class="token number">39.90</span> beijing <span class="token comment">#添加重庆、深圳、北京 3 个城市的经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km <span class="token comment">#在china:city中检索：以经纬度(110,30)为中心，半径为1000km内的位置列表</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqing&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shenzhen&quot;</span>
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/11/28, 22:03:59</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/CodeVault/pages/20a0c8/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Ubuntu20.04 MySQL8远程登录</div></a> <a href="/CodeVault/pages/2d9f22/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">SpringBoot整合Redis</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/CodeVault/pages/20a0c8/" class="prev">Ubuntu20.04 MySQL8远程登录</a></span> <span class="next"><a href="/CodeVault/pages/2d9f22/">SpringBoot整合Redis</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/CodeVault/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/CodeVault/pages/c936ca/"><div>
            学习文档
            <!----></div></a> <span class="date">11-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/CodeVault/pages/53f082/"><div>
            如何成为FISCO社区的MVP 总结篇
            <!----></div></a> <span class="date">11-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/CodeVault/pages/3d3086/"><div>
            一文搞懂Truffle测试
            <!----></div></a> <span class="date">11-28</span></dt></dl> <dl><dd></dd> <dt><a href="/CodeVault/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>YYzop & Hior | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/CodeVault/assets/js/app.ef278985.js" defer></script><script src="/CodeVault/assets/js/2.f96441c8.js" defer></script><script src="/CodeVault/assets/js/113.63efff87.js" defer></script>
  </body>
</html>
